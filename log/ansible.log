
2018-02-27 14:39:16,474 p=166505 u=qupeng |   [WARNING]:  * Failed to parse /home/qupeng/ansible/tidb-ansible/inventory.ini with ini plugin: /home/qupeng/ansible/tidb-ansible/inventory.ini:23: Expected key=value host
variable assignment, got: pingcap

2018-02-27 14:39:16,474 p=166505 u=qupeng |   [WARNING]: Unable to parse /home/qupeng/ansible/tidb-ansible/inventory.ini as an inventory source

2018-02-27 14:39:16,474 p=166505 u=qupeng |   [WARNING]: No inventory was parsed, only implicit localhost is available

2018-02-27 14:39:16,475 p=166505 u=qupeng |   [WARNING]: Could not match supplied host pattern, ignoring: all

2018-02-27 14:39:16,476 p=166505 u=qupeng |   [WARNING]: provided hosts list is empty, only localhost is available

2018-02-27 14:39:16,720 p=166505 u=qupeng |  PLAY [do local preparation] ************************************************************************************************************************************************
2018-02-27 14:39:16,735 p=166505 u=qupeng |  TASK [local : create downloads and resources directories] ******************************************************************************************************************
2018-02-27 14:39:17,068 p=166505 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/downloads)
2018-02-27 14:39:17,189 p=166505 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources)
2018-02-27 14:39:17,315 p=166505 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources/bin)
2018-02-27 14:39:17,324 p=166505 u=qupeng |  TASK [local : create packages.yml] *****************************************************************************************************************************************
2018-02-27 14:39:17,348 p=166505 u=qupeng |  fatal: [localhost]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'tidb_version' is undefined"}
2018-02-27 14:39:17,349 fail [localhost]: Ansible FAILED! => playbook: local_prepare.yml; TASK: local : create packages.yml; message: {"changed": false, "msg": "AnsibleUndefinedVariable: 'tidb_version' is undefined"}
2018-02-27 14:39:17,351 p=166505 u=qupeng |  	to retry, use: --limit @/home/qupeng/ansible/tidb-ansible/retry_files/local_prepare.retry

2018-02-27 14:39:17,351 p=166505 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 14:39:17,352 p=166505 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=1   
2018-02-27 14:39:17,352 p=166505 u=qupeng |  ERROR MESSAGE SUMMARY ******************************************************************************************************************************************************
2018-02-27 14:39:17,352 p=166505 u=qupeng |  [localhost]: Ansible FAILED! => playbook: local_prepare.yml; TASK: local : create packages.yml; message: {"changed": false, "msg": "AnsibleUndefinedVariable: 'tidb_version' is undefined"}

2018-02-27 14:39:17,352 p=166505 u=qupeng |  Ask for help:
2018-02-27 14:39:17,353 p=166505 u=qupeng |  Contact us: sre@pingcap.com
2018-02-27 14:39:17,353 p=166505 u=qupeng |  It seems that you encounter some problems. You can send an email to the above email address, attached with the tidb-ansible/inventory.ini and tidb-ansible/log/ansible.log files and the error message, or new issue on https://github.com/pingcap/tidb-ansible/issues. We'll try our best to help you deploy a TiDB cluster. Thanks. :-)
2018-02-27 14:39:51,353 p=166590 u=qupeng |   [WARNING]:  * Failed to parse /home/qupeng/ansible/tidb-ansible/inventory.ini with ini plugin: /home/qupeng/ansible/tidb-ansible/inventory.ini:23: Expected key=value host
variable assignment, got: pingcap

2018-02-27 14:39:51,353 p=166590 u=qupeng |   [WARNING]: Unable to parse /home/qupeng/ansible/tidb-ansible/inventory.ini as an inventory source

2018-02-27 14:39:51,353 p=166590 u=qupeng |   [WARNING]: No inventory was parsed, only implicit localhost is available

2018-02-27 14:39:51,354 p=166590 u=qupeng |   [WARNING]: Could not match supplied host pattern, ignoring: all

2018-02-27 14:39:51,355 p=166590 u=qupeng |   [WARNING]: provided hosts list is empty, only localhost is available

2018-02-27 14:39:51,618 p=166590 u=qupeng |  PLAY [do local preparation] ************************************************************************************************************************************************
2018-02-27 14:39:51,638 p=166590 u=qupeng |  TASK [local : create downloads and resources directories] ******************************************************************************************************************
2018-02-27 14:39:51,939 p=166590 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/downloads)
2018-02-27 14:39:52,127 p=166590 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources)
2018-02-27 14:39:52,313 p=166590 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources/bin)
2018-02-27 14:39:52,322 p=166590 u=qupeng |  TASK [local : create packages.yml] *****************************************************************************************************************************************
2018-02-27 14:39:52,354 p=166590 u=qupeng |  fatal: [localhost]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'tidb_version' is undefined"}
2018-02-27 14:39:52,354 fail [localhost]: Ansible FAILED! => playbook: local_prepare.yml; TASK: local : create packages.yml; message: {"changed": false, "msg": "AnsibleUndefinedVariable: 'tidb_version' is undefined"}
2018-02-27 14:39:52,356 p=166590 u=qupeng |  	to retry, use: --limit @/home/qupeng/ansible/tidb-ansible/retry_files/local_prepare.retry

2018-02-27 14:39:52,356 p=166590 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 14:39:52,357 p=166590 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=1   
2018-02-27 14:39:52,357 p=166590 u=qupeng |  ERROR MESSAGE SUMMARY ******************************************************************************************************************************************************
2018-02-27 14:39:52,357 p=166590 u=qupeng |  [localhost]: Ansible FAILED! => playbook: local_prepare.yml; TASK: local : create packages.yml; message: {"changed": false, "msg": "AnsibleUndefinedVariable: 'tidb_version' is undefined"}

2018-02-27 14:39:52,357 p=166590 u=qupeng |  Ask for help:
2018-02-27 14:39:52,358 p=166590 u=qupeng |  Contact us: sre@pingcap.com
2018-02-27 14:39:52,358 p=166590 u=qupeng |  It seems that you encounter some problems. You can send an email to the above email address, attached with the tidb-ansible/inventory.ini and tidb-ansible/log/ansible.log files and the error message, or new issue on https://github.com/pingcap/tidb-ansible/issues. We'll try our best to help you deploy a TiDB cluster. Thanks. :-)
2018-02-27 14:40:03,598 p=166680 u=qupeng |   [WARNING]:  * Failed to parse /home/qupeng/ansible/tidb-ansible/inventory.ini with ini plugin: /home/qupeng/ansible/tidb-ansible/inventory.ini:23: Expected key=value host
variable assignment, got: pingcap

2018-02-27 14:40:03,599 p=166680 u=qupeng |   [WARNING]: Unable to parse /home/qupeng/ansible/tidb-ansible/inventory.ini as an inventory source

2018-02-27 14:40:03,599 p=166680 u=qupeng |   [WARNING]: No inventory was parsed, only implicit localhost is available

2018-02-27 14:40:03,600 p=166680 u=qupeng |   [WARNING]: Could not match supplied host pattern, ignoring: all

2018-02-27 14:40:03,600 p=166680 u=qupeng |   [WARNING]: provided hosts list is empty, only localhost is available

2018-02-27 14:40:03,863 p=166680 u=qupeng |  PLAY [do local preparation] ************************************************************************************************************************************************
2018-02-27 14:40:03,882 p=166680 u=qupeng |  TASK [local : create downloads and resources directories] ******************************************************************************************************************
2018-02-27 14:40:04,249 p=166680 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/downloads)
2018-02-27 14:40:04,439 p=166680 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources)
2018-02-27 14:40:04,628 p=166680 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources/bin)
2018-02-27 14:40:04,637 p=166680 u=qupeng |  TASK [local : create packages.yml] *****************************************************************************************************************************************
2018-02-27 14:40:04,672 p=166680 u=qupeng |  fatal: [localhost]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'tidb_version' is undefined"}
2018-02-27 14:40:04,672 fail [localhost]: Ansible FAILED! => playbook: local_prepare.yml; TASK: local : create packages.yml; message: {"changed": false, "msg": "AnsibleUndefinedVariable: 'tidb_version' is undefined"}
2018-02-27 14:40:04,674 p=166680 u=qupeng |  	to retry, use: --limit @/home/qupeng/ansible/tidb-ansible/retry_files/local_prepare.retry

2018-02-27 14:40:04,674 p=166680 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 14:40:04,675 p=166680 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=1   
2018-02-27 14:40:04,675 p=166680 u=qupeng |  ERROR MESSAGE SUMMARY ******************************************************************************************************************************************************
2018-02-27 14:40:04,675 p=166680 u=qupeng |  [localhost]: Ansible FAILED! => playbook: local_prepare.yml; TASK: local : create packages.yml; message: {"changed": false, "msg": "AnsibleUndefinedVariable: 'tidb_version' is undefined"}

2018-02-27 14:40:04,675 p=166680 u=qupeng |  Ask for help:
2018-02-27 14:40:04,675 p=166680 u=qupeng |  Contact us: sre@pingcap.com
2018-02-27 14:40:04,676 p=166680 u=qupeng |  It seems that you encounter some problems. You can send an email to the above email address, attached with the tidb-ansible/inventory.ini and tidb-ansible/log/ansible.log files and the error message, or new issue on https://github.com/pingcap/tidb-ansible/issues. We'll try our best to help you deploy a TiDB cluster. Thanks. :-)
2018-02-27 14:40:31,721 p=166783 u=qupeng |  PLAY [do local preparation] ************************************************************************************************************************************************
2018-02-27 14:40:31,740 p=166783 u=qupeng |  TASK [local : create downloads and resources directories] ******************************************************************************************************************
2018-02-27 14:40:32,065 p=166783 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/downloads)
2018-02-27 14:40:32,257 p=166783 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources)
2018-02-27 14:40:32,419 p=166783 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources/bin)
2018-02-27 14:40:32,428 p=166783 u=qupeng |  TASK [local : create packages.yml] *****************************************************************************************************************************************
2018-02-27 14:40:33,078 p=166783 u=qupeng |  changed: [localhost]
2018-02-27 14:40:33,085 p=166783 u=qupeng |  TASK [local : create specific deployment method packages.yml] **************************************************************************************************************
2018-02-27 14:40:33,415 p=166783 u=qupeng |  changed: [localhost]
2018-02-27 14:40:33,422 p=166783 u=qupeng |  TASK [local : include_vars] ************************************************************************************************************************************************
2018-02-27 14:40:33,456 p=166783 u=qupeng |  ok: [localhost]
2018-02-27 14:40:33,464 p=166783 u=qupeng |  TASK [local : include_vars] ************************************************************************************************************************************************
2018-02-27 14:40:33,504 p=166783 u=qupeng |  ok: [localhost]
2018-02-27 14:40:33,515 p=166783 u=qupeng |  TASK [local : detect outbound network] *************************************************************************************************************************************
2018-02-27 14:40:33,905 p=166783 u=qupeng |  ok: [localhost]
2018-02-27 14:40:33,913 p=166783 u=qupeng |  TASK [local : set outbound network fact] ***********************************************************************************************************************************
2018-02-27 14:40:33,946 p=166783 u=qupeng |  ok: [localhost]
2018-02-27 14:40:33,953 p=166783 u=qupeng |  TASK [local : fail] ********************************************************************************************************************************************************
2018-02-27 14:40:33,977 p=166783 u=qupeng |  TASK [local : detect GFW] **************************************************************************************************************************************************
2018-02-27 14:40:44,201 p=166783 u=qupeng |  ok: [localhost]
2018-02-27 14:40:44,208 p=166783 u=qupeng |  TASK [local : set GFW fact] ************************************************************************************************************************************************
2018-02-27 14:40:44,234 p=166783 u=qupeng |  ok: [localhost]
2018-02-27 14:40:44,241 p=166783 u=qupeng |  TASK [local : download tidb binary] ****************************************************************************************************************************************
2018-02-27 14:41:35,596 p=166783 u=qupeng |   [ERROR]: User interrupted execution

2018-02-27 14:44:27,813 p=185212 u=qupeng |  PLAY [do local preparation] ************************************************************************************************************************************************
2018-02-27 14:44:27,828 p=185212 u=qupeng |  TASK [local : create downloads and resources directories] ******************************************************************************************************************
2018-02-27 14:44:28,172 p=185212 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/downloads)
2018-02-27 14:44:28,302 p=185212 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources)
2018-02-27 14:44:28,492 p=185212 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources/bin)
2018-02-27 14:44:28,498 p=185212 u=qupeng |  TASK [local : create packages.yml] *****************************************************************************************************************************************
2018-02-27 14:44:29,000 p=185212 u=qupeng |  ok: [localhost]
2018-02-27 14:44:29,003 p=185212 u=qupeng |  TASK [local : create specific deployment method packages.yml] **************************************************************************************************************
2018-02-27 14:44:29,329 p=185212 u=qupeng |  ok: [localhost]
2018-02-27 14:44:29,333 p=185212 u=qupeng |  TASK [local : include_vars] ************************************************************************************************************************************************
2018-02-27 14:44:29,367 p=185212 u=qupeng |  ok: [localhost]
2018-02-27 14:44:29,370 p=185212 u=qupeng |  TASK [local : include_vars] ************************************************************************************************************************************************
2018-02-27 14:44:29,400 p=185212 u=qupeng |  ok: [localhost]
2018-02-27 14:44:29,407 p=185212 u=qupeng |  TASK [local : detect outbound network] *************************************************************************************************************************************
2018-02-27 14:44:29,775 p=185212 u=qupeng |  ok: [localhost]
2018-02-27 14:44:29,779 p=185212 u=qupeng |  TASK [local : set outbound network fact] ***********************************************************************************************************************************
2018-02-27 14:44:29,812 p=185212 u=qupeng |  ok: [localhost]
2018-02-27 14:44:29,815 p=185212 u=qupeng |  TASK [local : fail] ********************************************************************************************************************************************************
2018-02-27 14:44:29,836 p=185212 u=qupeng |  TASK [local : detect GFW] **************************************************************************************************************************************************
2018-02-27 14:44:40,041 p=185212 u=qupeng |  ok: [localhost]
2018-02-27 14:44:40,050 p=185212 u=qupeng |  TASK [local : set GFW fact] ************************************************************************************************************************************************
2018-02-27 14:44:40,088 p=185212 u=qupeng |  ok: [localhost]
2018-02-27 14:44:40,095 p=185212 u=qupeng |  TASK [local : download tidb binary] ****************************************************************************************************************************************
2018-02-27 14:45:57,772 p=185212 u=qupeng |   [ERROR]: User interrupted execution

2018-02-27 14:46:59,885 p=185617 u=qupeng |  PLAY [do local preparation] ************************************************************************************************************************************************
2018-02-27 14:46:59,901 p=185617 u=qupeng |  TASK [local : create downloads and resources directories] ******************************************************************************************************************
2018-02-27 14:47:00,244 p=185617 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/downloads)
2018-02-27 14:47:00,434 p=185617 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources)
2018-02-27 14:47:00,624 p=185617 u=qupeng |  ok: [localhost] => (item=/home/qupeng/ansible/tidb-ansible/resources/bin)
2018-02-27 14:47:00,633 p=185617 u=qupeng |  TASK [local : create packages.yml] *****************************************************************************************************************************************
2018-02-27 14:47:01,099 p=185617 u=qupeng |  ok: [localhost]
2018-02-27 14:47:01,106 p=185617 u=qupeng |  TASK [local : create specific deployment method packages.yml] **************************************************************************************************************
2018-02-27 14:47:01,452 p=185617 u=qupeng |  ok: [localhost]
2018-02-27 14:47:01,459 p=185617 u=qupeng |  TASK [local : include_vars] ************************************************************************************************************************************************
2018-02-27 14:47:01,493 p=185617 u=qupeng |  ok: [localhost]
2018-02-27 14:47:01,500 p=185617 u=qupeng |  TASK [local : include_vars] ************************************************************************************************************************************************
2018-02-27 14:47:01,539 p=185617 u=qupeng |  ok: [localhost]
2018-02-27 14:47:01,550 p=185617 u=qupeng |  TASK [local : detect outbound network] *************************************************************************************************************************************
2018-02-27 14:47:01,922 p=185617 u=qupeng |  ok: [localhost]
2018-02-27 14:47:01,929 p=185617 u=qupeng |  TASK [local : set outbound network fact] ***********************************************************************************************************************************
2018-02-27 14:47:01,963 p=185617 u=qupeng |  ok: [localhost]
2018-02-27 14:47:01,970 p=185617 u=qupeng |  TASK [local : fail] ********************************************************************************************************************************************************
2018-02-27 14:47:01,998 p=185617 u=qupeng |  TASK [local : detect GFW] **************************************************************************************************************************************************
2018-02-27 14:47:12,208 p=185617 u=qupeng |  ok: [localhost]
2018-02-27 14:47:12,215 p=185617 u=qupeng |  TASK [local : set GFW fact] ************************************************************************************************************************************************
2018-02-27 14:47:12,247 p=185617 u=qupeng |  ok: [localhost]
2018-02-27 14:47:12,254 p=185617 u=qupeng |  TASK [local : download common binary] **************************************************************************************************************************************
2018-02-27 14:47:14,013 p=185617 u=qupeng |  ok: [localhost] => (item={u'url': u'https://download.pingcap.org/fio-2.16.tar.gz', u'version': 2.16, u'name': u'fio'})
2018-02-27 14:47:14,749 p=185617 u=qupeng |  ok: [localhost] => (item={u'url': u'http://download.pingcap.org/daemontools-0.53.tar.gz', u'version': 0.53, u'name': u'daemontools'})
2018-02-27 14:47:14,761 p=185617 u=qupeng |  TASK [local : include] *****************************************************************************************************************************************************
2018-02-27 14:47:14,802 p=185617 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/local/tasks/binary_deployment.yml for localhost
2018-02-27 14:47:14,811 p=185617 u=qupeng |  TASK [local : download other binary] ***************************************************************************************************************************************
2018-02-27 14:47:14,901 p=185617 u=qupeng |  TASK [local : download other binary under gfw] *****************************************************************************************************************************
2018-02-27 14:47:30,009 p=185617 u=qupeng |  ok: [localhost] => (item={u'url': u'http://download.pingcap.org/prometheus-2.0.0.linux-amd64.tar.gz', u'version': u'2.0.0', u'name': u'prometheus'})
2018-02-27 14:47:37,544 p=185617 u=qupeng |  ok: [localhost] => (item={u'url': u'http://download.pingcap.org/alertmanager-0.9.1.linux-amd64.tar.gz', u'version': u'0.9.1', u'name': u'alertmanager'})
2018-02-27 14:47:42,274 p=185617 u=qupeng |  changed: [localhost] => (item={u'url': u'http://download.pingcap.org/node_exporter-0.15.2.linux-amd64.tar.gz', u'version': u'0.15.2', u'name': u'node_exporter'})
2018-02-27 14:47:45,291 p=185617 u=qupeng |  ok: [localhost] => (item={u'url': u'http://download.pingcap.org/pushgateway-0.4.0.linux-amd64.tar.gz', u'version': u'0.4.0', u'name': u'pushgateway'})
2018-02-27 14:48:23,337 p=185617 u=qupeng |  changed: [localhost] => (item={u'url': u'http://download.pingcap.org/grafana-4.6.3.linux-x64.tar.gz', u'version': u'4.6.3', u'name': u'grafana'})
2018-02-27 14:48:26,832 p=185617 u=qupeng |  changed: [localhost] => (item={u'url': u'https://download.pingcap.org/blackbox_exporter-0.11.0.linux-amd64.tar.gz', u'version': u'0.11.0', u'name': u'blackbox_exporter'})
2018-02-27 14:48:26,847 p=185617 u=qupeng |  TASK [local : unarchive third party binary] ********************************************************************************************************************************
2018-02-27 14:48:27,781 p=185617 u=qupeng |  changed: [localhost] => (item={u'url': u'https://github.com/prometheus/prometheus/releases/download/v2.0.0/prometheus-2.0.0.linux-amd64.tar.gz', u'version': u'2.0.0', u'name': u'prometheus'})
2018-02-27 14:48:28,291 p=185617 u=qupeng |  changed: [localhost] => (item={u'url': u'https://github.com/prometheus/alertmanager/releases/download/v0.9.1/alertmanager-0.9.1.linux-amd64.tar.gz', u'version': u'0.9.1', u'name': u'alertmanager'})
2018-02-27 14:48:28,632 p=185617 u=qupeng |  changed: [localhost] => (item={u'url': u'https://github.com/prometheus/node_exporter/releases/download/v0.15.2/node_exporter-0.15.2.linux-amd64.tar.gz', u'version': u'0.15.2', u'name': u'node_exporter'})
2018-02-27 14:48:28,951 p=185617 u=qupeng |  changed: [localhost] => (item={u'url': u'https://github.com/prometheus/blackbox_exporter/releases/download/v0.11.0/blackbox_exporter-0.11.0.linux-amd64.tar.gz', u'version': u'0.11.0', u'name': u'blackbox_exporter'})
2018-02-27 14:48:29,207 p=185617 u=qupeng |  changed: [localhost] => (item={u'url': u'https://github.com/prometheus/pushgateway/releases/download/v0.4.0/pushgateway-0.4.0.linux-amd64.tar.gz', u'version': u'0.4.0', u'name': u'pushgateway'})
2018-02-27 14:48:30,548 p=185617 u=qupeng |  changed: [localhost] => (item={u'url': u'https://s3-us-west-2.amazonaws.com/grafana-releases/release/grafana-4.6.3.linux-x64.tar.gz', u'version': u'4.6.3', u'name': u'grafana'})
2018-02-27 14:48:30,557 p=185617 u=qupeng |  TASK [local : cp monitoring binary] ****************************************************************************************************************************************
2018-02-27 14:48:30,813 p=185617 u=qupeng |  changed: [localhost] => (item=alertmanager)
2018-02-27 14:48:31,093 p=185617 u=qupeng |  changed: [localhost] => (item=prometheus)
2018-02-27 14:48:31,294 p=185617 u=qupeng |  changed: [localhost] => (item=node_exporter)
2018-02-27 14:48:31,496 p=185617 u=qupeng |  changed: [localhost] => (item=pushgateway)
2018-02-27 14:48:31,721 p=185617 u=qupeng |  changed: [localhost] => (item=blackbox_exporter)
2018-02-27 14:48:31,725 p=185617 u=qupeng |  TASK [local : unarchive common binary] *************************************************************************************************************************************
2018-02-27 14:48:32,019 p=185617 u=qupeng |  changed: [localhost] => (item={u'url': u'https://download.pingcap.org/fio-2.16.tar.gz', u'version': 2.16, u'name': u'fio'})
2018-02-27 14:48:32,232 p=185617 u=qupeng |  changed: [localhost] => (item={u'url': u'http://download.pingcap.org/daemontools-0.53.tar.gz', u'version': 0.53, u'name': u'daemontools'})
2018-02-27 14:48:32,241 p=185617 u=qupeng |  TASK [local : cp fio binary] ***********************************************************************************************************************************************
2018-02-27 14:48:33,456 p=185617 u=qupeng |  changed: [localhost] => (item=fio)
2018-02-27 14:48:33,464 p=185617 u=qupeng |  TASK [local : cp daemontools binary] ***************************************************************************************************************************************
2018-02-27 14:48:33,705 p=185617 u=qupeng |  changed: [localhost] => (item=supervise)
2018-02-27 14:48:33,890 p=185617 u=qupeng |  changed: [localhost] => (item=svstat)
2018-02-27 14:48:34,085 p=185617 u=qupeng |  changed: [localhost] => (item=svc)
2018-02-27 14:48:34,092 p=185617 u=qupeng |  TASK [local : clean up download dir] ***************************************************************************************************************************************
2018-02-27 14:48:34,386 p=185617 u=qupeng |  changed: [localhost]
2018-02-27 14:48:34,389 p=185617 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 14:48:34,389 p=185617 u=qupeng |  localhost                  : ok=18   changed=7    unreachable=0    failed=0   
2018-02-27 14:48:34,389 p=185617 u=qupeng |  Congrats! All goes well. :-)
2018-02-27 14:48:56,357 p=186431 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 14:48:56,370 p=186431 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 14:48:56,395 p=186431 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 14:48:56,421 p=186431 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 14:48:56,445 p=186431 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 14:48:56,472 p=186431 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 14:48:56,499 p=186431 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 14:48:56,560 p=186431 u=qupeng |  ok: [localhost]
2018-02-27 14:48:56,567 p=186431 u=qupeng |  PLAY [initializing deployment target] **************************************************************************************************************************************
2018-02-27 14:48:56,585 p=186431 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 14:48:56,718 p=186431 u=qupeng |  fatal: [172.16.21.1]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,719 fail [172.16.21.1]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,731 p=186431 u=qupeng |  fatal: [monitoring]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,732 fail [monitoring]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,744 p=186431 u=qupeng |  fatal: [pd]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,745 fail [pd]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,756 p=186431 u=qupeng |  fatal: [tidb]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,757 fail [tidb]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,757 p=186431 u=qupeng |  fatal: [tikv1]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,758 fail [tikv1]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,830 p=186431 u=qupeng |  fatal: [tikv2]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,830 fail [tikv2]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,850 p=186431 u=qupeng |  fatal: [tikv3]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,850 fail [tikv3]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,857 p=186431 u=qupeng |  fatal: [tikv4]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,858 fail [tikv4]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,858 p=186431 u=qupeng |  fatal: [tikv5]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,859 fail [tikv5]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}
2018-02-27 14:48:56,860 p=186431 u=qupeng |  NO MORE HOSTS LEFT *********************************************************************************************************************************************************
2018-02-27 14:48:56,861 p=186431 u=qupeng |  	to retry, use: --limit @/home/qupeng/ansible/tidb-ansible/retry_files/deploy.retry

2018-02-27 14:48:56,861 p=186431 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 14:48:56,861 p=186431 u=qupeng |  172.16.21.1                : ok=0    changed=0    unreachable=1    failed=0   
2018-02-27 14:48:56,862 p=186431 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-02-27 14:48:56,862 p=186431 u=qupeng |  monitoring                 : ok=0    changed=0    unreachable=1    failed=0   
2018-02-27 14:48:56,862 p=186431 u=qupeng |  pd                         : ok=0    changed=0    unreachable=1    failed=0   
2018-02-27 14:48:56,862 p=186431 u=qupeng |  tidb                       : ok=0    changed=0    unreachable=1    failed=0   
2018-02-27 14:48:56,862 p=186431 u=qupeng |  tikv1                      : ok=0    changed=0    unreachable=1    failed=0   
2018-02-27 14:48:56,863 p=186431 u=qupeng |  tikv2                      : ok=0    changed=0    unreachable=1    failed=0   
2018-02-27 14:48:56,863 p=186431 u=qupeng |  tikv3                      : ok=0    changed=0    unreachable=1    failed=0   
2018-02-27 14:48:56,863 p=186431 u=qupeng |  tikv4                      : ok=0    changed=0    unreachable=1    failed=0   
2018-02-27 14:48:56,863 p=186431 u=qupeng |  tikv5                      : ok=0    changed=0    unreachable=1    failed=0   
2018-02-27 14:48:56,863 p=186431 u=qupeng |  ERROR MESSAGE SUMMARY ******************************************************************************************************************************************************
2018-02-27 14:48:56,864 p=186431 u=qupeng |  [172.16.21.1]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}

2018-02-27 14:48:56,864 p=186431 u=qupeng |  [monitoring]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}

2018-02-27 14:48:56,864 p=186431 u=qupeng |  [pd]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}

2018-02-27 14:48:56,864 p=186431 u=qupeng |  [tidb]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}

2018-02-27 14:48:56,864 p=186431 u=qupeng |  [tikv1]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}

2018-02-27 14:48:56,864 p=186431 u=qupeng |  [tikv2]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}

2018-02-27 14:48:56,865 p=186431 u=qupeng |  [tikv3]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}

2018-02-27 14:48:56,865 p=186431 u=qupeng |  [tikv4]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}

2018-02-27 14:48:56,865 p=186431 u=qupeng |  [tikv5]: Ansible UNREACHABLE! => playbook: deploy.yml; TASK: check_config_dynamic : Disk space check - Fail task when disk is full; message: {"changed": false, "msg": "Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n", "unreachable": true}

2018-02-27 14:48:56,865 p=186431 u=qupeng |  Ask for help:
2018-02-27 14:48:56,865 p=186431 u=qupeng |  Contact us: sre@pingcap.com
2018-02-27 14:48:56,865 p=186431 u=qupeng |  It seems that you encounter some problems. You can send an email to the above email address, attached with the tidb-ansible/inventory.ini and tidb-ansible/log/ansible.log files and the error message, or new issue on https://github.com/pingcap/tidb-ansible/issues. We'll try our best to help you deploy a TiDB cluster. Thanks. :-)
2018-02-27 14:50:32,891 p=186573 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 14:50:32,905 p=186573 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 14:50:32,933 p=186573 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 14:50:32,957 p=186573 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 14:50:32,977 p=186573 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 14:50:33,000 p=186573 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 14:50:33,023 p=186573 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 14:50:33,089 p=186573 u=qupeng |  ok: [localhost]
2018-02-27 14:50:33,095 p=186573 u=qupeng |  PLAY [initializing deployment target] **************************************************************************************************************************************
2018-02-27 14:50:33,109 p=186573 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 14:50:33,269 p=186573 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:50:33,287 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:50:33,300 p=186573 u=qupeng |  ok: [pd]
2018-02-27 14:50:33,311 p=186573 u=qupeng |  ok: [tikv1]
2018-02-27 14:50:33,313 p=186573 u=qupeng |  ok: [tidb]
2018-02-27 14:50:33,408 p=186573 u=qupeng |  ok: [tikv3]
2018-02-27 14:50:33,416 p=186573 u=qupeng |  ok: [tikv2]
2018-02-27 14:50:33,428 p=186573 u=qupeng |  ok: [tikv4]
2018-02-27 14:50:33,437 p=186573 u=qupeng |  ok: [tikv5]
2018-02-27 14:50:33,446 p=186573 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 14:50:38,971 p=186573 u=qupeng |  ok: [pd]
2018-02-27 14:50:39,141 p=186573 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:50:39,507 p=186573 u=qupeng |  ok: [tikv1]
2018-02-27 14:50:40,199 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:50:40,472 p=186573 u=qupeng |  ok: [tidb]
2018-02-27 14:50:44,267 p=186573 u=qupeng |  ok: [tikv3]
2018-02-27 14:50:45,867 p=186573 u=qupeng |  ok: [tikv5]
2018-02-27 14:50:45,904 p=186573 u=qupeng |  ok: [tikv4]
2018-02-27 14:50:45,935 p=186573 u=qupeng |  ok: [tikv2]
2018-02-27 14:50:45,955 p=186573 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 14:50:46,849 p=186573 u=qupeng |  ok: [tikv1]
2018-02-27 14:50:46,871 p=186573 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:50:46,890 p=186573 u=qupeng |  ok: [pd]
2018-02-27 14:50:46,905 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:50:46,907 p=186573 u=qupeng |  ok: [tidb]
2018-02-27 14:50:47,573 p=186573 u=qupeng |  ok: [tikv2]
2018-02-27 14:50:47,593 p=186573 u=qupeng |  ok: [tikv3]
2018-02-27 14:50:47,602 p=186573 u=qupeng |  ok: [tikv5]
2018-02-27 14:50:47,617 p=186573 u=qupeng |  ok: [tikv4]
2018-02-27 14:50:47,625 p=186573 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 14:50:47,736 p=186573 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 14:50:47,845 p=186573 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 14:50:47,954 p=186573 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 14:50:47,997 p=186573 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:50:48,009 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:50:48,020 p=186573 u=qupeng |  ok: [pd]
2018-02-27 14:50:48,033 p=186573 u=qupeng |  ok: [tidb]
2018-02-27 14:50:48,044 p=186573 u=qupeng |  ok: [tikv1]
2018-02-27 14:50:48,048 p=186573 u=qupeng |  ok: [tikv3]
2018-02-27 14:50:48,050 p=186573 u=qupeng |  ok: [tikv2]
2018-02-27 14:50:48,067 p=186573 u=qupeng |  ok: [tikv4]
2018-02-27 14:50:48,072 p=186573 u=qupeng |  ok: [tikv5]
2018-02-27 14:50:48,079 p=186573 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 14:50:48,182 p=186573 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 14:50:48,282 p=186573 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 14:50:48,385 p=186573 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 14:50:49,117 p=186573 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:50:49,156 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:50:49,185 p=186573 u=qupeng |  ok: [tidb]
2018-02-27 14:50:49,203 p=186573 u=qupeng |  ok: [pd]
2018-02-27 14:50:49,205 p=186573 u=qupeng |  ok: [tikv1]
2018-02-27 14:50:49,814 p=186573 u=qupeng |  ok: [tikv2]
2018-02-27 14:50:49,874 p=186573 u=qupeng |  ok: [tikv3]
2018-02-27 14:50:49,914 p=186573 u=qupeng |  ok: [tikv5]
2018-02-27 14:50:49,945 p=186573 u=qupeng |  ok: [tikv4]
2018-02-27 14:50:49,960 p=186573 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 14:50:50,756 p=186573 u=qupeng |  ok: [pd]
2018-02-27 14:50:50,783 p=186573 u=qupeng |  ok: [tidb]
2018-02-27 14:50:50,802 p=186573 u=qupeng |  ok: [tikv1]
2018-02-27 14:50:50,816 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:50:50,818 p=186573 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:50:51,464 p=186573 u=qupeng |  ok: [tikv2]
2018-02-27 14:50:51,516 p=186573 u=qupeng |  ok: [tikv3]
2018-02-27 14:50:51,520 p=186573 u=qupeng |  ok: [tikv5]
2018-02-27 14:50:51,545 p=186573 u=qupeng |  ok: [tikv4]
2018-02-27 14:50:51,557 p=186573 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 14:50:51,671 p=186573 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 14:50:51,775 p=186573 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 14:50:52,600 p=186573 u=qupeng |  ok: [tikv1]
2018-02-27 14:50:52,622 p=186573 u=qupeng |  ok: [pd]
2018-02-27 14:50:52,638 p=186573 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:50:52,653 p=186573 u=qupeng |  ok: [tidb]
2018-02-27 14:50:52,654 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:50:53,267 p=186573 u=qupeng |  ok: [tikv2]
2018-02-27 14:50:53,275 p=186573 u=qupeng |  ok: [tikv5]
2018-02-27 14:50:53,283 p=186573 u=qupeng |  ok: [tikv3]
2018-02-27 14:50:53,291 p=186573 u=qupeng |  ok: [tikv4]
2018-02-27 14:50:53,305 p=186573 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 14:50:53,457 p=186573 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 14:50:53,637 p=186573 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 14:50:54,298 p=186573 u=qupeng |  ok: [tidb]
2018-02-27 14:50:54,318 p=186573 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:50:54,337 p=186573 u=qupeng |  ok: [tikv1]
2018-02-27 14:50:54,353 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:50:54,354 p=186573 u=qupeng |  ok: [pd]
2018-02-27 14:50:54,869 p=186573 u=qupeng |  ok: [tikv2]
2018-02-27 14:50:54,949 p=186573 u=qupeng |  ok: [tikv4]
2018-02-27 14:50:54,950 p=186573 u=qupeng |  ok: [tikv5]
2018-02-27 14:50:54,971 p=186573 u=qupeng |  ok: [tikv3]
2018-02-27 14:50:54,980 p=186573 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 14:50:55,090 p=186573 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-02-27 14:50:55,123 p=186573 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:50:55,138 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:50:55,162 p=186573 u=qupeng |  ok: [pd]
2018-02-27 14:50:55,175 p=186573 u=qupeng |  ok: [tidb]
2018-02-27 14:50:55,188 p=186573 u=qupeng |  ok: [tikv1]
2018-02-27 14:50:55,189 p=186573 u=qupeng |  ok: [tikv2]
2018-02-27 14:50:55,189 p=186573 u=qupeng |  ok: [tikv3]
2018-02-27 14:50:55,203 p=186573 u=qupeng |  ok: [tikv4]
2018-02-27 14:50:55,215 p=186573 u=qupeng |  ok: [tikv5]
2018-02-27 14:50:55,223 p=186573 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 14:50:55,340 p=186573 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 14:50:55,461 p=186573 u=qupeng |  PLAY [deploying monitoring agent] ******************************************************************************************************************************************
2018-02-27 14:50:55,471 p=186573 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:50:56,308 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 14:50:57,009 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 14:50:57,741 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 14:50:57,755 p=186573 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:50:57,801 p=186573 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:50:58,512 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 14:50:58,527 p=186573 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:50:58,568 p=186573 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-02-27 14:50:58,615 p=186573 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/binary_deployment.yml for 172.16.21.1
2018-02-27 14:50:58,629 p=186573 u=qupeng |  TASK [node_exporter : create deploy directories] ***************************************************************************************************************************
2018-02-27 14:50:59,355 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:50:59,363 p=186573 u=qupeng |  TASK [node_exporter : deploy node_exporter binary] *************************************************************************************************************************
2018-02-27 14:51:01,835 p=186573 u=qupeng |  changed: [172.16.21.1]
2018-02-27 14:51:01,848 p=186573 u=qupeng |  TASK [node_exporter : create run script] ***********************************************************************************************************************************
2018-02-27 14:51:03,249 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=run)
2018-02-27 14:51:03,262 p=186573 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-02-27 14:51:03,305 p=186573 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/supervise_deployment.yml for 172.16.21.1
2018-02-27 14:51:03,317 p=186573 u=qupeng |  TASK [node_exporter : deploy supervise] ************************************************************************************************************************************
2018-02-27 14:51:03,863 p=186573 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:51:04,617 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/node_exporter)
2018-02-27 14:51:04,634 p=186573 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:51:06,030 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=supervise)
2018-02-27 14:51:07,447 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=svc)
2018-02-27 14:51:08,838 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=svstat)
2018-02-27 14:51:08,858 p=186573 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:51:10,293 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=start)
2018-02-27 14:51:11,696 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=stop)
2018-02-27 14:51:11,712 p=186573 u=qupeng |  TASK [node_exporter : prepare firewalld white list] ************************************************************************************************************************
2018-02-27 14:51:11,763 p=186573 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:51:11,778 p=186573 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-02-27 14:51:11,832 p=186573 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/binary_deployment.yml for 172.16.21.1
2018-02-27 14:51:11,845 p=186573 u=qupeng |  TASK [blackbox_exporter : create deploy directories] ***********************************************************************************************************************
2018-02-27 14:51:12,602 p=186573 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:51:12,617 p=186573 u=qupeng |  TASK [blackbox_exporter : deploy blackbox_exporter binary] *****************************************************************************************************************
2018-02-27 14:51:14,933 p=186573 u=qupeng |  changed: [172.16.21.1]
2018-02-27 14:51:14,946 p=186573 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-02-27 14:51:14,989 p=186573 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-02-27 14:51:15,942 p=186573 u=qupeng |  changed: [172.16.21.1]
2018-02-27 14:51:15,956 p=186573 u=qupeng |  TASK [blackbox_exporter : create run script] *******************************************************************************************************************************
2018-02-27 14:51:17,423 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=run)
2018-02-27 14:51:17,437 p=186573 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-02-27 14:51:17,489 p=186573 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/supervise_deployment.yml for 172.16.21.1
2018-02-27 14:51:17,505 p=186573 u=qupeng |  TASK [blackbox_exporter : deploy supervise] ********************************************************************************************************************************
2018-02-27 14:51:18,026 p=186573 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:51:18,826 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/blackbox_exporter)
2018-02-27 14:51:18,842 p=186573 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:51:20,367 p=186573 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-02-27 14:51:21,810 p=186573 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-02-27 14:51:23,230 p=186573 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-02-27 14:51:23,238 p=186573 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:51:24,702 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=start)
2018-02-27 14:51:26,107 p=186573 u=qupeng |  changed: [172.16.21.1] => (item=stop)
2018-02-27 14:51:26,119 p=186573 u=qupeng |  TASK [blackbox_exporter : create config file] ******************************************************************************************************************************
2018-02-27 14:51:27,529 p=186573 u=qupeng |  changed: [172.16.21.1]
2018-02-27 14:51:27,542 p=186573 u=qupeng |  TASK [blackbox_exporter : backup conf file] ********************************************************************************************************************************
2018-02-27 14:51:27,585 p=186573 u=qupeng |  TASK [blackbox_exporter : prepare firewalld white list] ********************************************************************************************************************
2018-02-27 14:51:27,637 p=186573 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:51:27,647 p=186573 u=qupeng |  PLAY [deploying monitoring server] *****************************************************************************************************************************************
2018-02-27 14:51:27,668 p=186573 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:51:28,395 p=186573 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 14:51:29,114 p=186573 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 14:51:29,816 p=186573 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 14:51:29,824 p=186573 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:51:29,863 p=186573 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:51:30,592 p=186573 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 14:51:30,600 p=186573 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:51:30,638 p=186573 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-02-27 14:51:30,669 p=186573 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/binary_deployment.yml for monitoring
2018-02-27 14:51:30,676 p=186573 u=qupeng |  TASK [pushgateway : create deploy directories] *****************************************************************************************************************************
2018-02-27 14:51:31,391 p=186573 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:51:31,402 p=186573 u=qupeng |  TASK [pushgateway : deploy pushgateway binary] *****************************************************************************************************************************
2018-02-27 14:51:32,987 p=186573 u=qupeng |  changed: [monitoring]
2018-02-27 14:51:32,998 p=186573 u=qupeng |  TASK [pushgateway : create run script] *************************************************************************************************************************************
2018-02-27 14:51:34,452 p=186573 u=qupeng |  changed: [monitoring] => (item=run)
2018-02-27 14:51:34,467 p=186573 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-02-27 14:51:34,511 p=186573 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/supervise_deployment.yml for monitoring
2018-02-27 14:51:34,525 p=186573 u=qupeng |  TASK [pushgateway : deploy supervise] **************************************************************************************************************************************
2018-02-27 14:51:35,082 p=186573 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:51:35,849 p=186573 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/pushgateway)
2018-02-27 14:51:35,864 p=186573 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:51:37,354 p=186573 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-02-27 14:51:38,739 p=186573 u=qupeng |  ok: [monitoring] => (item=svc)
2018-02-27 14:51:40,229 p=186573 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-02-27 14:51:40,244 p=186573 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:51:41,693 p=186573 u=qupeng |  changed: [monitoring] => (item=start)
2018-02-27 14:51:43,105 p=186573 u=qupeng |  changed: [monitoring] => (item=stop)
2018-02-27 14:51:43,114 p=186573 u=qupeng |  TASK [pushgateway : prepare firewalld white list] **************************************************************************************************************************
2018-02-27 14:51:43,168 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:51:43,175 p=186573 u=qupeng |  TASK [prometheus : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:51:43,889 p=186573 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:51:44,575 p=186573 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-02-27 14:51:45,289 p=186573 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-02-27 14:51:45,305 p=186573 u=qupeng |  TASK [prometheus : get config file stat] ***********************************************************************************************************************************
2018-02-27 14:51:46,028 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:51:46,040 p=186573 u=qupeng |  TASK [prometheus : get alert conf stat] ************************************************************************************************************************************
2018-02-27 14:51:46,771 p=186573 u=qupeng |  ok: [monitoring]
2018-02-27 14:51:46,787 p=186573 u=qupeng |  TASK [prometheus : create configuration file if not exist] *****************************************************************************************************************
2018-02-27 14:51:48,607 p=186573 u=qupeng |  changed: [monitoring]
2018-02-27 14:51:48,620 p=186573 u=qupeng |  TASK [prometheus : copy alert rules file] **********************************************************************************************************************************
2018-02-27 14:51:48,698 p=186573 u=qupeng |   [ERROR]: User interrupted execution

2018-02-27 14:52:37,700 p=192762 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 14:52:37,723 p=192762 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 14:52:37,755 p=192762 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 14:52:37,781 p=192762 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 14:52:37,801 p=192762 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 14:52:37,824 p=192762 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 14:52:37,846 p=192762 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 14:52:37,925 p=192762 u=qupeng |  ok: [localhost]
2018-02-27 14:52:37,934 p=192762 u=qupeng |  PLAY [initializing deployment target] **************************************************************************************************************************************
2018-02-27 14:52:37,960 p=192762 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 14:52:38,125 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:52:38,147 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:52:38,172 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:52:38,188 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:52:38,189 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:52:38,256 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:52:38,283 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:52:38,315 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:52:38,316 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:52:38,326 p=192762 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 14:52:44,279 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:52:44,365 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:52:44,421 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:52:44,502 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:52:45,113 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:52:49,765 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:52:50,093 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:52:51,142 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:52:51,177 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:52:51,195 p=192762 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 14:52:52,128 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:52:52,149 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:52:52,167 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:52:52,185 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:52:52,187 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:52:52,873 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:52:52,934 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:52:52,936 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:52:52,942 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:52:52,950 p=192762 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 14:52:53,060 p=192762 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 14:52:53,168 p=192762 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 14:52:53,267 p=192762 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 14:52:53,310 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:52:53,322 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:52:53,335 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:52:53,361 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:52:53,362 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:52:53,362 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:52:53,369 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:52:53,383 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:52:53,392 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:52:53,400 p=192762 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 14:52:53,510 p=192762 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 14:52:53,622 p=192762 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 14:52:53,728 p=192762 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 14:52:54,517 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:52:54,542 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:52:54,560 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:52:54,577 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:52:54,579 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:52:55,274 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:52:55,302 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:52:55,315 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:52:55,329 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:52:55,340 p=192762 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 14:52:56,103 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:52:56,126 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:52:56,140 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:52:56,155 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:52:56,156 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:52:56,794 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:52:56,861 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:52:56,875 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:52:56,884 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:52:56,892 p=192762 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 14:52:57,005 p=192762 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 14:52:57,109 p=192762 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 14:52:57,900 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:52:57,915 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:52:57,927 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:52:58,127 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:52:58,164 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:52:58,553 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:52:58,562 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:52:58,577 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:52:58,755 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:52:58,768 p=192762 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 14:52:58,896 p=192762 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 14:52:59,004 p=192762 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 14:52:59,656 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:52:59,667 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:52:59,680 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:52:59,855 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:52:59,890 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:53:00,275 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:53:00,306 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:53:00,320 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:53:00,516 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:53:00,524 p=192762 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 14:53:01,509 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:53:01,512 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:53:01,520 p=192762 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-02-27 14:53:01,566 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:53:01,579 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:53:01,592 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:53:01,604 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:53:01,626 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:53:01,628 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:53:01,629 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:53:01,631 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:53:01,658 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:53:01,672 p=192762 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 14:53:01,739 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:53:01,767 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:53:01,812 p=192762 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 14:53:01,856 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:53:01,880 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:53:01,924 p=192762 u=qupeng |  PLAY [deploying monitoring agent] ******************************************************************************************************************************************
2018-02-27 14:53:01,934 p=192762 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:53:02,801 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 14:53:03,516 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 14:53:04,212 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 14:53:04,227 p=192762 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:53:04,267 p=192762 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:53:04,987 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 14:53:05,001 p=192762 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:53:05,048 p=192762 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-02-27 14:53:05,098 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/binary_deployment.yml for 172.16.21.1
2018-02-27 14:53:05,112 p=192762 u=qupeng |  TASK [node_exporter : create deploy directories] ***************************************************************************************************************************
2018-02-27 14:53:05,840 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:53:05,856 p=192762 u=qupeng |  TASK [node_exporter : deploy node_exporter binary] *************************************************************************************************************************
2018-02-27 14:53:08,060 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:53:08,073 p=192762 u=qupeng |  TASK [node_exporter : create run script] ***********************************************************************************************************************************
2018-02-27 14:53:09,497 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=run)
2018-02-27 14:53:09,510 p=192762 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-02-27 14:53:09,554 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/supervise_deployment.yml for 172.16.21.1
2018-02-27 14:53:09,567 p=192762 u=qupeng |  TASK [node_exporter : deploy supervise] ************************************************************************************************************************************
2018-02-27 14:53:10,135 p=192762 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:53:10,907 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/node_exporter)
2018-02-27 14:53:10,922 p=192762 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:53:12,411 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-02-27 14:53:13,830 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-02-27 14:53:15,279 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-02-27 14:53:15,293 p=192762 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:53:16,765 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=start)
2018-02-27 14:53:18,222 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=stop)
2018-02-27 14:53:18,237 p=192762 u=qupeng |  TASK [node_exporter : prepare firewalld white list] ************************************************************************************************************************
2018-02-27 14:53:18,290 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:53:18,306 p=192762 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-02-27 14:53:18,363 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/binary_deployment.yml for 172.16.21.1
2018-02-27 14:53:18,375 p=192762 u=qupeng |  TASK [blackbox_exporter : create deploy directories] ***********************************************************************************************************************
2018-02-27 14:53:19,180 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:53:19,194 p=192762 u=qupeng |  TASK [blackbox_exporter : deploy blackbox_exporter binary] *****************************************************************************************************************
2018-02-27 14:53:21,410 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:53:21,417 p=192762 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-02-27 14:53:21,443 p=192762 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-02-27 14:53:22,322 p=192762 u=qupeng |  changed: [172.16.21.1]
2018-02-27 14:53:22,336 p=192762 u=qupeng |  TASK [blackbox_exporter : create run script] *******************************************************************************************************************************
2018-02-27 14:53:23,851 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=run)
2018-02-27 14:53:23,866 p=192762 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-02-27 14:53:23,919 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/supervise_deployment.yml for 172.16.21.1
2018-02-27 14:53:23,934 p=192762 u=qupeng |  TASK [blackbox_exporter : deploy supervise] ********************************************************************************************************************************
2018-02-27 14:53:24,461 p=192762 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:53:25,272 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/blackbox_exporter)
2018-02-27 14:53:25,284 p=192762 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:53:26,767 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-02-27 14:53:28,173 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-02-27 14:53:29,598 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-02-27 14:53:29,615 p=192762 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:53:31,119 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=start)
2018-02-27 14:53:32,569 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=stop)
2018-02-27 14:53:32,584 p=192762 u=qupeng |  TASK [blackbox_exporter : create config file] ******************************************************************************************************************************
2018-02-27 14:53:34,063 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:53:34,076 p=192762 u=qupeng |  TASK [blackbox_exporter : backup conf file] ********************************************************************************************************************************
2018-02-27 14:53:34,122 p=192762 u=qupeng |  TASK [blackbox_exporter : prepare firewalld white list] ********************************************************************************************************************
2018-02-27 14:53:34,176 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:53:34,186 p=192762 u=qupeng |  PLAY [deploying monitoring server] *****************************************************************************************************************************************
2018-02-27 14:53:34,204 p=192762 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:53:34,935 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 14:53:35,652 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 14:53:36,377 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 14:53:36,390 p=192762 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:53:36,428 p=192762 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:53:37,151 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 14:53:37,165 p=192762 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:53:37,203 p=192762 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-02-27 14:53:37,245 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/binary_deployment.yml for monitoring
2018-02-27 14:53:37,257 p=192762 u=qupeng |  TASK [pushgateway : create deploy directories] *****************************************************************************************************************************
2018-02-27 14:53:38,010 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:53:38,025 p=192762 u=qupeng |  TASK [pushgateway : deploy pushgateway binary] *****************************************************************************************************************************
2018-02-27 14:53:39,507 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:53:39,518 p=192762 u=qupeng |  TASK [pushgateway : create run script] *************************************************************************************************************************************
2018-02-27 14:53:40,987 p=192762 u=qupeng |  ok: [monitoring] => (item=run)
2018-02-27 14:53:41,000 p=192762 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-02-27 14:53:41,039 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/supervise_deployment.yml for monitoring
2018-02-27 14:53:41,050 p=192762 u=qupeng |  TASK [pushgateway : deploy supervise] **************************************************************************************************************************************
2018-02-27 14:53:41,605 p=192762 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:53:42,387 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/pushgateway)
2018-02-27 14:53:42,399 p=192762 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:53:43,817 p=192762 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-02-27 14:53:45,258 p=192762 u=qupeng |  ok: [monitoring] => (item=svc)
2018-02-27 14:53:46,669 p=192762 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-02-27 14:53:46,684 p=192762 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:53:48,150 p=192762 u=qupeng |  ok: [monitoring] => (item=start)
2018-02-27 14:53:49,554 p=192762 u=qupeng |  ok: [monitoring] => (item=stop)
2018-02-27 14:53:49,569 p=192762 u=qupeng |  TASK [pushgateway : prepare firewalld white list] **************************************************************************************************************************
2018-02-27 14:53:49,625 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:53:49,641 p=192762 u=qupeng |  TASK [prometheus : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:53:50,377 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:53:51,067 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-02-27 14:53:51,776 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-02-27 14:53:51,792 p=192762 u=qupeng |  TASK [prometheus : get config file stat] ***********************************************************************************************************************************
2018-02-27 14:53:52,754 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:53:52,763 p=192762 u=qupeng |  TASK [prometheus : get alert conf stat] ************************************************************************************************************************************
2018-02-27 14:53:53,499 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:53:53,512 p=192762 u=qupeng |  TASK [prometheus : create configuration file if not exist] *****************************************************************************************************************
2018-02-27 14:53:55,235 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:53:55,249 p=192762 u=qupeng |  TASK [prometheus : copy alert rules file] **********************************************************************************************************************************
2018-02-27 14:53:56,880 p=192762 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-02-27 14:53:58,289 p=192762 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-02-27 14:53:59,651 p=192762 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-02-27 14:54:01,045 p=192762 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-02-27 14:54:02,417 p=192762 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-02-27 14:54:03,785 p=192762 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-02-27 14:54:05,139 p=192762 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-02-27 14:54:05,154 p=192762 u=qupeng |  TASK [prometheus : set alert rules label changes] **************************************************************************************************************************
2018-02-27 14:54:05,975 p=192762 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-02-27 14:54:06,681 p=192762 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-02-27 14:54:07,350 p=192762 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-02-27 14:54:08,069 p=192762 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-02-27 14:54:08,767 p=192762 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-02-27 14:54:09,471 p=192762 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-02-27 14:54:10,184 p=192762 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-02-27 14:54:10,201 p=192762 u=qupeng |  TASK [prometheus : create deploy data directory] ***************************************************************************************************************************
2018-02-27 14:54:10,949 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-02-27 14:54:10,961 p=192762 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-02-27 14:54:11,006 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/binary_deployment.yml for monitoring
2018-02-27 14:54:11,018 p=192762 u=qupeng |  TASK [prometheus : create deploy log directory] ****************************************************************************************************************************
2018-02-27 14:54:11,736 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:54:11,749 p=192762 u=qupeng |  TASK [prometheus : deploy prometheus binary] *******************************************************************************************************************************
2018-02-27 14:54:13,876 p=192762 u=qupeng |  changed: [monitoring]
2018-02-27 14:54:13,890 p=192762 u=qupeng |  TASK [prometheus : create run script] **************************************************************************************************************************************
2018-02-27 14:54:15,274 p=192762 u=qupeng |  changed: [monitoring] => (item=run)
2018-02-27 14:54:15,288 p=192762 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-02-27 14:54:15,333 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/supervise_deployment.yml for monitoring
2018-02-27 14:54:15,346 p=192762 u=qupeng |  TASK [prometheus : deploy supervise] ***************************************************************************************************************************************
2018-02-27 14:54:15,953 p=192762 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:54:16,718 p=192762 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-02-27 14:54:16,732 p=192762 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:54:18,198 p=192762 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-02-27 14:54:19,640 p=192762 u=qupeng |  ok: [monitoring] => (item=svc)
2018-02-27 14:54:21,018 p=192762 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-02-27 14:54:21,032 p=192762 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:54:22,460 p=192762 u=qupeng |  changed: [monitoring] => (item=start)
2018-02-27 14:54:23,830 p=192762 u=qupeng |  changed: [monitoring] => (item=stop)
2018-02-27 14:54:23,840 p=192762 u=qupeng |  TASK [prometheus : prepare firewalld white list] ***************************************************************************************************************************
2018-02-27 14:54:23,899 p=192762 u=qupeng |  ok: [monitoring]
2018-02-27 14:54:23,904 p=192762 u=qupeng |  PLAY [deploying grafana] ***************************************************************************************************************************************************
2018-02-27 14:54:23,914 p=192762 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:54:24,631 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 14:54:25,422 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 14:54:26,119 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 14:54:26,133 p=192762 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:54:26,168 p=192762 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:54:26,962 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 14:54:26,976 p=192762 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:54:27,030 p=192762 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 14:54:27,086 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/tasks.yml for 172.16.21.1
2018-02-27 14:54:27,099 p=192762 u=qupeng |  TASK [grafana : create common deploy directories] **************************************************************************************************************************
2018-02-27 14:54:27,893 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:54:28,586 p=192762 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/data.grafana)
2018-02-27 14:54:28,599 p=192762 u=qupeng |  TASK [grafana : push data source file] *************************************************************************************************************************************
2018-02-27 14:54:30,018 p=192762 u=qupeng |  changed: [172.16.21.1]
2018-02-27 14:54:30,033 p=192762 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 14:54:30,088 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/binary_deployment.yml for 172.16.21.1
2018-02-27 14:54:30,101 p=192762 u=qupeng |  TASK [grafana : create binary deploy directories (1/2)] ********************************************************************************************************************
2018-02-27 14:54:30,842 p=192762 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt)
2018-02-27 14:54:30,857 p=192762 u=qupeng |  TASK [grafana : deploy grafana binary] *************************************************************************************************************************************
2018-02-27 14:54:38,109 p=192762 u=qupeng |  changed: [172.16.21.1]
2018-02-27 14:54:38,123 p=192762 u=qupeng |  TASK [grafana : rename grafana deploy dir] *********************************************************************************************************************************
2018-02-27 14:54:38,981 p=192762 u=qupeng |  changed: [172.16.21.1]
2018-02-27 14:54:38,995 p=192762 u=qupeng |  TASK [grafana : create binary deploy directories (2/2)] ********************************************************************************************************************
2018-02-27 14:54:39,739 p=192762 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/dashboards)
2018-02-27 14:54:40,450 p=192762 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/plugins)
2018-02-27 14:54:40,463 p=192762 u=qupeng |  TASK [grafana : create grafana configuration file] *************************************************************************************************************************
2018-02-27 14:54:41,849 p=192762 u=qupeng |  changed: [172.16.21.1]
2018-02-27 14:54:41,864 p=192762 u=qupeng |  TASK [grafana : create run script] *****************************************************************************************************************************************
2018-02-27 14:54:43,242 p=192762 u=qupeng |  changed: [172.16.21.1] => (item=run)
2018-02-27 14:54:43,252 p=192762 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 14:54:43,285 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/supervise_deployment.yml for 172.16.21.1
2018-02-27 14:54:43,294 p=192762 u=qupeng |  TASK [grafana : deploy supervise] ******************************************************************************************************************************************
2018-02-27 14:54:43,848 p=192762 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:54:44,585 p=192762 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/grafana)
2018-02-27 14:54:44,598 p=192762 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:54:46,069 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-02-27 14:54:47,436 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-02-27 14:54:48,875 p=192762 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-02-27 14:54:48,892 p=192762 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:54:50,273 p=192762 u=qupeng |  changed: [172.16.21.1] => (item=start)
2018-02-27 14:54:51,663 p=192762 u=qupeng |  changed: [172.16.21.1] => (item=stop)
2018-02-27 14:54:51,678 p=192762 u=qupeng |  TASK [grafana : prepare firewalld white list] ******************************************************************************************************************************
2018-02-27 14:54:51,736 p=192762 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:54:51,745 p=192762 u=qupeng |  PLAY [deploying PD cluster] ************************************************************************************************************************************************
2018-02-27 14:54:51,763 p=192762 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:54:52,472 p=192762 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-02-27 14:54:53,274 p=192762 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-02-27 14:54:53,993 p=192762 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-02-27 14:54:54,009 p=192762 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:54:54,057 p=192762 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:54:54,879 p=192762 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-02-27 14:54:54,894 p=192762 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:54:54,938 p=192762 u=qupeng |  TASK [pd : create deploy directories] **************************************************************************************************************************************
2018-02-27 14:54:55,764 p=192762 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-02-27 14:54:56,492 p=192762 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-02-27 14:54:57,189 p=192762 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/data.pd)
2018-02-27 14:54:57,205 p=192762 u=qupeng |  TASK [pd : load customized config] *****************************************************************************************************************************************
2018-02-27 14:54:57,260 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:54:57,273 p=192762 u=qupeng |  TASK [pd : load default config] ********************************************************************************************************************************************
2018-02-27 14:54:57,329 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:54:57,343 p=192762 u=qupeng |  TASK [pd : generate metrics config] ****************************************************************************************************************************************
2018-02-27 14:54:57,426 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:54:57,440 p=192762 u=qupeng |  TASK [pd : generate final config] ******************************************************************************************************************************************
2018-02-27 14:54:57,474 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:54:57,486 p=192762 u=qupeng |  TASK [pd : debug] **********************************************************************************************************************************************************
2018-02-27 14:54:57,520 p=192762 u=qupeng |  ok: [pd] => {
    "pd_conf": {
        "global": {
            "lease": 3, 
            "tso-save-interval": "3s"
        }, 
        "log": {
            "file": {}, 
            "level": "info"
        }, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s"
        }, 
        "replication": {
            "location-labels": [], 
            "max-replicas": 3
        }, 
        "schedule": {
            "leader-schedule-limit": 64, 
            "max-pending-peer-count": 16, 
            "max-snapshot-count": 3, 
            "max-store-down-time": "1h", 
            "region-schedule-limit": 16, 
            "replica-schedule-limit": 24, 
            "tolerant-size-ratio": 2.5
        }, 
        "security": {
            "cacert-path": "", 
            "cert-path": "", 
            "key-path": ""
        }
    }
}
2018-02-27 14:54:57,531 p=192762 u=qupeng |  TASK [pd : create configuration file] **************************************************************************************************************************************
2018-02-27 14:54:58,922 p=192762 u=qupeng |  changed: [pd]
2018-02-27 14:54:58,935 p=192762 u=qupeng |  TASK [pd : backup conf file] ***********************************************************************************************************************************************
2018-02-27 14:54:58,972 p=192762 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-02-27 14:54:59,021 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-02-27 14:54:59,035 p=192762 u=qupeng |  TASK [pd : deploy binary] **************************************************************************************************************************************************
2018-02-27 14:55:00,831 p=192762 u=qupeng |  changed: [pd]
2018-02-27 14:55:00,843 p=192762 u=qupeng |  TASK [pd : backup bianry file] *********************************************************************************************************************************************
2018-02-27 14:55:00,883 p=192762 u=qupeng |  TASK [pd : create startup script] ******************************************************************************************************************************************
2018-02-27 14:55:02,343 p=192762 u=qupeng |  changed: [pd] => (item=run)
2018-02-27 14:55:02,354 p=192762 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-02-27 14:55:02,390 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-02-27 14:55:02,401 p=192762 u=qupeng |  TASK [pd : deploy supervise] ***********************************************************************************************************************************************
2018-02-27 14:55:02,998 p=192762 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:55:03,772 p=192762 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/pd)
2018-02-27 14:55:03,787 p=192762 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:55:05,204 p=192762 u=qupeng |  changed: [pd] => (item=supervise)
2018-02-27 14:55:06,640 p=192762 u=qupeng |  changed: [pd] => (item=svc)
2018-02-27 14:55:08,037 p=192762 u=qupeng |  changed: [pd] => (item=svstat)
2018-02-27 14:55:08,047 p=192762 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:55:09,452 p=192762 u=qupeng |  changed: [pd] => (item=start)
2018-02-27 14:55:10,869 p=192762 u=qupeng |  changed: [pd] => (item=stop)
2018-02-27 14:55:10,888 p=192762 u=qupeng |  TASK [pd : prepare firewalld white list] ***********************************************************************************************************************************
2018-02-27 14:55:10,960 p=192762 u=qupeng |  ok: [pd]
2018-02-27 14:55:10,967 p=192762 u=qupeng |  PLAY [deploying TiKV cluster] **********************************************************************************************************************************************
2018-02-27 14:55:10,983 p=192762 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:55:11,669 p=192762 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/scripts)
2018-02-27 14:55:11,685 p=192762 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/scripts)
2018-02-27 14:55:11,685 p=192762 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/scripts)
2018-02-27 14:55:11,688 p=192762 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/scripts)
2018-02-27 14:55:11,693 p=192762 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/scripts)
2018-02-27 14:55:12,354 p=192762 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-02-27 14:55:12,357 p=192762 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-02-27 14:55:12,368 p=192762 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-02-27 14:55:12,381 p=192762 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-02-27 14:55:12,382 p=192762 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-02-27 14:55:13,009 p=192762 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/backup)
2018-02-27 14:55:13,020 p=192762 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/backup)
2018-02-27 14:55:13,032 p=192762 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/backup)
2018-02-27 14:55:13,037 p=192762 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/backup)
2018-02-27 14:55:13,040 p=192762 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/backup)
2018-02-27 14:55:13,054 p=192762 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:55:13,690 p=192762 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status)
2018-02-27 14:55:13,747 p=192762 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status)
2018-02-27 14:55:13,759 p=192762 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status)
2018-02-27 14:55:13,771 p=192762 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status)
2018-02-27 14:55:13,776 p=192762 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status)
2018-02-27 14:55:13,790 p=192762 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:55:14,498 p=192762 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/bin)
2018-02-27 14:55:14,501 p=192762 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/bin)
2018-02-27 14:55:14,504 p=192762 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/bin)
2018-02-27 14:55:14,506 p=192762 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/bin)
2018-02-27 14:55:14,534 p=192762 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/bin)
2018-02-27 14:55:14,548 p=192762 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:55:14,656 p=192762 u=qupeng |  TASK [tikv : create deploy directories] ************************************************************************************************************************************
2018-02-27 14:55:15,288 p=192762 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/log)
2018-02-27 14:55:15,319 p=192762 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/log)
2018-02-27 14:55:15,342 p=192762 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/log)
2018-02-27 14:55:15,360 p=192762 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/log)
2018-02-27 14:55:15,368 p=192762 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/log)
2018-02-27 14:55:15,890 p=192762 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/data)
2018-02-27 14:55:15,958 p=192762 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/data)
2018-02-27 14:55:15,960 p=192762 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/data)
2018-02-27 14:55:15,968 p=192762 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/data)
2018-02-27 14:55:15,988 p=192762 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/data)
2018-02-27 14:55:16,494 p=192762 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-02-27 14:55:16,594 p=192762 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-02-27 14:55:16,612 p=192762 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-02-27 14:55:16,615 p=192762 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-02-27 14:55:16,618 p=192762 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-02-27 14:55:16,627 p=192762 u=qupeng |  TASK [tikv : load customized config] ***************************************************************************************************************************************
2018-02-27 14:55:16,684 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:55:16,686 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:55:16,697 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:55:16,723 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:55:16,726 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:55:16,733 p=192762 u=qupeng |  TASK [tikv : load default config] ******************************************************************************************************************************************
2018-02-27 14:55:16,789 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:55:16,792 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:55:16,796 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:55:16,815 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:55:16,826 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:55:16,833 p=192762 u=qupeng |  TASK [tikv : generate metrics config] **************************************************************************************************************************************
2018-02-27 14:55:16,910 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:55:16,912 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:55:16,936 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:55:16,969 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:55:16,980 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:55:16,988 p=192762 u=qupeng |  TASK [tikv : generate final config] ****************************************************************************************************************************************
2018-02-27 14:55:17,045 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:55:17,055 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:55:17,064 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:55:17,071 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:55:17,094 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:55:17,101 p=192762 u=qupeng |  TASK [tikv : debug] ********************************************************************************************************************************************************
2018-02-27 14:55:17,152 p=192762 u=qupeng |  ok: [tikv1] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 14:55:17,160 p=192762 u=qupeng |  ok: [tikv2] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 14:55:17,180 p=192762 u=qupeng |  ok: [tikv3] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 14:55:17,184 p=192762 u=qupeng |  ok: [tikv5] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 14:55:17,192 p=192762 u=qupeng |  ok: [tikv4] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 14:55:17,199 p=192762 u=qupeng |  TASK [tikv : create config file] *******************************************************************************************************************************************
2018-02-27 14:55:18,521 p=192762 u=qupeng |  changed: [tikv5]
2018-02-27 14:55:18,524 p=192762 u=qupeng |  changed: [tikv4]
2018-02-27 14:55:18,526 p=192762 u=qupeng |  changed: [tikv2]
2018-02-27 14:55:18,528 p=192762 u=qupeng |  changed: [tikv1]
2018-02-27 14:55:18,529 p=192762 u=qupeng |  changed: [tikv3]
2018-02-27 14:55:18,537 p=192762 u=qupeng |  TASK [tikv : backup conf file] *********************************************************************************************************************************************
2018-02-27 14:55:18,609 p=192762 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-02-27 14:55:18,707 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/binary_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-02-27 14:55:18,719 p=192762 u=qupeng |  TASK [tikv : deploy binary] ************************************************************************************************************************************************
2018-02-27 14:55:22,472 p=192762 u=qupeng |  changed: [tikv4]
2018-02-27 14:55:22,515 p=192762 u=qupeng |  changed: [tikv3]
2018-02-27 14:55:22,524 p=192762 u=qupeng |  changed: [tikv2]
2018-02-27 14:55:22,679 p=192762 u=qupeng |  changed: [tikv5]
2018-02-27 14:55:22,681 p=192762 u=qupeng |  changed: [tikv1]
2018-02-27 14:55:22,690 p=192762 u=qupeng |  TASK [tikv : backup bianry file] *******************************************************************************************************************************************
2018-02-27 14:55:22,771 p=192762 u=qupeng |  TASK [tikv : create run script] ********************************************************************************************************************************************
2018-02-27 14:55:24,043 p=192762 u=qupeng |  changed: [tikv1] => (item=run)
2018-02-27 14:55:24,052 p=192762 u=qupeng |  changed: [tikv4] => (item=run)
2018-02-27 14:55:24,124 p=192762 u=qupeng |  changed: [tikv3] => (item=run)
2018-02-27 14:55:24,141 p=192762 u=qupeng |  changed: [tikv5] => (item=run)
2018-02-27 14:55:24,161 p=192762 u=qupeng |  changed: [tikv2] => (item=run)
2018-02-27 14:55:24,176 p=192762 u=qupeng |  TASK [tikv : backup script file] *******************************************************************************************************************************************
2018-02-27 14:55:24,270 p=192762 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-02-27 14:55:24,381 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/supervise_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-02-27 14:55:24,395 p=192762 u=qupeng |  TASK [tikv : deploy supervise] *********************************************************************************************************************************************
2018-02-27 14:55:26,863 p=192762 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:55:27,732 p=192762 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status/tikv)
2018-02-27 14:55:27,766 p=192762 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status/tikv)
2018-02-27 14:55:27,770 p=192762 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status/tikv)
2018-02-27 14:55:27,772 p=192762 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status/tikv)
2018-02-27 14:55:27,777 p=192762 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status/tikv)
2018-02-27 14:55:27,786 p=192762 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:55:29,249 p=192762 u=qupeng |  changed: [tikv2] => (item=supervise)
2018-02-27 14:55:29,267 p=192762 u=qupeng |  changed: [tikv4] => (item=supervise)
2018-02-27 14:55:29,276 p=192762 u=qupeng |  changed: [tikv1] => (item=supervise)
2018-02-27 14:55:29,303 p=192762 u=qupeng |  changed: [tikv5] => (item=supervise)
2018-02-27 14:55:29,323 p=192762 u=qupeng |  changed: [tikv3] => (item=supervise)
2018-02-27 14:55:30,503 p=192762 u=qupeng |  changed: [tikv1] => (item=svc)
2018-02-27 14:55:30,505 p=192762 u=qupeng |  changed: [tikv2] => (item=svc)
2018-02-27 14:55:30,535 p=192762 u=qupeng |  changed: [tikv4] => (item=svc)
2018-02-27 14:55:30,598 p=192762 u=qupeng |  changed: [tikv5] => (item=svc)
2018-02-27 14:55:30,600 p=192762 u=qupeng |  changed: [tikv3] => (item=svc)
2018-02-27 14:55:31,772 p=192762 u=qupeng |  changed: [tikv1] => (item=svstat)
2018-02-27 14:55:31,797 p=192762 u=qupeng |  changed: [tikv2] => (item=svstat)
2018-02-27 14:55:31,809 p=192762 u=qupeng |  changed: [tikv4] => (item=svstat)
2018-02-27 14:55:31,901 p=192762 u=qupeng |  changed: [tikv5] => (item=svstat)
2018-02-27 14:55:31,919 p=192762 u=qupeng |  changed: [tikv3] => (item=svstat)
2018-02-27 14:55:31,932 p=192762 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:55:33,200 p=192762 u=qupeng |  changed: [tikv1] => (item=start)
2018-02-27 14:55:33,249 p=192762 u=qupeng |  changed: [tikv3] => (item=start)
2018-02-27 14:55:33,263 p=192762 u=qupeng |  changed: [tikv4] => (item=start)
2018-02-27 14:55:33,280 p=192762 u=qupeng |  changed: [tikv2] => (item=start)
2018-02-27 14:55:33,304 p=192762 u=qupeng |  changed: [tikv5] => (item=start)
2018-02-27 14:55:34,434 p=192762 u=qupeng |  changed: [tikv1] => (item=stop)
2018-02-27 14:55:34,479 p=192762 u=qupeng |  changed: [tikv4] => (item=stop)
2018-02-27 14:55:34,525 p=192762 u=qupeng |  changed: [tikv3] => (item=stop)
2018-02-27 14:55:34,533 p=192762 u=qupeng |  changed: [tikv2] => (item=stop)
2018-02-27 14:55:34,560 p=192762 u=qupeng |  changed: [tikv5] => (item=stop)
2018-02-27 14:55:34,578 p=192762 u=qupeng |  TASK [tikv : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 14:55:34,647 p=192762 u=qupeng |  ok: [tikv1]
2018-02-27 14:55:34,665 p=192762 u=qupeng |  ok: [tikv2]
2018-02-27 14:55:34,679 p=192762 u=qupeng |  ok: [tikv3]
2018-02-27 14:55:34,682 p=192762 u=qupeng |  ok: [tikv4]
2018-02-27 14:55:34,711 p=192762 u=qupeng |  ok: [tikv5]
2018-02-27 14:55:34,718 p=192762 u=qupeng |  PLAY [deploying TiDB cluster] **********************************************************************************************************************************************
2018-02-27 14:55:34,735 p=192762 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:55:34,789 p=192762 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:55:34,823 p=192762 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:55:34,854 p=192762 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:55:34,880 p=192762 u=qupeng |  TASK [pump : create deploy directories] ************************************************************************************************************************************
2018-02-27 14:55:34,916 p=192762 u=qupeng |  TASK [pump : include] ******************************************************************************************************************************************************
2018-02-27 14:55:34,940 p=192762 u=qupeng |  TASK [pump : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 14:55:34,962 p=192762 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:55:35,664 p=192762 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/scripts)
2018-02-27 14:55:36,368 p=192762 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-02-27 14:55:37,096 p=192762 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/backup)
2018-02-27 14:55:37,113 p=192762 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:55:37,155 p=192762 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:55:37,868 p=192762 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/bin)
2018-02-27 14:55:37,879 p=192762 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:55:37,923 p=192762 u=qupeng |  TASK [tidb : create deploy directories] ************************************************************************************************************************************
2018-02-27 14:55:38,688 p=192762 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/log)
2018-02-27 14:55:39,417 p=192762 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-02-27 14:55:39,432 p=192762 u=qupeng |  TASK [tidb : load customized config] ***************************************************************************************************************************************
2018-02-27 14:55:39,489 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:55:39,505 p=192762 u=qupeng |  TASK [tidb : load default config] ******************************************************************************************************************************************
2018-02-27 14:55:39,559 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:55:39,576 p=192762 u=qupeng |  TASK [tidb : generate metrics config] **************************************************************************************************************************************
2018-02-27 14:55:39,641 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:55:39,656 p=192762 u=qupeng |  TASK [tidb : combine final config] *****************************************************************************************************************************************
2018-02-27 14:55:39,694 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:55:39,707 p=192762 u=qupeng |  TASK [tidb : debug] ********************************************************************************************************************************************************
2018-02-27 14:55:39,745 p=192762 u=qupeng |  ok: [tidb] => {
    "tidb_conf": {
        "global": {
            "enable-chunk": true, 
            "host": "0.0.0.0", 
            "lease": "10s", 
            "run-ddl": true, 
            "split-table": true, 
            "store": "tikv"
        }, 
        "log": {
            "disable-timestamp": false, 
            "file": {
                "log-rotate": true
            }, 
            "format": "text", 
            "level": "info", 
            "query-log-max-len": 2048, 
            "slow-threshold": 300
        }, 
        "opentracing": {
            "enable": false, 
            "reporter": {
                "buffer-flush-interval": 0, 
                "local-agent-host-port": "", 
                "log-spans": false, 
                "queue-size": 0
            }, 
            "rpc-metrics": false, 
            "sampler": {
                "max-operations": 0, 
                "param": 1.0, 
                "sampling-refresh-interval": 0, 
                "sampling-server-url": "", 
                "type": "const"
            }
        }, 
        "performance": {
            "cross-join": true, 
            "join-concurrency": 5, 
            "max-procs": 0, 
            "retry-limit": 10, 
            "run-auto-analyze": true, 
            "stats-lease": "3s", 
            "tcp-keep-alive": true
        }, 
        "plan_cache": {
            "capacity": 2560, 
            "enabled": false, 
            "shards": 256
        }, 
        "prepared_plan_cache": {
            "capacity": 100, 
            "enabled": false
        }, 
        "proxy_protocol": {
            "header-timeout": 5, 
            "networks": ""
        }, 
        "security": {
            "cluster-ssl-ca": "", 
            "cluster-ssl-cert": "", 
            "cluster-ssl-key": "", 
            "ssl-ca": "", 
            "ssl-cert": "", 
            "ssl-key": ""
        }, 
        "status": {
            "metrics-addr": "172.16.21.1:70011", 
            "metrics-interval": 15, 
            "report-status": true
        }, 
        "tikv_client": {
            "grpc-connection-count": 16
        }, 
        "xprotocol": {
            "xhost": "0.0.0.0", 
            "xport": 14000, 
            "xserver": false, 
            "xsocket": ""
        }
    }
}
2018-02-27 14:55:39,758 p=192762 u=qupeng |  TASK [tidb : create config file] *******************************************************************************************************************************************
2018-02-27 14:55:41,177 p=192762 u=qupeng |  changed: [tidb]
2018-02-27 14:55:41,192 p=192762 u=qupeng |  TASK [tidb : backup conf file] *********************************************************************************************************************************************
2018-02-27 14:55:41,234 p=192762 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-02-27 14:55:41,287 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/binary_deployment.yml for tidb
2018-02-27 14:55:41,302 p=192762 u=qupeng |  TASK [tidb : deploy binary] ************************************************************************************************************************************************
2018-02-27 14:55:43,297 p=192762 u=qupeng |  changed: [tidb]
2018-02-27 14:55:43,308 p=192762 u=qupeng |  TASK [tidb : backup binary file] *******************************************************************************************************************************************
2018-02-27 14:55:43,348 p=192762 u=qupeng |  TASK [tidb : create run script] ********************************************************************************************************************************************
2018-02-27 14:55:44,780 p=192762 u=qupeng |  changed: [tidb] => (item=run)
2018-02-27 14:55:44,796 p=192762 u=qupeng |  TASK [tidb : backup script file] *******************************************************************************************************************************************
2018-02-27 14:55:44,830 p=192762 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-02-27 14:55:44,877 p=192762 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/supervise_deployment.yml for tidb
2018-02-27 14:55:44,893 p=192762 u=qupeng |  TASK [tidb : deploy supervise] *********************************************************************************************************************************************
2018-02-27 14:55:45,692 p=192762 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:55:46,446 p=192762 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/status/tidb)
2018-02-27 14:55:46,454 p=192762 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:55:47,908 p=192762 u=qupeng |  changed: [tidb] => (item=supervise)
2018-02-27 14:55:49,338 p=192762 u=qupeng |  changed: [tidb] => (item=svc)
2018-02-27 14:55:50,754 p=192762 u=qupeng |  changed: [tidb] => (item=svstat)
2018-02-27 14:55:50,770 p=192762 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:55:52,281 p=192762 u=qupeng |  changed: [tidb] => (item=start)
2018-02-27 14:55:53,753 p=192762 u=qupeng |  changed: [tidb] => (item=stop)
2018-02-27 14:55:53,770 p=192762 u=qupeng |  TASK [tidb : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 14:55:53,895 p=192762 u=qupeng |  ok: [tidb]
2018-02-27 14:55:53,908 p=192762 u=qupeng |  TASK [tispark : deploy spark-2.1.1-bin-hadoop2.7] **************************************************************************************************************************
2018-02-27 14:55:54,475 p=192762 u=qupeng |  fatal: [tidb]: FAILED! => {"changed": false, "msg": "Could not find or access '/home/qupeng/ansible/tidb-ansible/downloads/spark-2.1.1-bin-hadoop2.7.tgz'"}
2018-02-27 14:55:54,475 fail [tidb]: Ansible FAILED! => playbook: deploy.yml; TASK: tispark : deploy spark-2.1.1-bin-hadoop2.7; message: {"changed": false, "msg": "Could not find or access '/home/qupeng/ansible/tidb-ansible/downloads/spark-2.1.1-bin-hadoop2.7.tgz'"}
2018-02-27 14:55:54,477 p=192762 u=qupeng |  	to retry, use: --limit @/home/qupeng/ansible/tidb-ansible/retry_files/deploy.retry

2018-02-27 14:55:54,477 p=192762 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 14:55:54,478 p=192762 u=qupeng |  172.16.21.1                : ok=51   changed=11   unreachable=0    failed=0   
2018-02-27 14:55:54,478 p=192762 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-02-27 14:55:54,478 p=192762 u=qupeng |  monitoring                 : ok=39   changed=5    unreachable=0    failed=0   
2018-02-27 14:55:54,478 p=192762 u=qupeng |  pd                         : ok=26   changed=9    unreachable=0    failed=0   
2018-02-27 14:55:54,479 p=192762 u=qupeng |  tidb                       : ok=26   changed=9    unreachable=0    failed=1   
2018-02-27 14:55:54,479 p=192762 u=qupeng |  tikv1                      : ok=27   changed=10   unreachable=0    failed=0   
2018-02-27 14:55:54,479 p=192762 u=qupeng |  tikv2                      : ok=27   changed=10   unreachable=0    failed=0   
2018-02-27 14:55:54,479 p=192762 u=qupeng |  tikv3                      : ok=27   changed=10   unreachable=0    failed=0   
2018-02-27 14:55:54,480 p=192762 u=qupeng |  tikv4                      : ok=27   changed=10   unreachable=0    failed=0   
2018-02-27 14:55:54,480 p=192762 u=qupeng |  tikv5                      : ok=27   changed=10   unreachable=0    failed=0   
2018-02-27 14:55:54,480 p=192762 u=qupeng |  ERROR MESSAGE SUMMARY ******************************************************************************************************************************************************
2018-02-27 14:55:54,480 p=192762 u=qupeng |  [tidb]: Ansible FAILED! => playbook: deploy.yml; TASK: tispark : deploy spark-2.1.1-bin-hadoop2.7; message: {"changed": false, "msg": "Could not find or access '/home/qupeng/ansible/tidb-ansible/downloads/spark-2.1.1-bin-hadoop2.7.tgz'"}

2018-02-27 14:55:54,481 p=192762 u=qupeng |  Ask for help:
2018-02-27 14:55:54,481 p=192762 u=qupeng |  Contact us: sre@pingcap.com
2018-02-27 14:55:54,481 p=192762 u=qupeng |  It seems that you encounter some problems. You can send an email to the above email address, attached with the tidb-ansible/inventory.ini and tidb-ansible/log/ansible.log files and the error message, or new issue on https://github.com/pingcap/tidb-ansible/issues. We'll try our best to help you deploy a TiDB cluster. Thanks. :-)
2018-02-27 14:57:03,243 p=13221 u=qupeng |  ERROR! the role 'tispark' was not found in /home/qupeng/ansible/tidb-ansible/roles:/home/qupeng/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/qupeng/ansible/tidb-ansible

The error appears to have been in '/home/qupeng/ansible/tidb-ansible/deploy.yml': line 65, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    - tidb
    - { role: tispark, when: "(groups.get('spark_master', []) | length == 0 or groups.get('spark_slaves', []) | length == 0) and (deployment_method == 'binary')" }
      ^ here

2018-02-27 14:58:02,483 p=13247 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 14:58:02,501 p=13247 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 14:58:02,529 p=13247 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 14:58:02,553 p=13247 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 14:58:02,571 p=13247 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 14:58:02,594 p=13247 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 14:58:02,619 p=13247 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 14:58:02,684 p=13247 u=qupeng |  ok: [localhost]
2018-02-27 14:58:02,693 p=13247 u=qupeng |  PLAY [initializing deployment target] **************************************************************************************************************************************
2018-02-27 14:58:02,718 p=13247 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 14:58:02,881 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:02,904 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:02,925 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:02,943 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:02,944 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:03,009 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:03,038 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:03,054 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:03,061 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:03,072 p=13247 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 14:58:09,109 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:09,183 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:09,244 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:10,095 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:10,212 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:14,797 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:14,845 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:15,524 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:15,704 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:15,732 p=13247 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 14:58:16,686 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:16,706 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:16,723 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:16,741 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:16,743 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:17,396 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:17,419 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:17,434 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:17,440 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:17,449 p=13247 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 14:58:17,554 p=13247 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 14:58:17,657 p=13247 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 14:58:17,764 p=13247 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 14:58:17,810 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:17,824 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:17,847 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:17,860 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:17,862 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:17,871 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:17,875 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:17,887 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:17,897 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:17,904 p=13247 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 14:58:18,015 p=13247 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 14:58:18,127 p=13247 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 14:58:18,242 p=13247 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 14:58:19,010 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:19,030 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:19,046 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:19,059 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:19,060 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:19,773 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:19,783 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:19,784 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:19,796 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:19,807 p=13247 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 14:58:20,581 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:20,604 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:20,626 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:20,642 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:20,644 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:21,346 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:21,347 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:21,351 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:21,352 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:21,360 p=13247 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 14:58:21,479 p=13247 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 14:58:21,592 p=13247 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 14:58:22,617 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:22,632 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:22,679 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:22,695 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:22,715 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:23,497 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:23,507 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:23,519 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:23,545 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:23,556 p=13247 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 14:58:23,668 p=13247 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 14:58:23,775 p=13247 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 14:58:24,659 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:24,673 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:24,692 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:24,704 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:24,721 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:25,506 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:25,567 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:25,575 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:25,599 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:25,607 p=13247 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 14:58:26,492 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:26,508 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:26,523 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:26,537 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:26,545 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:27,338 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:27,346 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:27,418 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:27,432 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:27,445 p=13247 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-02-27 14:58:27,508 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:27,520 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:27,532 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:27,548 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:27,560 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:27,561 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:27,565 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:27,580 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:27,585 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:27,593 p=13247 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 14:58:27,648 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:27,661 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:27,683 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:27,696 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:27,696 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:27,697 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:27,712 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:27,730 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:27,733 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:27,740 p=13247 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 14:58:27,793 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:58:27,807 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:27,824 p=13247 u=qupeng |  ok: [pd]
2018-02-27 14:58:27,837 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 14:58:27,844 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 14:58:27,848 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 14:58:27,850 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 14:58:27,882 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 14:58:27,887 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 14:58:27,894 p=13247 u=qupeng |  PLAY [deploying monitoring agent] ******************************************************************************************************************************************
2018-02-27 14:58:27,904 p=13247 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:58:28,764 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 14:58:29,452 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 14:58:30,132 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 14:58:30,147 p=13247 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:58:30,187 p=13247 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:58:30,889 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 14:58:30,905 p=13247 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:58:30,953 p=13247 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-02-27 14:58:31,002 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/binary_deployment.yml for 172.16.21.1
2018-02-27 14:58:31,016 p=13247 u=qupeng |  TASK [node_exporter : create deploy directories] ***************************************************************************************************************************
2018-02-27 14:58:31,741 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:58:31,756 p=13247 u=qupeng |  TASK [node_exporter : deploy node_exporter binary] *************************************************************************************************************************
2018-02-27 14:58:33,957 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:33,967 p=13247 u=qupeng |  TASK [node_exporter : create run script] ***********************************************************************************************************************************
2018-02-27 14:58:35,360 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=run)
2018-02-27 14:58:35,368 p=13247 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-02-27 14:58:35,403 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/supervise_deployment.yml for 172.16.21.1
2018-02-27 14:58:35,411 p=13247 u=qupeng |  TASK [node_exporter : deploy supervise] ************************************************************************************************************************************
2018-02-27 14:58:35,922 p=13247 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:58:36,692 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/node_exporter)
2018-02-27 14:58:36,700 p=13247 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:58:38,174 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-02-27 14:58:39,651 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-02-27 14:58:41,009 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-02-27 14:58:41,018 p=13247 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:58:42,529 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=start)
2018-02-27 14:58:44,005 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=stop)
2018-02-27 14:58:44,022 p=13247 u=qupeng |  TASK [node_exporter : prepare firewalld white list] ************************************************************************************************************************
2018-02-27 14:58:44,145 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:44,153 p=13247 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-02-27 14:58:44,204 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/binary_deployment.yml for 172.16.21.1
2018-02-27 14:58:44,214 p=13247 u=qupeng |  TASK [blackbox_exporter : create deploy directories] ***********************************************************************************************************************
2018-02-27 14:58:45,016 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:58:45,029 p=13247 u=qupeng |  TASK [blackbox_exporter : deploy blackbox_exporter binary] *****************************************************************************************************************
2018-02-27 14:58:47,265 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:47,282 p=13247 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-02-27 14:58:47,328 p=13247 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-02-27 14:58:48,206 p=13247 u=qupeng |  changed: [172.16.21.1]
2018-02-27 14:58:48,218 p=13247 u=qupeng |  TASK [blackbox_exporter : create run script] *******************************************************************************************************************************
2018-02-27 14:58:49,658 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=run)
2018-02-27 14:58:49,672 p=13247 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-02-27 14:58:49,718 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/supervise_deployment.yml for 172.16.21.1
2018-02-27 14:58:49,733 p=13247 u=qupeng |  TASK [blackbox_exporter : deploy supervise] ********************************************************************************************************************************
2018-02-27 14:58:50,287 p=13247 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:58:51,051 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/blackbox_exporter)
2018-02-27 14:58:51,062 p=13247 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:58:52,528 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-02-27 14:58:54,013 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-02-27 14:58:55,491 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-02-27 14:58:55,508 p=13247 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:58:56,971 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=start)
2018-02-27 14:58:58,390 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=stop)
2018-02-27 14:58:58,407 p=13247 u=qupeng |  TASK [blackbox_exporter : create config file] ******************************************************************************************************************************
2018-02-27 14:58:59,846 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:59,861 p=13247 u=qupeng |  TASK [blackbox_exporter : backup conf file] ********************************************************************************************************************************
2018-02-27 14:58:59,905 p=13247 u=qupeng |  TASK [blackbox_exporter : prepare firewalld white list] ********************************************************************************************************************
2018-02-27 14:58:59,971 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:58:59,980 p=13247 u=qupeng |  PLAY [deploying monitoring server] *****************************************************************************************************************************************
2018-02-27 14:58:59,999 p=13247 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:59:00,738 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 14:59:01,457 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 14:59:02,158 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 14:59:02,167 p=13247 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:59:02,211 p=13247 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:59:02,940 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 14:59:02,948 p=13247 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:59:02,988 p=13247 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-02-27 14:59:03,024 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/binary_deployment.yml for monitoring
2018-02-27 14:59:03,032 p=13247 u=qupeng |  TASK [pushgateway : create deploy directories] *****************************************************************************************************************************
2018-02-27 14:59:03,761 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:59:03,769 p=13247 u=qupeng |  TASK [pushgateway : deploy pushgateway binary] *****************************************************************************************************************************
2018-02-27 14:59:05,238 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:59:05,253 p=13247 u=qupeng |  TASK [pushgateway : create run script] *************************************************************************************************************************************
2018-02-27 14:59:06,672 p=13247 u=qupeng |  ok: [monitoring] => (item=run)
2018-02-27 14:59:06,681 p=13247 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-02-27 14:59:06,708 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/supervise_deployment.yml for monitoring
2018-02-27 14:59:06,716 p=13247 u=qupeng |  TASK [pushgateway : deploy supervise] **************************************************************************************************************************************
2018-02-27 14:59:07,290 p=13247 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:59:08,038 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/pushgateway)
2018-02-27 14:59:08,053 p=13247 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:59:09,532 p=13247 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-02-27 14:59:10,951 p=13247 u=qupeng |  ok: [monitoring] => (item=svc)
2018-02-27 14:59:12,400 p=13247 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-02-27 14:59:12,417 p=13247 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:59:13,935 p=13247 u=qupeng |  ok: [monitoring] => (item=start)
2018-02-27 14:59:15,362 p=13247 u=qupeng |  ok: [monitoring] => (item=stop)
2018-02-27 14:59:15,379 p=13247 u=qupeng |  TASK [pushgateway : prepare firewalld white list] **************************************************************************************************************************
2018-02-27 14:59:15,429 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:59:15,445 p=13247 u=qupeng |  TASK [prometheus : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:59:16,209 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:59:16,938 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-02-27 14:59:17,639 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-02-27 14:59:17,647 p=13247 u=qupeng |  TASK [prometheus : get config file stat] ***********************************************************************************************************************************
2018-02-27 14:59:18,690 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:59:18,705 p=13247 u=qupeng |  TASK [prometheus : get alert conf stat] ************************************************************************************************************************************
2018-02-27 14:59:19,410 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:59:19,424 p=13247 u=qupeng |  TASK [prometheus : create configuration file if not exist] *****************************************************************************************************************
2018-02-27 14:59:21,286 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:59:21,299 p=13247 u=qupeng |  TASK [prometheus : copy alert rules file] **********************************************************************************************************************************
2018-02-27 14:59:23,145 p=13247 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-02-27 14:59:24,713 p=13247 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-02-27 14:59:26,357 p=13247 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-02-27 14:59:27,994 p=13247 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-02-27 14:59:29,691 p=13247 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-02-27 14:59:31,404 p=13247 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-02-27 14:59:32,989 p=13247 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-02-27 14:59:33,008 p=13247 u=qupeng |  TASK [prometheus : set alert rules label changes] **************************************************************************************************************************
2018-02-27 14:59:33,893 p=13247 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-02-27 14:59:34,542 p=13247 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-02-27 14:59:35,262 p=13247 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-02-27 14:59:35,957 p=13247 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-02-27 14:59:36,680 p=13247 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-02-27 14:59:37,385 p=13247 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-02-27 14:59:38,089 p=13247 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-02-27 14:59:38,106 p=13247 u=qupeng |  TASK [prometheus : create deploy data directory] ***************************************************************************************************************************
2018-02-27 14:59:38,849 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-02-27 14:59:38,865 p=13247 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-02-27 14:59:38,914 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/binary_deployment.yml for monitoring
2018-02-27 14:59:38,927 p=13247 u=qupeng |  TASK [prometheus : create deploy log directory] ****************************************************************************************************************************
2018-02-27 14:59:39,668 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:59:39,683 p=13247 u=qupeng |  TASK [prometheus : deploy prometheus binary] *******************************************************************************************************************************
2018-02-27 14:59:41,374 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:59:41,387 p=13247 u=qupeng |  TASK [prometheus : create run script] **************************************************************************************************************************************
2018-02-27 14:59:42,854 p=13247 u=qupeng |  ok: [monitoring] => (item=run)
2018-02-27 14:59:42,869 p=13247 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-02-27 14:59:42,913 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/supervise_deployment.yml for monitoring
2018-02-27 14:59:42,927 p=13247 u=qupeng |  TASK [prometheus : deploy supervise] ***************************************************************************************************************************************
2018-02-27 14:59:43,568 p=13247 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 14:59:44,293 p=13247 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-02-27 14:59:44,308 p=13247 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 14:59:45,748 p=13247 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-02-27 14:59:47,157 p=13247 u=qupeng |  ok: [monitoring] => (item=svc)
2018-02-27 14:59:48,601 p=13247 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-02-27 14:59:48,618 p=13247 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 14:59:50,125 p=13247 u=qupeng |  ok: [monitoring] => (item=start)
2018-02-27 14:59:51,546 p=13247 u=qupeng |  ok: [monitoring] => (item=stop)
2018-02-27 14:59:51,562 p=13247 u=qupeng |  TASK [prometheus : prepare firewalld white list] ***************************************************************************************************************************
2018-02-27 14:59:51,609 p=13247 u=qupeng |  ok: [monitoring]
2018-02-27 14:59:51,617 p=13247 u=qupeng |  PLAY [deploying grafana] ***************************************************************************************************************************************************
2018-02-27 14:59:51,630 p=13247 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 14:59:52,334 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 14:59:53,123 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 14:59:53,835 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 14:59:53,852 p=13247 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 14:59:53,904 p=13247 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 14:59:54,724 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 14:59:54,739 p=13247 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 14:59:54,793 p=13247 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 14:59:54,842 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/tasks.yml for 172.16.21.1
2018-02-27 14:59:54,854 p=13247 u=qupeng |  TASK [grafana : create common deploy directories] **************************************************************************************************************************
2018-02-27 14:59:55,685 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 14:59:56,389 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/data.grafana)
2018-02-27 14:59:56,403 p=13247 u=qupeng |  TASK [grafana : push data source file] *************************************************************************************************************************************
2018-02-27 14:59:57,930 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:59:57,944 p=13247 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 14:59:58,004 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/binary_deployment.yml for 172.16.21.1
2018-02-27 14:59:58,018 p=13247 u=qupeng |  TASK [grafana : create binary deploy directories (1/2)] ********************************************************************************************************************
2018-02-27 14:59:58,723 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt)
2018-02-27 14:59:58,737 p=13247 u=qupeng |  TASK [grafana : deploy grafana binary] *************************************************************************************************************************************
2018-02-27 14:59:59,244 p=13247 u=qupeng |  TASK [grafana : rename grafana deploy dir] *********************************************************************************************************************************
2018-02-27 14:59:59,956 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 14:59:59,970 p=13247 u=qupeng |  TASK [grafana : create binary deploy directories (2/2)] ********************************************************************************************************************
2018-02-27 15:00:00,716 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/dashboards)
2018-02-27 15:00:01,406 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/plugins)
2018-02-27 15:00:01,416 p=13247 u=qupeng |  TASK [grafana : create grafana configuration file] *************************************************************************************************************************
2018-02-27 15:00:02,882 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:00:02,898 p=13247 u=qupeng |  TASK [grafana : create run script] *****************************************************************************************************************************************
2018-02-27 15:00:04,339 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=run)
2018-02-27 15:00:04,355 p=13247 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 15:00:04,405 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/supervise_deployment.yml for 172.16.21.1
2018-02-27 15:00:04,421 p=13247 u=qupeng |  TASK [grafana : deploy supervise] ******************************************************************************************************************************************
2018-02-27 15:00:04,994 p=13247 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:00:05,740 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/grafana)
2018-02-27 15:00:05,756 p=13247 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:00:07,241 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-02-27 15:00:08,703 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-02-27 15:00:10,172 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-02-27 15:00:10,181 p=13247 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:00:11,652 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=start)
2018-02-27 15:00:13,107 p=13247 u=qupeng |  ok: [172.16.21.1] => (item=stop)
2018-02-27 15:00:13,122 p=13247 u=qupeng |  TASK [grafana : prepare firewalld white list] ******************************************************************************************************************************
2018-02-27 15:00:13,166 p=13247 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:00:13,175 p=13247 u=qupeng |  PLAY [deploying PD cluster] ************************************************************************************************************************************************
2018-02-27 15:00:13,193 p=13247 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:00:13,928 p=13247 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-02-27 15:00:14,611 p=13247 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-02-27 15:00:15,265 p=13247 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-02-27 15:00:15,279 p=13247 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:00:15,320 p=13247 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:00:16,053 p=13247 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-02-27 15:00:16,066 p=13247 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:00:16,114 p=13247 u=qupeng |  TASK [pd : create deploy directories] **************************************************************************************************************************************
2018-02-27 15:00:16,808 p=13247 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-02-27 15:00:17,490 p=13247 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-02-27 15:00:18,182 p=13247 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/data.pd)
2018-02-27 15:00:18,198 p=13247 u=qupeng |  TASK [pd : load customized config] *****************************************************************************************************************************************
2018-02-27 15:00:18,258 p=13247 u=qupeng |  ok: [pd]
2018-02-27 15:00:18,273 p=13247 u=qupeng |  TASK [pd : load default config] ********************************************************************************************************************************************
2018-02-27 15:00:18,321 p=13247 u=qupeng |  ok: [pd]
2018-02-27 15:00:18,335 p=13247 u=qupeng |  TASK [pd : generate metrics config] ****************************************************************************************************************************************
2018-02-27 15:00:18,422 p=13247 u=qupeng |  ok: [pd]
2018-02-27 15:00:18,436 p=13247 u=qupeng |  TASK [pd : generate final config] ******************************************************************************************************************************************
2018-02-27 15:00:18,483 p=13247 u=qupeng |  ok: [pd]
2018-02-27 15:00:18,496 p=13247 u=qupeng |  TASK [pd : debug] **********************************************************************************************************************************************************
2018-02-27 15:00:18,542 p=13247 u=qupeng |  ok: [pd] => {
    "pd_conf": {
        "global": {
            "lease": 3, 
            "tso-save-interval": "3s"
        }, 
        "log": {
            "file": {}, 
            "level": "info"
        }, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s"
        }, 
        "replication": {
            "location-labels": [], 
            "max-replicas": 3
        }, 
        "schedule": {
            "leader-schedule-limit": 64, 
            "max-pending-peer-count": 16, 
            "max-snapshot-count": 3, 
            "max-store-down-time": "1h", 
            "region-schedule-limit": 16, 
            "replica-schedule-limit": 24, 
            "tolerant-size-ratio": 2.5
        }, 
        "security": {
            "cacert-path": "", 
            "cert-path": "", 
            "key-path": ""
        }
    }
}
2018-02-27 15:00:18,556 p=13247 u=qupeng |  TASK [pd : create configuration file] **************************************************************************************************************************************
2018-02-27 15:00:19,994 p=13247 u=qupeng |  ok: [pd]
2018-02-27 15:00:20,007 p=13247 u=qupeng |  TASK [pd : backup conf file] ***********************************************************************************************************************************************
2018-02-27 15:00:20,048 p=13247 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-02-27 15:00:20,103 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-02-27 15:00:20,117 p=13247 u=qupeng |  TASK [pd : deploy binary] **************************************************************************************************************************************************
2018-02-27 15:00:21,690 p=13247 u=qupeng |  ok: [pd]
2018-02-27 15:00:21,704 p=13247 u=qupeng |  TASK [pd : backup bianry file] *********************************************************************************************************************************************
2018-02-27 15:00:21,742 p=13247 u=qupeng |  TASK [pd : create startup script] ******************************************************************************************************************************************
2018-02-27 15:00:23,289 p=13247 u=qupeng |  ok: [pd] => (item=run)
2018-02-27 15:00:23,303 p=13247 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-02-27 15:00:23,416 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-02-27 15:00:23,426 p=13247 u=qupeng |  TASK [pd : deploy supervise] ***********************************************************************************************************************************************
2018-02-27 15:00:24,003 p=13247 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:00:24,837 p=13247 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/pd)
2018-02-27 15:00:24,847 p=13247 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:00:26,316 p=13247 u=qupeng |  ok: [pd] => (item=supervise)
2018-02-27 15:00:27,761 p=13247 u=qupeng |  ok: [pd] => (item=svc)
2018-02-27 15:00:29,183 p=13247 u=qupeng |  ok: [pd] => (item=svstat)
2018-02-27 15:00:29,194 p=13247 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:00:30,582 p=13247 u=qupeng |  ok: [pd] => (item=start)
2018-02-27 15:00:31,997 p=13247 u=qupeng |  ok: [pd] => (item=stop)
2018-02-27 15:00:32,013 p=13247 u=qupeng |  TASK [pd : prepare firewalld white list] ***********************************************************************************************************************************
2018-02-27 15:00:32,058 p=13247 u=qupeng |  ok: [pd]
2018-02-27 15:00:32,068 p=13247 u=qupeng |  PLAY [deploying TiKV cluster] **********************************************************************************************************************************************
2018-02-27 15:00:32,088 p=13247 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:00:32,722 p=13247 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/scripts)
2018-02-27 15:00:32,756 p=13247 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/scripts)
2018-02-27 15:00:32,780 p=13247 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/scripts)
2018-02-27 15:00:32,801 p=13247 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/scripts)
2018-02-27 15:00:32,808 p=13247 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/scripts)
2018-02-27 15:00:33,315 p=13247 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-02-27 15:00:33,362 p=13247 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-02-27 15:00:33,371 p=13247 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-02-27 15:00:33,431 p=13247 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-02-27 15:00:33,445 p=13247 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-02-27 15:00:33,975 p=13247 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/backup)
2018-02-27 15:00:33,989 p=13247 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/backup)
2018-02-27 15:00:33,996 p=13247 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/backup)
2018-02-27 15:00:34,060 p=13247 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/backup)
2018-02-27 15:00:34,096 p=13247 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/backup)
2018-02-27 15:00:34,110 p=13247 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:00:34,787 p=13247 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status)
2018-02-27 15:00:34,791 p=13247 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status)
2018-02-27 15:00:34,799 p=13247 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status)
2018-02-27 15:00:34,816 p=13247 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status)
2018-02-27 15:00:34,837 p=13247 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status)
2018-02-27 15:00:34,852 p=13247 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:00:35,479 p=13247 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/bin)
2018-02-27 15:00:35,564 p=13247 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/bin)
2018-02-27 15:00:35,575 p=13247 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/bin)
2018-02-27 15:00:35,596 p=13247 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/bin)
2018-02-27 15:00:35,599 p=13247 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/bin)
2018-02-27 15:00:35,608 p=13247 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:00:35,687 p=13247 u=qupeng |  TASK [tikv : create deploy directories] ************************************************************************************************************************************
2018-02-27 15:00:36,315 p=13247 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/log)
2018-02-27 15:00:36,395 p=13247 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/log)
2018-02-27 15:00:36,396 p=13247 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/log)
2018-02-27 15:00:36,397 p=13247 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/log)
2018-02-27 15:00:36,398 p=13247 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/log)
2018-02-27 15:00:36,978 p=13247 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/data)
2018-02-27 15:00:37,072 p=13247 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/data)
2018-02-27 15:00:37,086 p=13247 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/data)
2018-02-27 15:00:37,093 p=13247 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/data)
2018-02-27 15:00:37,113 p=13247 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/data)
2018-02-27 15:00:37,629 p=13247 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-02-27 15:00:37,730 p=13247 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-02-27 15:00:37,737 p=13247 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-02-27 15:00:37,744 p=13247 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-02-27 15:00:37,750 p=13247 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-02-27 15:00:37,764 p=13247 u=qupeng |  TASK [tikv : load customized config] ***************************************************************************************************************************************
2018-02-27 15:00:37,823 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 15:00:37,842 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 15:00:37,844 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 15:00:37,852 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 15:00:37,876 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 15:00:37,886 p=13247 u=qupeng |  TASK [tikv : load default config] ******************************************************************************************************************************************
2018-02-27 15:00:37,933 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 15:00:37,955 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 15:00:37,958 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 15:00:37,980 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 15:00:37,985 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 15:00:37,992 p=13247 u=qupeng |  TASK [tikv : generate metrics config] **************************************************************************************************************************************
2018-02-27 15:00:38,067 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 15:00:38,072 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 15:00:38,083 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 15:00:38,129 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 15:00:38,142 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 15:00:38,149 p=13247 u=qupeng |  TASK [tikv : generate final config] ****************************************************************************************************************************************
2018-02-27 15:00:38,206 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 15:00:38,212 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 15:00:38,225 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 15:00:38,244 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 15:00:38,257 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 15:00:38,264 p=13247 u=qupeng |  TASK [tikv : debug] ********************************************************************************************************************************************************
2018-02-27 15:00:38,319 p=13247 u=qupeng |  ok: [tikv1] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:00:38,322 p=13247 u=qupeng |  ok: [tikv2] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:00:38,346 p=13247 u=qupeng |  ok: [tikv3] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:00:38,350 p=13247 u=qupeng |  ok: [tikv4] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:00:38,356 p=13247 u=qupeng |  ok: [tikv5] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:00:38,367 p=13247 u=qupeng |  TASK [tikv : create config file] *******************************************************************************************************************************************
2018-02-27 15:00:39,621 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 15:00:39,696 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 15:00:39,748 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 15:00:39,767 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 15:00:39,799 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 15:00:39,811 p=13247 u=qupeng |  TASK [tikv : backup conf file] *********************************************************************************************************************************************
2018-02-27 15:00:39,899 p=13247 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-02-27 15:00:40,003 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/binary_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-02-27 15:00:40,017 p=13247 u=qupeng |  TASK [tikv : deploy binary] ************************************************************************************************************************************************
2018-02-27 15:00:41,996 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 15:00:42,004 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 15:00:42,007 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 15:00:42,074 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 15:00:42,077 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 15:00:42,093 p=13247 u=qupeng |  TASK [tikv : backup bianry file] *******************************************************************************************************************************************
2018-02-27 15:00:42,189 p=13247 u=qupeng |  TASK [tikv : create run script] ********************************************************************************************************************************************
2018-02-27 15:00:43,523 p=13247 u=qupeng |  ok: [tikv1] => (item=run)
2018-02-27 15:00:43,547 p=13247 u=qupeng |  ok: [tikv4] => (item=run)
2018-02-27 15:00:43,565 p=13247 u=qupeng |  ok: [tikv3] => (item=run)
2018-02-27 15:00:43,582 p=13247 u=qupeng |  ok: [tikv2] => (item=run)
2018-02-27 15:00:43,595 p=13247 u=qupeng |  ok: [tikv5] => (item=run)
2018-02-27 15:00:43,604 p=13247 u=qupeng |  TASK [tikv : backup script file] *******************************************************************************************************************************************
2018-02-27 15:00:43,682 p=13247 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-02-27 15:00:43,782 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/supervise_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-02-27 15:00:43,795 p=13247 u=qupeng |  TASK [tikv : deploy supervise] *********************************************************************************************************************************************
2018-02-27 15:00:46,538 p=13247 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:00:47,259 p=13247 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status/tikv)
2018-02-27 15:00:47,262 p=13247 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status/tikv)
2018-02-27 15:00:47,264 p=13247 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status/tikv)
2018-02-27 15:00:47,268 p=13247 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status/tikv)
2018-02-27 15:00:47,269 p=13247 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status/tikv)
2018-02-27 15:00:47,284 p=13247 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:00:48,567 p=13247 u=qupeng |  ok: [tikv2] => (item=supervise)
2018-02-27 15:00:48,575 p=13247 u=qupeng |  ok: [tikv1] => (item=supervise)
2018-02-27 15:00:48,674 p=13247 u=qupeng |  ok: [tikv3] => (item=supervise)
2018-02-27 15:00:48,687 p=13247 u=qupeng |  ok: [tikv4] => (item=supervise)
2018-02-27 15:00:48,702 p=13247 u=qupeng |  ok: [tikv5] => (item=supervise)
2018-02-27 15:00:49,824 p=13247 u=qupeng |  ok: [tikv2] => (item=svc)
2018-02-27 15:00:49,906 p=13247 u=qupeng |  ok: [tikv1] => (item=svc)
2018-02-27 15:00:49,953 p=13247 u=qupeng |  ok: [tikv5] => (item=svc)
2018-02-27 15:00:49,964 p=13247 u=qupeng |  ok: [tikv3] => (item=svc)
2018-02-27 15:00:50,012 p=13247 u=qupeng |  ok: [tikv4] => (item=svc)
2018-02-27 15:00:51,091 p=13247 u=qupeng |  ok: [tikv2] => (item=svstat)
2018-02-27 15:00:51,138 p=13247 u=qupeng |  ok: [tikv1] => (item=svstat)
2018-02-27 15:00:51,220 p=13247 u=qupeng |  ok: [tikv3] => (item=svstat)
2018-02-27 15:00:51,244 p=13247 u=qupeng |  ok: [tikv4] => (item=svstat)
2018-02-27 15:00:51,282 p=13247 u=qupeng |  ok: [tikv5] => (item=svstat)
2018-02-27 15:00:51,291 p=13247 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:00:52,648 p=13247 u=qupeng |  ok: [tikv1] => (item=start)
2018-02-27 15:00:52,651 p=13247 u=qupeng |  ok: [tikv3] => (item=start)
2018-02-27 15:00:52,662 p=13247 u=qupeng |  ok: [tikv2] => (item=start)
2018-02-27 15:00:52,681 p=13247 u=qupeng |  ok: [tikv5] => (item=start)
2018-02-27 15:00:52,707 p=13247 u=qupeng |  ok: [tikv4] => (item=start)
2018-02-27 15:00:53,949 p=13247 u=qupeng |  ok: [tikv4] => (item=stop)
2018-02-27 15:00:53,972 p=13247 u=qupeng |  ok: [tikv2] => (item=stop)
2018-02-27 15:00:53,991 p=13247 u=qupeng |  ok: [tikv1] => (item=stop)
2018-02-27 15:00:53,997 p=13247 u=qupeng |  ok: [tikv5] => (item=stop)
2018-02-27 15:00:54,017 p=13247 u=qupeng |  ok: [tikv3] => (item=stop)
2018-02-27 15:00:54,026 p=13247 u=qupeng |  TASK [tikv : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 15:00:54,088 p=13247 u=qupeng |  ok: [tikv1]
2018-02-27 15:00:54,104 p=13247 u=qupeng |  ok: [tikv2]
2018-02-27 15:00:54,108 p=13247 u=qupeng |  ok: [tikv3]
2018-02-27 15:00:54,134 p=13247 u=qupeng |  ok: [tikv4]
2018-02-27 15:00:54,140 p=13247 u=qupeng |  ok: [tikv5]
2018-02-27 15:00:54,147 p=13247 u=qupeng |  PLAY [deploying TiDB cluster] **********************************************************************************************************************************************
2018-02-27 15:00:54,160 p=13247 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:00:54,200 p=13247 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:00:54,233 p=13247 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:00:54,270 p=13247 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:00:54,297 p=13247 u=qupeng |  TASK [pump : create deploy directories] ************************************************************************************************************************************
2018-02-27 15:00:54,331 p=13247 u=qupeng |  TASK [pump : include] ******************************************************************************************************************************************************
2018-02-27 15:00:54,359 p=13247 u=qupeng |  TASK [pump : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 15:00:54,385 p=13247 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:00:55,173 p=13247 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/scripts)
2018-02-27 15:00:56,014 p=13247 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-02-27 15:00:56,704 p=13247 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/backup)
2018-02-27 15:00:56,720 p=13247 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:00:56,767 p=13247 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:00:57,668 p=13247 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/bin)
2018-02-27 15:00:57,676 p=13247 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:00:57,715 p=13247 u=qupeng |  TASK [tidb : create deploy directories] ************************************************************************************************************************************
2018-02-27 15:00:58,593 p=13247 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/log)
2018-02-27 15:00:59,304 p=13247 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-02-27 15:00:59,316 p=13247 u=qupeng |  TASK [tidb : load customized config] ***************************************************************************************************************************************
2018-02-27 15:00:59,366 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 15:00:59,378 p=13247 u=qupeng |  TASK [tidb : load default config] ******************************************************************************************************************************************
2018-02-27 15:00:59,441 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 15:00:59,455 p=13247 u=qupeng |  TASK [tidb : generate metrics config] **************************************************************************************************************************************
2018-02-27 15:00:59,549 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 15:00:59,562 p=13247 u=qupeng |  TASK [tidb : combine final config] *****************************************************************************************************************************************
2018-02-27 15:00:59,606 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 15:00:59,619 p=13247 u=qupeng |  TASK [tidb : debug] ********************************************************************************************************************************************************
2018-02-27 15:00:59,663 p=13247 u=qupeng |  ok: [tidb] => {
    "tidb_conf": {
        "global": {
            "enable-chunk": true, 
            "host": "0.0.0.0", 
            "lease": "10s", 
            "run-ddl": true, 
            "split-table": true, 
            "store": "tikv"
        }, 
        "log": {
            "disable-timestamp": false, 
            "file": {
                "log-rotate": true
            }, 
            "format": "text", 
            "level": "info", 
            "query-log-max-len": 2048, 
            "slow-threshold": 300
        }, 
        "opentracing": {
            "enable": false, 
            "reporter": {
                "buffer-flush-interval": 0, 
                "local-agent-host-port": "", 
                "log-spans": false, 
                "queue-size": 0
            }, 
            "rpc-metrics": false, 
            "sampler": {
                "max-operations": 0, 
                "param": 1.0, 
                "sampling-refresh-interval": 0, 
                "sampling-server-url": "", 
                "type": "const"
            }
        }, 
        "performance": {
            "cross-join": true, 
            "join-concurrency": 5, 
            "max-procs": 0, 
            "retry-limit": 10, 
            "run-auto-analyze": true, 
            "stats-lease": "3s", 
            "tcp-keep-alive": true
        }, 
        "plan_cache": {
            "capacity": 2560, 
            "enabled": false, 
            "shards": 256
        }, 
        "prepared_plan_cache": {
            "capacity": 100, 
            "enabled": false
        }, 
        "proxy_protocol": {
            "header-timeout": 5, 
            "networks": ""
        }, 
        "security": {
            "cluster-ssl-ca": "", 
            "cluster-ssl-cert": "", 
            "cluster-ssl-key": "", 
            "ssl-ca": "", 
            "ssl-cert": "", 
            "ssl-key": ""
        }, 
        "status": {
            "metrics-addr": "172.16.21.1:70011", 
            "metrics-interval": 15, 
            "report-status": true
        }, 
        "tikv_client": {
            "grpc-connection-count": 16
        }, 
        "xprotocol": {
            "xhost": "0.0.0.0", 
            "xport": 14000, 
            "xserver": false, 
            "xsocket": ""
        }
    }
}
2018-02-27 15:00:59,677 p=13247 u=qupeng |  TASK [tidb : create config file] *******************************************************************************************************************************************
2018-02-27 15:01:01,177 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 15:01:01,189 p=13247 u=qupeng |  TASK [tidb : backup conf file] *********************************************************************************************************************************************
2018-02-27 15:01:01,230 p=13247 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-02-27 15:01:01,275 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/binary_deployment.yml for tidb
2018-02-27 15:01:01,288 p=13247 u=qupeng |  TASK [tidb : deploy binary] ************************************************************************************************************************************************
2018-02-27 15:01:02,905 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 15:01:02,918 p=13247 u=qupeng |  TASK [tidb : backup binary file] *******************************************************************************************************************************************
2018-02-27 15:01:02,958 p=13247 u=qupeng |  TASK [tidb : create run script] ********************************************************************************************************************************************
2018-02-27 15:01:04,506 p=13247 u=qupeng |  ok: [tidb] => (item=run)
2018-02-27 15:01:04,523 p=13247 u=qupeng |  TASK [tidb : backup script file] *******************************************************************************************************************************************
2018-02-27 15:01:04,563 p=13247 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-02-27 15:01:04,608 p=13247 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/supervise_deployment.yml for tidb
2018-02-27 15:01:04,622 p=13247 u=qupeng |  TASK [tidb : deploy supervise] *********************************************************************************************************************************************
2018-02-27 15:01:05,249 p=13247 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:01:06,032 p=13247 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/status/tidb)
2018-02-27 15:01:06,045 p=13247 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:01:07,521 p=13247 u=qupeng |  ok: [tidb] => (item=supervise)
2018-02-27 15:01:08,927 p=13247 u=qupeng |  ok: [tidb] => (item=svc)
2018-02-27 15:01:10,428 p=13247 u=qupeng |  ok: [tidb] => (item=svstat)
2018-02-27 15:01:10,444 p=13247 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:01:11,897 p=13247 u=qupeng |  ok: [tidb] => (item=start)
2018-02-27 15:01:13,401 p=13247 u=qupeng |  ok: [tidb] => (item=stop)
2018-02-27 15:01:13,419 p=13247 u=qupeng |  TASK [tidb : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 15:01:13,479 p=13247 u=qupeng |  ok: [tidb]
2018-02-27 15:01:13,489 p=13247 u=qupeng |  PLAY [finalizing deployment target] ****************************************************************************************************************************************
2018-02-27 15:01:13,513 p=13247 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-02-27 15:01:13,674 p=13247 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-02-27 15:01:13,853 p=13247 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-02-27 15:01:14,051 p=13247 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-02-27 15:01:14,219 p=13247 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-02-27 15:01:14,386 p=13247 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-02-27 15:01:14,557 p=13247 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-02-27 15:01:14,742 p=13247 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-02-27 15:01:14,905 p=13247 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 15:01:14,905 p=13247 u=qupeng |  172.16.21.1                : ok=50   changed=1    unreachable=0    failed=0   
2018-02-27 15:01:14,905 p=13247 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-02-27 15:01:14,905 p=13247 u=qupeng |  monitoring                 : ok=39   changed=2    unreachable=0    failed=0   
2018-02-27 15:01:14,906 p=13247 u=qupeng |  pd                         : ok=29   changed=0    unreachable=0    failed=0   
2018-02-27 15:01:14,906 p=13247 u=qupeng |  tidb                       : ok=29   changed=0    unreachable=0    failed=0   
2018-02-27 15:01:14,906 p=13247 u=qupeng |  tikv1                      : ok=30   changed=0    unreachable=0    failed=0   
2018-02-27 15:01:14,906 p=13247 u=qupeng |  tikv2                      : ok=30   changed=0    unreachable=0    failed=0   
2018-02-27 15:01:14,906 p=13247 u=qupeng |  tikv3                      : ok=30   changed=0    unreachable=0    failed=0   
2018-02-27 15:01:14,906 p=13247 u=qupeng |  tikv4                      : ok=30   changed=0    unreachable=0    failed=0   
2018-02-27 15:01:14,906 p=13247 u=qupeng |  tikv5                      : ok=30   changed=0    unreachable=0    failed=0   
2018-02-27 15:01:14,907 p=13247 u=qupeng |  Congrats! All goes well. :-)
2018-02-27 15:01:30,437 p=29267 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 15:01:30,453 p=29267 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 15:01:30,479 p=29267 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 15:01:30,507 p=29267 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 15:01:30,528 p=29267 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 15:01:30,553 p=29267 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 15:01:30,579 p=29267 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 15:01:30,658 p=29267 u=qupeng |  ok: [localhost]
2018-02-27 15:01:30,665 p=29267 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-02-27 15:01:30,686 p=29267 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 15:01:30,849 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:30,871 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:30,897 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:30,919 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:30,920 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:30,979 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:31,011 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:31,035 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:31,042 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:31,053 p=29267 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 15:01:36,724 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:36,784 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:37,253 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:37,301 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:37,362 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:42,213 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:42,564 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:42,893 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:43,045 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:43,076 p=29267 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 15:01:44,041 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:44,054 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:44,067 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:44,081 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:44,083 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:44,800 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:44,809 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:44,842 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:44,849 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:44,857 p=29267 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 15:01:44,963 p=29267 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 15:01:45,063 p=29267 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 15:01:45,167 p=29267 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 15:01:45,208 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:45,218 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:45,244 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:45,257 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:45,258 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:45,258 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:45,278 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:45,282 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:45,285 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:45,292 p=29267 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 15:01:45,393 p=29267 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 15:01:45,493 p=29267 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 15:01:45,594 p=29267 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 15:01:46,387 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:46,402 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:46,420 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:46,437 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:46,439 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:47,161 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:47,171 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:47,176 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:47,188 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:47,201 p=29267 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 15:01:47,964 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:47,986 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:48,005 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:48,022 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:48,024 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:48,713 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:48,748 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:48,757 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:48,762 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:48,776 p=29267 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 15:01:48,902 p=29267 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 15:01:49,000 p=29267 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 15:01:49,987 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:50,019 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:50,043 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:50,057 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:50,059 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:50,887 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:50,897 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:50,902 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:50,910 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:50,922 p=29267 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 15:01:51,031 p=29267 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 15:01:51,130 p=29267 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 15:01:52,025 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:52,048 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:52,070 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:52,089 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:52,091 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:52,857 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:52,908 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:52,929 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:52,949 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:52,957 p=29267 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 15:01:53,827 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:53,858 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:53,890 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:53,905 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:53,907 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:54,696 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:54,757 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:54,769 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:54,799 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:54,811 p=29267 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-02-27 15:01:54,852 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:54,863 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:54,884 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:54,896 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:54,909 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:54,910 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:54,916 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:54,932 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:54,934 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:54,942 p=29267 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:01:54,998 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:55,010 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:55,023 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:55,037 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:55,054 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:55,060 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:55,070 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:55,071 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:55,079 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:55,086 p=29267 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:01:55,141 p=29267 u=qupeng |  ok: [monitoring]
2018-02-27 15:01:55,152 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:55,166 p=29267 u=qupeng |  ok: [pd]
2018-02-27 15:01:55,177 p=29267 u=qupeng |  ok: [tidb]
2018-02-27 15:01:55,186 p=29267 u=qupeng |  ok: [tikv2]
2018-02-27 15:01:55,190 p=29267 u=qupeng |  ok: [tikv3]
2018-02-27 15:01:55,193 p=29267 u=qupeng |  ok: [tikv1]
2018-02-27 15:01:55,209 p=29267 u=qupeng |  ok: [tikv4]
2018-02-27 15:01:55,222 p=29267 u=qupeng |  ok: [tikv5]
2018-02-27 15:01:55,229 p=29267 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-02-27 15:01:55,236 p=29267 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-02-27 15:01:56,151 p=29267 u=qupeng |  changed: [172.16.21.1] => (item=node_exporter)
2018-02-27 15:01:56,165 p=29267 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-02-27 15:01:56,198 p=29267 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-02-27 15:01:56,235 p=29267 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:01:58,103 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:01:58,111 p=29267 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-02-27 15:01:58,125 p=29267 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-02-27 15:01:59,088 p=29267 u=qupeng |  changed: [172.16.21.1] => (item=blackbox_exporter)
2018-02-27 15:01:59,103 p=29267 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-02-27 15:01:59,138 p=29267 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-02-27 15:01:59,175 p=29267 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:02:00,864 p=29267 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:02:00,874 p=29267 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-02-27 15:02:00,889 p=29267 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-02-27 15:02:01,845 p=29267 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-02-27 15:02:02,776 p=29267 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-02-27 15:02:02,790 p=29267 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-02-27 15:02:02,828 p=29267 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-02-27 15:02:02,872 p=29267 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-02-27 15:07:03,981 p=29267 u=qupeng |  fatal: [monitoring]: FAILED! => {"changed": false, "elapsed": 300, "msg": "Timeout when waiting for search string 200 OK in 172.16.21.1:70011"}
2018-02-27 15:07:03,982 fail [monitoring]: Ansible FAILED! => playbook: start.yml; TASK: wait pushgateway up; message: {"changed": false, "elapsed": 300, "msg": "Timeout when waiting for search string 200 OK in 172.16.21.1:70011"}
2018-02-27 15:07:03,984 p=29267 u=qupeng |  	to retry, use: --limit @/home/qupeng/ansible/tidb-ansible/retry_files/start.retry

2018-02-27 15:07:03,984 p=29267 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 15:07:03,985 p=29267 u=qupeng |  172.16.21.1                : ok=16   changed=2    unreachable=0    failed=0   
2018-02-27 15:07:03,985 p=29267 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-02-27 15:07:03,985 p=29267 u=qupeng |  monitoring                 : ok=13   changed=1    unreachable=0    failed=1   
2018-02-27 15:07:03,986 p=29267 u=qupeng |  pd                         : ok=12   changed=0    unreachable=0    failed=0   
2018-02-27 15:07:03,986 p=29267 u=qupeng |  tidb                       : ok=12   changed=0    unreachable=0    failed=0   
2018-02-27 15:07:03,986 p=29267 u=qupeng |  tikv1                      : ok=12   changed=0    unreachable=0    failed=0   
2018-02-27 15:07:03,986 p=29267 u=qupeng |  tikv2                      : ok=12   changed=0    unreachable=0    failed=0   
2018-02-27 15:07:03,986 p=29267 u=qupeng |  tikv3                      : ok=12   changed=0    unreachable=0    failed=0   
2018-02-27 15:07:03,987 p=29267 u=qupeng |  tikv4                      : ok=12   changed=0    unreachable=0    failed=0   
2018-02-27 15:07:03,987 p=29267 u=qupeng |  tikv5                      : ok=12   changed=0    unreachable=0    failed=0   
2018-02-27 15:07:03,987 p=29267 u=qupeng |  ERROR MESSAGE SUMMARY ******************************************************************************************************************************************************
2018-02-27 15:07:03,988 p=29267 u=qupeng |  [monitoring]: Ansible FAILED! => playbook: start.yml; TASK: wait pushgateway up; message: {"changed": false, "elapsed": 300, "msg": "Timeout when waiting for search string 200 OK in 172.16.21.1:70011"}

2018-02-27 15:07:03,988 p=29267 u=qupeng |  Ask for help:
2018-02-27 15:07:03,988 p=29267 u=qupeng |  Contact us: sre@pingcap.com
2018-02-27 15:07:03,988 p=29267 u=qupeng |  It seems that you encounter some problems. You can send an email to the above email address, attached with the tidb-ansible/inventory.ini and tidb-ansible/log/ansible.log files and the error message, or new issue on https://github.com/pingcap/tidb-ansible/issues. We'll try our best to help you deploy a TiDB cluster. Thanks. :-)
2018-02-27 15:08:49,559 p=53765 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 15:08:49,579 p=53765 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 15:08:49,607 p=53765 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 15:08:49,633 p=53765 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 15:08:49,653 p=53765 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 15:08:49,676 p=53765 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 15:08:49,699 p=53765 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 15:08:49,775 p=53765 u=qupeng |  ok: [localhost]
2018-02-27 15:08:49,782 p=53765 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-02-27 15:08:49,804 p=53765 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 15:08:49,969 p=53765 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:08:49,990 p=53765 u=qupeng |  ok: [monitoring]
2018-02-27 15:08:50,008 p=53765 u=qupeng |  ok: [pd]
2018-02-27 15:08:50,023 p=53765 u=qupeng |  ok: [tikv1]
2018-02-27 15:08:50,024 p=53765 u=qupeng |  ok: [tidb]
2018-02-27 15:08:50,094 p=53765 u=qupeng |  ok: [tikv2]
2018-02-27 15:08:50,113 p=53765 u=qupeng |  ok: [tikv3]
2018-02-27 15:08:50,122 p=53765 u=qupeng |  ok: [tikv4]
2018-02-27 15:08:50,155 p=53765 u=qupeng |  ok: [tikv5]
2018-02-27 15:08:50,164 p=53765 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 15:08:55,921 p=53765 u=qupeng |  ok: [tikv1]
2018-02-27 15:08:55,971 p=53765 u=qupeng |  ok: [tidb]
2018-02-27 15:08:56,275 p=53765 u=qupeng |  ok: [pd]
2018-02-27 15:08:57,051 p=53765 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:08:57,228 p=53765 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:01,886 p=53765 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:02,524 p=53765 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:02,596 p=53765 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:02,742 p=53765 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:02,772 p=53765 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 15:09:03,672 p=53765 u=qupeng |  ok: [pd]
2018-02-27 15:09:03,685 p=53765 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:03,697 p=53765 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:03,710 p=53765 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:03,715 p=53765 u=qupeng |  ok: [tidb]
2018-02-27 15:09:04,415 p=53765 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:04,457 p=53765 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:04,475 p=53765 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:04,484 p=53765 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:04,492 p=53765 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 15:09:04,599 p=53765 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 15:09:04,699 p=53765 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 15:09:04,802 p=53765 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 15:09:04,851 p=53765 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:04,862 p=53765 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:04,875 p=53765 u=qupeng |  ok: [pd]
2018-02-27 15:09:04,888 p=53765 u=qupeng |  ok: [tidb]
2018-02-27 15:09:04,889 p=53765 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:04,889 p=53765 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:04,905 p=53765 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:04,909 p=53765 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:04,923 p=53765 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:04,931 p=53765 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 15:09:05,042 p=53765 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 15:09:05,149 p=53765 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 15:09:05,256 p=53765 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 15:09:06,034 p=53765 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:06,057 p=53765 u=qupeng |  ok: [pd]
2018-02-27 15:09:06,077 p=53765 u=qupeng |  ok: [tidb]
2018-02-27 15:09:06,094 p=53765 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:06,096 p=53765 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:06,777 p=53765 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:06,779 p=53765 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:06,801 p=53765 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:06,823 p=53765 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:06,832 p=53765 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 15:09:07,604 p=53765 u=qupeng |  ok: [tidb]
2018-02-27 15:09:07,618 p=53765 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:07,633 p=53765 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:07,646 p=53765 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:07,648 p=53765 u=qupeng |  ok: [pd]
2018-02-27 15:09:08,368 p=53765 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:08,375 p=53765 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:08,376 p=53765 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:08,405 p=53765 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:08,419 p=53765 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 15:09:08,555 p=53765 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 15:09:08,673 p=53765 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 15:09:09,707 p=53765 u=qupeng |  ok: [pd]
2018-02-27 15:09:09,735 p=53765 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:09,752 p=53765 u=qupeng |  ok: [tidb]
2018-02-27 15:09:09,766 p=53765 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:09,768 p=53765 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:10,580 p=53765 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:10,602 p=53765 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:10,607 p=53765 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:10,616 p=53765 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:10,626 p=53765 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 15:09:10,738 p=53765 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 15:09:10,841 p=53765 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 15:09:11,746 p=53765 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:11,767 p=53765 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:11,787 p=53765 u=qupeng |  ok: [tidb]
2018-02-27 15:09:11,804 p=53765 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:11,806 p=53765 u=qupeng |  ok: [pd]
2018-02-27 15:09:12,613 p=53765 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:12,637 p=53765 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:12,641 p=53765 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:12,674 p=53765 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:12,689 p=53765 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 15:09:13,528 p=53765 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:13,584 p=53765 u=qupeng |  ok: [pd]
2018-02-27 15:09:13,611 p=53765 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:13,629 p=53765 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:13,630 p=53765 u=qupeng |  ok: [tidb]
2018-02-27 15:09:14,098 p=53765 u=qupeng |   [ERROR]: User interrupted execution

2018-02-27 15:09:35,405 p=59784 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 15:09:35,424 p=59784 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 15:09:35,451 p=59784 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 15:09:35,475 p=59784 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 15:09:35,493 p=59784 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 15:09:35,516 p=59784 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 15:09:35,541 p=59784 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 15:09:35,609 p=59784 u=qupeng |  ok: [localhost]
2018-02-27 15:09:35,617 p=59784 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-02-27 15:09:35,643 p=59784 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 15:09:35,807 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:35,823 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:35,838 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:09:35,853 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:09:35,854 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:35,938 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:35,952 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:35,969 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:35,973 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:35,982 p=59784 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 15:09:41,753 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:41,970 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:42,021 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:09:42,944 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:09:43,015 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:47,405 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:47,439 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:47,474 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:48,577 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:48,605 p=59784 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 15:09:49,522 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:49,541 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:49,556 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:09:49,574 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:09:49,576 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:50,264 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:50,265 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:50,269 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:50,326 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:50,335 p=59784 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 15:09:50,431 p=59784 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 15:09:50,538 p=59784 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 15:09:50,636 p=59784 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 15:09:50,677 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:50,688 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:50,698 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:09:50,720 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:50,721 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:09:50,721 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:50,725 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:50,752 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:50,761 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:50,773 p=59784 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 15:09:50,885 p=59784 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 15:09:50,983 p=59784 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 15:09:51,078 p=59784 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 15:09:51,830 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:09:51,868 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:51,887 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:51,903 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:51,904 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:09:52,575 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:52,604 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:52,650 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:52,663 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:52,674 p=59784 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 15:09:53,387 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:53,402 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:53,429 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:09:53,463 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:53,465 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:09:54,129 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:54,130 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:54,144 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:54,221 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:54,237 p=59784 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 15:09:54,380 p=59784 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 15:09:54,486 p=59784 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 15:09:55,501 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:55,524 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:55,544 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:09:55,561 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:55,563 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:09:56,317 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:56,388 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:56,432 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:56,435 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:56,443 p=59784 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 15:09:56,553 p=59784 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 15:09:56,659 p=59784 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 15:09:57,551 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:57,575 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:09:57,595 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:57,614 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:09:57,617 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:09:58,410 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:09:58,449 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:09:58,468 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:09:58,497 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:09:58,511 p=59784 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 15:09:59,401 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:09:59,434 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:09:59,450 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:09:59,463 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:09:59,464 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:10:00,220 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:10:00,228 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:10:00,301 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:10:00,329 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:10:00,338 p=59784 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-02-27 15:10:00,393 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:10:00,404 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:10:00,415 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:10:00,428 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:10:00,429 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:10:00,430 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:10:00,449 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:10:00,452 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:10:00,464 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:10:00,475 p=59784 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:10:00,532 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:10:00,578 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:10:00,591 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:10:00,602 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:10:00,603 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:10:00,604 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:10:00,618 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:10:00,639 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:10:00,646 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:10:00,653 p=59784 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:10:00,705 p=59784 u=qupeng |  ok: [monitoring]
2018-02-27 15:10:00,718 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:10:00,730 p=59784 u=qupeng |  ok: [tidb]
2018-02-27 15:10:00,747 p=59784 u=qupeng |  ok: [pd]
2018-02-27 15:10:00,748 p=59784 u=qupeng |  ok: [tikv2]
2018-02-27 15:10:00,758 p=59784 u=qupeng |  ok: [tikv1]
2018-02-27 15:10:00,763 p=59784 u=qupeng |  ok: [tikv3]
2018-02-27 15:10:00,769 p=59784 u=qupeng |  ok: [tikv4]
2018-02-27 15:10:00,797 p=59784 u=qupeng |  ok: [tikv5]
2018-02-27 15:10:00,803 p=59784 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-02-27 15:10:00,810 p=59784 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-02-27 15:10:01,683 p=59784 u=qupeng |  changed: [172.16.21.1] => (item=node_exporter)
2018-02-27 15:10:01,690 p=59784 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-02-27 15:10:01,717 p=59784 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-02-27 15:10:01,749 p=59784 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:10:03,635 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:10:03,642 p=59784 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-02-27 15:10:03,652 p=59784 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-02-27 15:10:04,594 p=59784 u=qupeng |  changed: [172.16.21.1] => (item=blackbox_exporter)
2018-02-27 15:10:04,604 p=59784 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-02-27 15:10:04,635 p=59784 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-02-27 15:10:04,662 p=59784 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:10:06,339 p=59784 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:10:06,347 p=59784 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-02-27 15:10:06,360 p=59784 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-02-27 15:10:07,297 p=59784 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-02-27 15:10:08,207 p=59784 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-02-27 15:10:08,218 p=59784 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-02-27 15:10:08,262 p=59784 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-02-27 15:10:08,298 p=59784 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-02-27 15:12:13,496 p=59784 u=qupeng |   [ERROR]: User interrupted execution

2018-02-27 15:13:34,152 p=75932 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 15:13:34,166 p=75932 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 15:13:34,192 p=75932 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 15:13:34,219 p=75932 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 15:13:34,239 p=75932 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 15:13:34,263 p=75932 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 15:13:34,288 p=75932 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 15:13:34,355 p=75932 u=qupeng |  ok: [localhost]
2018-02-27 15:13:34,362 p=75932 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-02-27 15:13:34,389 p=75932 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 15:13:34,544 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:34,574 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:13:34,599 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:34,618 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:13:34,620 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:13:34,668 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:13:34,699 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:13:34,730 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:13:34,748 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:13:34,760 p=75932 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 15:13:40,664 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:40,887 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:13:41,122 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:13:41,818 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:13:41,867 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:46,155 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:13:46,508 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:13:46,661 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:13:47,705 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:13:47,734 p=75932 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 15:13:48,683 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:13:48,701 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:13:48,716 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:48,739 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:13:48,743 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:49,377 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:13:49,414 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:13:49,426 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:13:49,469 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:13:49,482 p=75932 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 15:13:49,624 p=75932 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 15:13:49,760 p=75932 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 15:13:49,910 p=75932 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 15:13:49,969 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:49,983 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:49,995 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:13:50,007 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:13:50,008 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:13:50,013 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:13:50,016 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:13:50,034 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:13:50,035 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:13:50,042 p=75932 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 15:13:50,145 p=75932 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 15:13:50,261 p=75932 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 15:13:50,401 p=75932 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 15:13:51,178 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:13:51,203 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:51,220 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:51,235 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:13:51,236 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:13:51,913 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:13:51,930 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:13:51,969 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:13:51,995 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:13:52,003 p=75932 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 15:13:52,756 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:52,776 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:13:52,793 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:13:52,809 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:52,811 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:13:53,538 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:13:53,541 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:13:53,555 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:13:53,564 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:13:53,576 p=75932 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 15:13:53,710 p=75932 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 15:13:53,815 p=75932 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 15:13:54,821 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:13:54,837 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:13:54,852 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:54,866 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:13:54,887 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:55,688 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:13:55,692 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:13:55,718 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:13:55,763 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:13:55,771 p=75932 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 15:13:55,888 p=75932 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 15:13:56,004 p=75932 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 15:13:56,919 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:13:56,938 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:13:56,957 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:56,972 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:56,974 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:13:57,787 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:13:57,799 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:13:57,814 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:13:57,832 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:13:57,840 p=75932 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 15:13:58,679 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:58,706 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:13:58,725 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:13:58,745 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:58,790 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:13:59,564 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:13:59,568 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:13:59,588 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:13:59,611 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:13:59,622 p=75932 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-02-27 15:13:59,663 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:59,687 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:59,700 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:13:59,714 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:13:59,726 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:13:59,727 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:13:59,730 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:13:59,741 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:13:59,751 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:13:59,758 p=75932 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:13:59,813 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:59,825 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:59,849 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:13:59,863 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:13:59,864 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:13:59,865 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:13:59,874 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:13:59,898 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:13:59,903 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:13:59,911 p=75932 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:13:59,966 p=75932 u=qupeng |  ok: [tidb]
2018-02-27 15:13:59,979 p=75932 u=qupeng |  ok: [tikv1]
2018-02-27 15:13:59,992 p=75932 u=qupeng |  ok: [tikv2]
2018-02-27 15:14:00,009 p=75932 u=qupeng |  ok: [tikv5]
2018-02-27 15:14:00,011 p=75932 u=qupeng |  ok: [tikv3]
2018-02-27 15:14:00,022 p=75932 u=qupeng |  ok: [tikv4]
2018-02-27 15:14:00,024 p=75932 u=qupeng |  ok: [pd]
2018-02-27 15:14:00,036 p=75932 u=qupeng |  ok: [monitoring]
2018-02-27 15:14:00,048 p=75932 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:14:00,053 p=75932 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-02-27 15:14:00,062 p=75932 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-02-27 15:14:00,841 p=75932 u=qupeng |  failed: [tidb] (item=node_exporter) => {"changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tidb/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.120133", "end": "2018-02-27 15:14:00.808382", "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.688249", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}
2018-02-27 15:14:00,843 fail [tidb]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tidb/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.120133", "end": "2018-02-27 15:14:00.808382", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tidb/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.688249", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}
2018-02-27 15:14:00,856 p=75932 u=qupeng |  failed: [tikv1] (item=node_exporter) => {"changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv1/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.097127", "end": "2018-02-27 15:14:00.821175", "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.724048", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}
2018-02-27 15:14:00,857 fail [tikv1]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv1/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.097127", "end": "2018-02-27 15:14:00.821175", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tikv1/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.724048", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}
2018-02-27 15:14:00,877 p=75932 u=qupeng |  failed: [tikv4] (item=node_exporter) => {"changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv4/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.131915", "end": "2018-02-27 15:14:00.858252", "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.726337", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}
2018-02-27 15:14:00,879 fail [tikv4]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv4/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.131915", "end": "2018-02-27 15:14:00.858252", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tikv4/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.726337", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}
2018-02-27 15:14:00,880 p=75932 u=qupeng |  failed: [tikv2] (item=node_exporter) => {"changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv2/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.142260", "end": "2018-02-27 15:14:00.860885", "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.718625", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}
2018-02-27 15:14:00,881 fail [tikv2]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv2/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.142260", "end": "2018-02-27 15:14:00.860885", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tikv2/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.718625", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}
2018-02-27 15:14:00,894 p=75932 u=qupeng |  failed: [tikv3] (item=node_exporter) => {"changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv3/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.139678", "end": "2018-02-27 15:14:00.876475", "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.736797", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}
2018-02-27 15:14:00,895 fail [tikv3]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv3/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.139678", "end": "2018-02-27 15:14:00.876475", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tikv3/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.736797", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}
2018-02-27 15:14:01,598 p=75932 u=qupeng |  failed: [tikv5] (item=node_exporter) => {"changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv5/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.086808", "end": "2018-02-27 15:14:01.574690", "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:01.487882", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}
2018-02-27 15:14:01,600 fail [tikv5]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv5/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.086808", "end": "2018-02-27 15:14:01.574690", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tikv5/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:01.487882", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}
2018-02-27 15:14:01,651 p=75932 u=qupeng |  failed: [pd] (item=node_exporter) => {"changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/pd/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.127187", "end": "2018-02-27 15:14:01.624765", "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:01.497578", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}
2018-02-27 15:14:01,652 fail [pd]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/pd/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.127187", "end": "2018-02-27 15:14:01.624765", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/pd/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:01.497578", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}
2018-02-27 15:14:01,654 p=75932 u=qupeng |  	to retry, use: --limit @/home/qupeng/ansible/tidb-ansible/retry_files/start.retry

2018-02-27 15:14:01,654 p=75932 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 15:14:01,654 p=75932 u=qupeng |  172.16.21.1                : ok=12   changed=0    unreachable=0    failed=0   
2018-02-27 15:14:01,654 p=75932 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-02-27 15:14:01,654 p=75932 u=qupeng |  monitoring                 : ok=12   changed=0    unreachable=0    failed=0   
2018-02-27 15:14:01,654 p=75932 u=qupeng |  pd                         : ok=12   changed=0    unreachable=0    failed=1   
2018-02-27 15:14:01,655 p=75932 u=qupeng |  tidb                       : ok=12   changed=0    unreachable=0    failed=1   
2018-02-27 15:14:01,655 p=75932 u=qupeng |  tikv1                      : ok=12   changed=0    unreachable=0    failed=1   
2018-02-27 15:14:01,655 p=75932 u=qupeng |  tikv2                      : ok=12   changed=0    unreachable=0    failed=1   
2018-02-27 15:14:01,655 p=75932 u=qupeng |  tikv3                      : ok=12   changed=0    unreachable=0    failed=1   
2018-02-27 15:14:01,655 p=75932 u=qupeng |  tikv4                      : ok=12   changed=0    unreachable=0    failed=1   
2018-02-27 15:14:01,655 p=75932 u=qupeng |  tikv5                      : ok=12   changed=0    unreachable=0    failed=1   
2018-02-27 15:14:01,655 p=75932 u=qupeng |  ERROR MESSAGE SUMMARY ******************************************************************************************************************************************************
2018-02-27 15:14:01,656 p=75932 u=qupeng |  [tidb]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tidb/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.120133", "end": "2018-02-27 15:14:00.808382", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tidb/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.688249", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}

2018-02-27 15:14:01,656 p=75932 u=qupeng |  [tikv1]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv1/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.097127", "end": "2018-02-27 15:14:00.821175", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tikv1/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.724048", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}

2018-02-27 15:14:01,656 p=75932 u=qupeng |  [tikv4]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv4/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.131915", "end": "2018-02-27 15:14:00.858252", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tikv4/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.726337", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}

2018-02-27 15:14:01,656 p=75932 u=qupeng |  [tikv2]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv2/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.142260", "end": "2018-02-27 15:14:00.860885", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tikv2/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.718625", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}

2018-02-27 15:14:01,656 p=75932 u=qupeng |  [tikv3]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv3/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.139678", "end": "2018-02-27 15:14:00.876475", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tikv3/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:00.736797", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}

2018-02-27 15:14:01,656 p=75932 u=qupeng |  [tikv5]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/tikv5/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.086808", "end": "2018-02-27 15:14:01.574690", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/tikv5/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:01.487882", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}

2018-02-27 15:14:01,657 p=75932 u=qupeng |  [pd]: Ansible FAILED! => playbook: start.yml; TASK: start node_exporter by supervise; message: {"changed": true, "msg": "All items completed", "results": [{"_ansible_item_result": true, "_ansible_no_log": false, "_ansible_parsed": true, "changed": true, "cmd": "cd /data3/qupeng/raftstore-learner/pd/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "delta": "0:00:00.127187", "end": "2018-02-27 15:14:01.624765", "failed": true, "invocation": {"module_args": {"_raw_params": "cd /data3/qupeng/raftstore-learner/pd/scripts && (./stop_node_exporter.sh; ./start_node_exporter.sh)", "_uses_shell": true, "chdir": null, "creates": null, "executable": null, "removes": null, "stdin": null, "warn": true}}, "item": "node_exporter", "msg": "non-zero return code", "rc": 127, "start": "2018-02-27 15:14:01.497578", "stderr": "/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录\n/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录", "stderr_lines": ["/bin/sh: ./stop_node_exporter.sh: 没有那个文件或目录", "/bin/sh: ./start_node_exporter.sh: 没有那个文件或目录"], "stdout": "", "stdout_lines": []}]}

2018-02-27 15:14:01,657 p=75932 u=qupeng |  Ask for help:
2018-02-27 15:14:01,657 p=75932 u=qupeng |  Contact us: sre@pingcap.com
2018-02-27 15:14:01,657 p=75932 u=qupeng |  It seems that you encounter some problems. You can send an email to the above email address, attached with the tidb-ansible/inventory.ini and tidb-ansible/log/ansible.log files and the error message, or new issue on https://github.com/pingcap/tidb-ansible/issues. We'll try our best to help you deploy a TiDB cluster. Thanks. :-)
2018-02-27 15:15:36,108 p=86106 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 15:15:36,126 p=86106 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 15:15:36,155 p=86106 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 15:15:36,179 p=86106 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 15:15:36,198 p=86106 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 15:15:36,220 p=86106 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 15:15:36,241 p=86106 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 15:15:36,312 p=86106 u=qupeng |  ok: [localhost]
2018-02-27 15:15:36,320 p=86106 u=qupeng |  PLAY [initializing deployment target] **************************************************************************************************************************************
2018-02-27 15:15:36,346 p=86106 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 15:15:36,494 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:15:36,519 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:15:36,538 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:15:36,555 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:15:36,556 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:15:36,644 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:15:36,649 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:15:36,665 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:15:36,689 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:15:36,698 p=86106 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 15:15:42,462 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:15:42,559 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:15:42,684 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:15:42,796 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:15:43,549 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:15:47,950 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:15:48,128 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:15:48,376 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:15:49,041 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:15:49,069 p=86106 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 15:15:50,016 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:15:50,033 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:15:50,048 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:15:50,065 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:15:50,066 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:15:50,737 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:15:50,752 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:15:50,777 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:15:50,780 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:15:50,791 p=86106 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 15:15:50,930 p=86106 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 15:15:51,059 p=86106 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 15:15:51,197 p=86106 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 15:15:51,240 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:15:51,254 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:15:51,271 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:15:51,299 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:15:51,314 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:15:51,315 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:15:51,329 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:15:51,337 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:15:51,344 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:15:51,355 p=86106 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 15:15:51,485 p=86106 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 15:15:51,619 p=86106 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 15:15:51,763 p=86106 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 15:15:52,463 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:15:52,537 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:15:52,552 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:15:52,565 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:15:52,567 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:15:53,225 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:15:53,279 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:15:53,300 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:15:53,342 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:15:53,352 p=86106 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 15:15:54,068 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:15:54,088 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:15:54,113 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:15:54,135 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:15:54,146 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:15:54,767 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:15:54,843 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:15:54,867 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:15:54,868 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:15:54,878 p=86106 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 15:15:55,022 p=86106 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 15:15:55,165 p=86106 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 15:15:56,178 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:15:56,206 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:15:56,226 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:15:56,245 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:15:56,247 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:15:56,982 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:15:57,078 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:15:57,080 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:15:57,082 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:15:57,098 p=86106 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 15:15:57,235 p=86106 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 15:15:57,357 p=86106 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 15:15:58,177 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:15:58,216 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:15:58,264 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:15:58,280 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:15:58,282 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:15:59,019 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:15:59,092 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:15:59,129 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:15:59,146 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:15:59,157 p=86106 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 15:16:00,047 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:16:00,073 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:16:00,093 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:16:00,109 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:16:00,111 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:16:00,917 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:16:00,934 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:16:00,953 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:16:01,079 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:16:01,095 p=86106 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-02-27 15:16:01,148 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:16:01,163 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:16:01,179 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:16:01,195 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:16:01,210 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:16:01,225 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:16:01,227 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:16:01,233 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:16:01,254 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:16:01,264 p=86106 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:16:01,318 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:16:01,357 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:16:01,371 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:16:01,383 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:16:01,384 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:16:01,388 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:16:01,407 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:16:01,410 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:16:01,433 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:16:01,442 p=86106 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:16:01,494 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:16:01,508 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:16:01,537 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:16:01,553 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:16:01,554 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:16:01,560 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:16:01,568 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:16:01,581 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:16:01,599 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:16:01,608 p=86106 u=qupeng |  PLAY [deploying monitoring agent] ******************************************************************************************************************************************
2018-02-27 15:16:01,623 p=86106 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:16:02,416 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-02-27 15:16:03,107 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-02-27 15:16:03,800 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-02-27 15:16:03,812 p=86106 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:16:03,854 p=86106 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:16:04,533 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-02-27 15:16:04,548 p=86106 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:16:04,589 p=86106 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-02-27 15:16:04,637 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/binary_deployment.yml for pd
2018-02-27 15:16:04,646 p=86106 u=qupeng |  TASK [node_exporter : create deploy directories] ***************************************************************************************************************************
2018-02-27 15:16:05,378 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-02-27 15:16:05,392 p=86106 u=qupeng |  TASK [node_exporter : deploy node_exporter binary] *************************************************************************************************************************
2018-02-27 15:16:07,675 p=86106 u=qupeng |  changed: [pd]
2018-02-27 15:16:07,695 p=86106 u=qupeng |  TASK [node_exporter : create run script] ***********************************************************************************************************************************
2018-02-27 15:16:09,011 p=86106 u=qupeng |  changed: [pd] => (item=run)
2018-02-27 15:16:09,027 p=86106 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-02-27 15:16:09,070 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/supervise_deployment.yml for pd
2018-02-27 15:16:09,084 p=86106 u=qupeng |  TASK [node_exporter : deploy supervise] ************************************************************************************************************************************
2018-02-27 15:16:09,657 p=86106 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:16:10,389 p=86106 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/node_exporter)
2018-02-27 15:16:10,397 p=86106 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:16:11,780 p=86106 u=qupeng |  ok: [pd] => (item=supervise)
2018-02-27 15:16:13,222 p=86106 u=qupeng |  ok: [pd] => (item=svc)
2018-02-27 15:16:14,550 p=86106 u=qupeng |  ok: [pd] => (item=svstat)
2018-02-27 15:16:14,566 p=86106 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:16:15,987 p=86106 u=qupeng |  changed: [pd] => (item=start)
2018-02-27 15:16:17,456 p=86106 u=qupeng |  changed: [pd] => (item=stop)
2018-02-27 15:16:17,467 p=86106 u=qupeng |  TASK [node_exporter : prepare firewalld white list] ************************************************************************************************************************
2018-02-27 15:16:17,583 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:16:17,600 p=86106 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-02-27 15:16:17,637 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/binary_deployment.yml for pd
2018-02-27 15:16:17,644 p=86106 u=qupeng |  TASK [blackbox_exporter : create deploy directories] ***********************************************************************************************************************
2018-02-27 15:16:18,432 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-02-27 15:16:18,448 p=86106 u=qupeng |  TASK [blackbox_exporter : deploy blackbox_exporter binary] *****************************************************************************************************************
2018-02-27 15:16:20,811 p=86106 u=qupeng |  changed: [pd]
2018-02-27 15:16:20,826 p=86106 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-02-27 15:16:20,863 p=86106 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-02-27 15:16:21,723 p=86106 u=qupeng |  changed: [pd]
2018-02-27 15:16:21,736 p=86106 u=qupeng |  TASK [blackbox_exporter : create run script] *******************************************************************************************************************************
2018-02-27 15:16:23,102 p=86106 u=qupeng |  changed: [pd] => (item=run)
2018-02-27 15:16:23,117 p=86106 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-02-27 15:16:23,172 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/supervise_deployment.yml for pd
2018-02-27 15:16:23,184 p=86106 u=qupeng |  TASK [blackbox_exporter : deploy supervise] ********************************************************************************************************************************
2018-02-27 15:16:23,859 p=86106 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:16:24,589 p=86106 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/blackbox_exporter)
2018-02-27 15:16:24,605 p=86106 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:16:26,055 p=86106 u=qupeng |  ok: [pd] => (item=supervise)
2018-02-27 15:16:27,489 p=86106 u=qupeng |  ok: [pd] => (item=svc)
2018-02-27 15:16:28,893 p=86106 u=qupeng |  ok: [pd] => (item=svstat)
2018-02-27 15:16:28,922 p=86106 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:16:30,291 p=86106 u=qupeng |  changed: [pd] => (item=start)
2018-02-27 15:16:31,642 p=86106 u=qupeng |  changed: [pd] => (item=stop)
2018-02-27 15:16:31,659 p=86106 u=qupeng |  TASK [blackbox_exporter : create config file] ******************************************************************************************************************************
2018-02-27 15:16:32,999 p=86106 u=qupeng |  changed: [pd]
2018-02-27 15:16:33,014 p=86106 u=qupeng |  TASK [blackbox_exporter : backup conf file] ********************************************************************************************************************************
2018-02-27 15:16:33,056 p=86106 u=qupeng |  TASK [blackbox_exporter : prepare firewalld white list] ********************************************************************************************************************
2018-02-27 15:16:33,103 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:16:33,114 p=86106 u=qupeng |  PLAY [deploying monitoring server] *****************************************************************************************************************************************
2018-02-27 15:16:33,135 p=86106 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:16:33,800 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 15:16:34,480 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 15:16:35,152 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 15:16:35,167 p=86106 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:16:35,213 p=86106 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:16:35,918 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 15:16:35,931 p=86106 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:16:35,967 p=86106 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-02-27 15:16:36,007 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/binary_deployment.yml for monitoring
2018-02-27 15:16:36,018 p=86106 u=qupeng |  TASK [pushgateway : create deploy directories] *****************************************************************************************************************************
2018-02-27 15:16:36,724 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 15:16:36,735 p=86106 u=qupeng |  TASK [pushgateway : deploy pushgateway binary] *****************************************************************************************************************************
2018-02-27 15:16:38,192 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:16:38,204 p=86106 u=qupeng |  TASK [pushgateway : create run script] *************************************************************************************************************************************
2018-02-27 15:16:39,608 p=86106 u=qupeng |  ok: [monitoring] => (item=run)
2018-02-27 15:16:39,623 p=86106 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-02-27 15:16:39,671 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/supervise_deployment.yml for monitoring
2018-02-27 15:16:39,686 p=86106 u=qupeng |  TASK [pushgateway : deploy supervise] **************************************************************************************************************************************
2018-02-27 15:16:40,400 p=86106 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:16:41,173 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/pushgateway)
2018-02-27 15:16:41,187 p=86106 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:16:42,636 p=86106 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-02-27 15:16:44,065 p=86106 u=qupeng |  ok: [monitoring] => (item=svc)
2018-02-27 15:16:45,439 p=86106 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-02-27 15:16:45,454 p=86106 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:16:46,994 p=86106 u=qupeng |  ok: [monitoring] => (item=start)
2018-02-27 15:16:48,508 p=86106 u=qupeng |  ok: [monitoring] => (item=stop)
2018-02-27 15:16:48,526 p=86106 u=qupeng |  TASK [pushgateway : prepare firewalld white list] **************************************************************************************************************************
2018-02-27 15:16:48,588 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:16:48,604 p=86106 u=qupeng |  TASK [prometheus : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:16:49,316 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 15:16:50,002 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-02-27 15:16:50,780 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-02-27 15:16:50,800 p=86106 u=qupeng |  TASK [prometheus : get config file stat] ***********************************************************************************************************************************
2018-02-27 15:16:51,768 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:16:51,780 p=86106 u=qupeng |  TASK [prometheus : get alert conf stat] ************************************************************************************************************************************
2018-02-27 15:16:52,515 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:16:52,525 p=86106 u=qupeng |  TASK [prometheus : create configuration file if not exist] *****************************************************************************************************************
2018-02-27 15:16:54,227 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:16:54,243 p=86106 u=qupeng |  TASK [prometheus : copy alert rules file] **********************************************************************************************************************************
2018-02-27 15:16:55,980 p=86106 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-02-27 15:16:57,700 p=86106 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-02-27 15:16:59,278 p=86106 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-02-27 15:17:00,916 p=86106 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-02-27 15:17:02,515 p=86106 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-02-27 15:17:04,166 p=86106 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-02-27 15:17:05,866 p=86106 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-02-27 15:17:05,878 p=86106 u=qupeng |  TASK [prometheus : set alert rules label changes] **************************************************************************************************************************
2018-02-27 15:17:06,728 p=86106 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-02-27 15:17:07,405 p=86106 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-02-27 15:17:08,152 p=86106 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-02-27 15:17:08,875 p=86106 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-02-27 15:17:09,584 p=86106 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-02-27 15:17:10,287 p=86106 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-02-27 15:17:10,965 p=86106 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-02-27 15:17:10,980 p=86106 u=qupeng |  TASK [prometheus : create deploy data directory] ***************************************************************************************************************************
2018-02-27 15:17:11,708 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-02-27 15:17:11,731 p=86106 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-02-27 15:17:11,785 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/binary_deployment.yml for monitoring
2018-02-27 15:17:11,800 p=86106 u=qupeng |  TASK [prometheus : create deploy log directory] ****************************************************************************************************************************
2018-02-27 15:17:12,560 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 15:17:12,574 p=86106 u=qupeng |  TASK [prometheus : deploy prometheus binary] *******************************************************************************************************************************
2018-02-27 15:17:14,141 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:17:14,154 p=86106 u=qupeng |  TASK [prometheus : create run script] **************************************************************************************************************************************
2018-02-27 15:17:15,548 p=86106 u=qupeng |  ok: [monitoring] => (item=run)
2018-02-27 15:17:15,557 p=86106 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-02-27 15:17:15,599 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/supervise_deployment.yml for monitoring
2018-02-27 15:17:15,609 p=86106 u=qupeng |  TASK [prometheus : deploy supervise] ***************************************************************************************************************************************
2018-02-27 15:17:16,309 p=86106 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:17:17,051 p=86106 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-02-27 15:17:17,066 p=86106 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:17:18,489 p=86106 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-02-27 15:17:19,912 p=86106 u=qupeng |  ok: [monitoring] => (item=svc)
2018-02-27 15:17:21,291 p=86106 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-02-27 15:17:21,308 p=86106 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:17:22,771 p=86106 u=qupeng |  ok: [monitoring] => (item=start)
2018-02-27 15:17:24,139 p=86106 u=qupeng |  ok: [monitoring] => (item=stop)
2018-02-27 15:17:24,155 p=86106 u=qupeng |  TASK [prometheus : prepare firewalld white list] ***************************************************************************************************************************
2018-02-27 15:17:24,206 p=86106 u=qupeng |  ok: [monitoring]
2018-02-27 15:17:24,214 p=86106 u=qupeng |  PLAY [deploying grafana] ***************************************************************************************************************************************************
2018-02-27 15:17:24,230 p=86106 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:17:24,957 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 15:17:25,736 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 15:17:26,453 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 15:17:26,468 p=86106 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:17:26,510 p=86106 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:17:27,292 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 15:17:27,307 p=86106 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:17:27,356 p=86106 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 15:17:27,398 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/tasks.yml for 172.16.21.1
2018-02-27 15:17:27,407 p=86106 u=qupeng |  TASK [grafana : create common deploy directories] **************************************************************************************************************************
2018-02-27 15:17:28,241 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 15:17:28,930 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/data.grafana)
2018-02-27 15:17:28,943 p=86106 u=qupeng |  TASK [grafana : push data source file] *************************************************************************************************************************************
2018-02-27 15:17:30,296 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:17:30,312 p=86106 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 15:17:30,366 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/binary_deployment.yml for 172.16.21.1
2018-02-27 15:17:30,380 p=86106 u=qupeng |  TASK [grafana : create binary deploy directories (1/2)] ********************************************************************************************************************
2018-02-27 15:17:31,125 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt)
2018-02-27 15:17:31,141 p=86106 u=qupeng |  TASK [grafana : deploy grafana binary] *************************************************************************************************************************************
2018-02-27 15:17:31,638 p=86106 u=qupeng |  TASK [grafana : rename grafana deploy dir] *********************************************************************************************************************************
2018-02-27 15:17:32,342 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:17:32,357 p=86106 u=qupeng |  TASK [grafana : create binary deploy directories (2/2)] ********************************************************************************************************************
2018-02-27 15:17:33,066 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/dashboards)
2018-02-27 15:17:33,801 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/plugins)
2018-02-27 15:17:33,819 p=86106 u=qupeng |  TASK [grafana : create grafana configuration file] *************************************************************************************************************************
2018-02-27 15:17:35,187 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:17:35,199 p=86106 u=qupeng |  TASK [grafana : create run script] *****************************************************************************************************************************************
2018-02-27 15:17:36,707 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=run)
2018-02-27 15:17:36,724 p=86106 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 15:17:36,771 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/supervise_deployment.yml for 172.16.21.1
2018-02-27 15:17:36,786 p=86106 u=qupeng |  TASK [grafana : deploy supervise] ******************************************************************************************************************************************
2018-02-27 15:17:37,469 p=86106 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:17:38,235 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/grafana)
2018-02-27 15:17:38,249 p=86106 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:17:39,644 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-02-27 15:17:41,025 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-02-27 15:17:42,443 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-02-27 15:17:42,454 p=86106 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:17:43,951 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=start)
2018-02-27 15:17:45,405 p=86106 u=qupeng |  ok: [172.16.21.1] => (item=stop)
2018-02-27 15:17:45,417 p=86106 u=qupeng |  TASK [grafana : prepare firewalld white list] ******************************************************************************************************************************
2018-02-27 15:17:45,473 p=86106 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:17:45,481 p=86106 u=qupeng |  PLAY [deploying PD cluster] ************************************************************************************************************************************************
2018-02-27 15:17:45,498 p=86106 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:17:46,247 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-02-27 15:17:46,928 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-02-27 15:17:47,606 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-02-27 15:17:47,617 p=86106 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:17:47,654 p=86106 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:17:48,369 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-02-27 15:17:48,383 p=86106 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:17:48,430 p=86106 u=qupeng |  TASK [pd : create deploy directories] **************************************************************************************************************************************
2018-02-27 15:17:49,148 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-02-27 15:17:49,794 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-02-27 15:17:50,572 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/data.pd)
2018-02-27 15:17:50,583 p=86106 u=qupeng |  TASK [pd : load customized config] *****************************************************************************************************************************************
2018-02-27 15:17:50,646 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:17:50,658 p=86106 u=qupeng |  TASK [pd : load default config] ********************************************************************************************************************************************
2018-02-27 15:17:50,720 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:17:50,730 p=86106 u=qupeng |  TASK [pd : generate metrics config] ****************************************************************************************************************************************
2018-02-27 15:17:50,810 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:17:50,817 p=86106 u=qupeng |  TASK [pd : generate final config] ******************************************************************************************************************************************
2018-02-27 15:17:50,877 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:17:50,885 p=86106 u=qupeng |  TASK [pd : debug] **********************************************************************************************************************************************************
2018-02-27 15:17:50,943 p=86106 u=qupeng |  ok: [pd] => {
    "pd_conf": {
        "global": {
            "lease": 3, 
            "tso-save-interval": "3s"
        }, 
        "log": {
            "file": {}, 
            "level": "info"
        }, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s"
        }, 
        "replication": {
            "location-labels": [], 
            "max-replicas": 3
        }, 
        "schedule": {
            "leader-schedule-limit": 64, 
            "max-pending-peer-count": 16, 
            "max-snapshot-count": 3, 
            "max-store-down-time": "1h", 
            "region-schedule-limit": 16, 
            "replica-schedule-limit": 24, 
            "tolerant-size-ratio": 2.5
        }, 
        "security": {
            "cacert-path": "", 
            "cert-path": "", 
            "key-path": ""
        }
    }
}
2018-02-27 15:17:50,950 p=86106 u=qupeng |  TASK [pd : create configuration file] **************************************************************************************************************************************
2018-02-27 15:17:52,454 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:17:52,469 p=86106 u=qupeng |  TASK [pd : backup conf file] ***********************************************************************************************************************************************
2018-02-27 15:17:52,506 p=86106 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-02-27 15:17:52,549 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-02-27 15:17:52,560 p=86106 u=qupeng |  TASK [pd : deploy binary] **************************************************************************************************************************************************
2018-02-27 15:17:54,242 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:17:54,253 p=86106 u=qupeng |  TASK [pd : backup bianry file] *********************************************************************************************************************************************
2018-02-27 15:17:54,289 p=86106 u=qupeng |  TASK [pd : create startup script] ******************************************************************************************************************************************
2018-02-27 15:17:55,854 p=86106 u=qupeng |  ok: [pd] => (item=run)
2018-02-27 15:17:55,868 p=86106 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-02-27 15:17:55,911 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-02-27 15:17:55,925 p=86106 u=qupeng |  TASK [pd : deploy supervise] ***********************************************************************************************************************************************
2018-02-27 15:17:56,726 p=86106 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:17:57,475 p=86106 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/pd)
2018-02-27 15:17:57,491 p=86106 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:17:58,843 p=86106 u=qupeng |  ok: [pd] => (item=supervise)
2018-02-27 15:18:00,272 p=86106 u=qupeng |  ok: [pd] => (item=svc)
2018-02-27 15:18:01,600 p=86106 u=qupeng |  ok: [pd] => (item=svstat)
2018-02-27 15:18:01,618 p=86106 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:18:03,011 p=86106 u=qupeng |  ok: [pd] => (item=start)
2018-02-27 15:18:04,461 p=86106 u=qupeng |  ok: [pd] => (item=stop)
2018-02-27 15:18:04,476 p=86106 u=qupeng |  TASK [pd : prepare firewalld white list] ***********************************************************************************************************************************
2018-02-27 15:18:04,515 p=86106 u=qupeng |  ok: [pd]
2018-02-27 15:18:04,522 p=86106 u=qupeng |  PLAY [deploying TiKV cluster] **********************************************************************************************************************************************
2018-02-27 15:18:04,538 p=86106 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:18:05,158 p=86106 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/scripts)
2018-02-27 15:18:05,195 p=86106 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/scripts)
2018-02-27 15:18:05,235 p=86106 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/scripts)
2018-02-27 15:18:05,237 p=86106 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/scripts)
2018-02-27 15:18:05,241 p=86106 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/scripts)
2018-02-27 15:18:05,763 p=86106 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-02-27 15:18:05,780 p=86106 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-02-27 15:18:05,844 p=86106 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-02-27 15:18:05,849 p=86106 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-02-27 15:18:05,855 p=86106 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-02-27 15:18:06,393 p=86106 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/backup)
2018-02-27 15:18:06,412 p=86106 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/backup)
2018-02-27 15:18:06,493 p=86106 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/backup)
2018-02-27 15:18:06,497 p=86106 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/backup)
2018-02-27 15:18:06,509 p=86106 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/backup)
2018-02-27 15:18:06,522 p=86106 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:18:07,181 p=86106 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status)
2018-02-27 15:18:07,202 p=86106 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status)
2018-02-27 15:18:07,212 p=86106 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status)
2018-02-27 15:18:07,222 p=86106 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status)
2018-02-27 15:18:07,232 p=86106 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status)
2018-02-27 15:18:07,247 p=86106 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:18:07,874 p=86106 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/bin)
2018-02-27 15:18:07,892 p=86106 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/bin)
2018-02-27 15:18:07,913 p=86106 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/bin)
2018-02-27 15:18:07,919 p=86106 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/bin)
2018-02-27 15:18:07,929 p=86106 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/bin)
2018-02-27 15:18:07,939 p=86106 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:18:08,029 p=86106 u=qupeng |  TASK [tikv : create deploy directories] ************************************************************************************************************************************
2018-02-27 15:18:08,667 p=86106 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/log)
2018-02-27 15:18:08,686 p=86106 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/log)
2018-02-27 15:18:08,701 p=86106 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/log)
2018-02-27 15:18:08,729 p=86106 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/log)
2018-02-27 15:18:08,731 p=86106 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/log)
2018-02-27 15:18:09,258 p=86106 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/data)
2018-02-27 15:18:09,284 p=86106 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/data)
2018-02-27 15:18:09,286 p=86106 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/data)
2018-02-27 15:18:09,315 p=86106 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/data)
2018-02-27 15:18:09,360 p=86106 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/data)
2018-02-27 15:18:09,872 p=86106 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-02-27 15:18:09,880 p=86106 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-02-27 15:18:09,894 p=86106 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-02-27 15:18:09,916 p=86106 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-02-27 15:18:09,968 p=86106 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-02-27 15:18:09,982 p=86106 u=qupeng |  TASK [tikv : load customized config] ***************************************************************************************************************************************
2018-02-27 15:18:10,038 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:18:10,058 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:18:10,059 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:18:10,088 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:18:10,089 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:18:10,099 p=86106 u=qupeng |  TASK [tikv : load default config] ******************************************************************************************************************************************
2018-02-27 15:18:10,147 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:18:10,166 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:18:10,171 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:18:10,178 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:18:10,200 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:18:10,216 p=86106 u=qupeng |  TASK [tikv : generate metrics config] **************************************************************************************************************************************
2018-02-27 15:18:10,289 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:18:10,332 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:18:10,345 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:18:10,347 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:18:10,369 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:18:10,382 p=86106 u=qupeng |  TASK [tikv : generate final config] ****************************************************************************************************************************************
2018-02-27 15:18:10,438 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:18:10,465 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:18:10,470 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:18:10,479 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:18:10,510 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:18:10,520 p=86106 u=qupeng |  TASK [tikv : debug] ********************************************************************************************************************************************************
2018-02-27 15:18:10,591 p=86106 u=qupeng |  ok: [tikv1] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:18:10,593 p=86106 u=qupeng |  ok: [tikv2] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:18:10,609 p=86106 u=qupeng |  ok: [tikv4] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:18:10,612 p=86106 u=qupeng |  ok: [tikv3] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:18:10,627 p=86106 u=qupeng |  ok: [tikv5] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:70011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:18:10,637 p=86106 u=qupeng |  TASK [tikv : create config file] *******************************************************************************************************************************************
2018-02-27 15:18:11,925 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:18:11,945 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:18:11,959 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:18:12,009 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:18:12,040 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:18:12,051 p=86106 u=qupeng |  TASK [tikv : backup conf file] *********************************************************************************************************************************************
2018-02-27 15:18:12,137 p=86106 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-02-27 15:18:12,261 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/binary_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-02-27 15:18:12,278 p=86106 u=qupeng |  TASK [tikv : deploy binary] ************************************************************************************************************************************************
2018-02-27 15:18:14,223 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:18:14,230 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:18:14,235 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:18:14,315 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:18:14,324 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:18:14,334 p=86106 u=qupeng |  TASK [tikv : backup bianry file] *******************************************************************************************************************************************
2018-02-27 15:18:14,417 p=86106 u=qupeng |  TASK [tikv : create run script] ********************************************************************************************************************************************
2018-02-27 15:18:15,752 p=86106 u=qupeng |  ok: [tikv1] => (item=run)
2018-02-27 15:18:15,756 p=86106 u=qupeng |  ok: [tikv2] => (item=run)
2018-02-27 15:18:15,822 p=86106 u=qupeng |  ok: [tikv4] => (item=run)
2018-02-27 15:18:15,829 p=86106 u=qupeng |  ok: [tikv5] => (item=run)
2018-02-27 15:18:15,835 p=86106 u=qupeng |  ok: [tikv3] => (item=run)
2018-02-27 15:18:15,852 p=86106 u=qupeng |  TASK [tikv : backup script file] *******************************************************************************************************************************************
2018-02-27 15:18:15,945 p=86106 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-02-27 15:18:16,050 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/supervise_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-02-27 15:18:16,062 p=86106 u=qupeng |  TASK [tikv : deploy supervise] *********************************************************************************************************************************************
2018-02-27 15:18:18,865 p=86106 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:18:19,568 p=86106 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status/tikv)
2018-02-27 15:18:19,592 p=86106 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status/tikv)
2018-02-27 15:18:19,606 p=86106 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status/tikv)
2018-02-27 15:18:19,614 p=86106 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status/tikv)
2018-02-27 15:18:19,620 p=86106 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status/tikv)
2018-02-27 15:18:19,633 p=86106 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:18:20,959 p=86106 u=qupeng |  ok: [tikv2] => (item=supervise)
2018-02-27 15:18:20,969 p=86106 u=qupeng |  ok: [tikv3] => (item=supervise)
2018-02-27 15:18:20,977 p=86106 u=qupeng |  ok: [tikv1] => (item=supervise)
2018-02-27 15:18:20,999 p=86106 u=qupeng |  ok: [tikv4] => (item=supervise)
2018-02-27 15:18:21,031 p=86106 u=qupeng |  ok: [tikv5] => (item=supervise)
2018-02-27 15:18:22,216 p=86106 u=qupeng |  ok: [tikv1] => (item=svc)
2018-02-27 15:18:22,219 p=86106 u=qupeng |  ok: [tikv2] => (item=svc)
2018-02-27 15:18:22,230 p=86106 u=qupeng |  ok: [tikv4] => (item=svc)
2018-02-27 15:18:22,236 p=86106 u=qupeng |  ok: [tikv3] => (item=svc)
2018-02-27 15:18:22,280 p=86106 u=qupeng |  ok: [tikv5] => (item=svc)
2018-02-27 15:18:23,537 p=86106 u=qupeng |  ok: [tikv4] => (item=svstat)
2018-02-27 15:18:23,538 p=86106 u=qupeng |  ok: [tikv3] => (item=svstat)
2018-02-27 15:18:23,539 p=86106 u=qupeng |  ok: [tikv1] => (item=svstat)
2018-02-27 15:18:23,564 p=86106 u=qupeng |  ok: [tikv5] => (item=svstat)
2018-02-27 15:18:23,570 p=86106 u=qupeng |  ok: [tikv2] => (item=svstat)
2018-02-27 15:18:23,582 p=86106 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:18:24,897 p=86106 u=qupeng |  ok: [tikv2] => (item=start)
2018-02-27 15:18:24,919 p=86106 u=qupeng |  ok: [tikv1] => (item=start)
2018-02-27 15:18:24,953 p=86106 u=qupeng |  ok: [tikv3] => (item=start)
2018-02-27 15:18:24,967 p=86106 u=qupeng |  ok: [tikv5] => (item=start)
2018-02-27 15:18:24,991 p=86106 u=qupeng |  ok: [tikv4] => (item=start)
2018-02-27 15:18:26,140 p=86106 u=qupeng |  ok: [tikv2] => (item=stop)
2018-02-27 15:18:26,191 p=86106 u=qupeng |  ok: [tikv1] => (item=stop)
2018-02-27 15:18:26,194 p=86106 u=qupeng |  ok: [tikv3] => (item=stop)
2018-02-27 15:18:26,241 p=86106 u=qupeng |  ok: [tikv5] => (item=stop)
2018-02-27 15:18:26,271 p=86106 u=qupeng |  ok: [tikv4] => (item=stop)
2018-02-27 15:18:26,282 p=86106 u=qupeng |  TASK [tikv : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 15:18:26,343 p=86106 u=qupeng |  ok: [tikv1]
2018-02-27 15:18:26,370 p=86106 u=qupeng |  ok: [tikv2]
2018-02-27 15:18:26,379 p=86106 u=qupeng |  ok: [tikv3]
2018-02-27 15:18:26,380 p=86106 u=qupeng |  ok: [tikv4]
2018-02-27 15:18:26,419 p=86106 u=qupeng |  ok: [tikv5]
2018-02-27 15:18:26,426 p=86106 u=qupeng |  PLAY [deploying TiDB cluster] **********************************************************************************************************************************************
2018-02-27 15:18:26,441 p=86106 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:18:26,488 p=86106 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:18:26,520 p=86106 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:18:26,557 p=86106 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:18:26,588 p=86106 u=qupeng |  TASK [pump : create deploy directories] ************************************************************************************************************************************
2018-02-27 15:18:26,625 p=86106 u=qupeng |  TASK [pump : include] ******************************************************************************************************************************************************
2018-02-27 15:18:26,650 p=86106 u=qupeng |  TASK [pump : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 15:18:26,674 p=86106 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:18:27,391 p=86106 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/scripts)
2018-02-27 15:18:28,245 p=86106 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-02-27 15:18:28,947 p=86106 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/backup)
2018-02-27 15:18:28,960 p=86106 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:18:29,007 p=86106 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:18:29,891 p=86106 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/bin)
2018-02-27 15:18:29,922 p=86106 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:18:29,977 p=86106 u=qupeng |  TASK [tidb : create deploy directories] ************************************************************************************************************************************
2018-02-27 15:18:30,884 p=86106 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/log)
2018-02-27 15:18:31,572 p=86106 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-02-27 15:18:31,586 p=86106 u=qupeng |  TASK [tidb : load customized config] ***************************************************************************************************************************************
2018-02-27 15:18:31,638 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:18:31,650 p=86106 u=qupeng |  TASK [tidb : load default config] ******************************************************************************************************************************************
2018-02-27 15:18:31,700 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:18:31,716 p=86106 u=qupeng |  TASK [tidb : generate metrics config] **************************************************************************************************************************************
2018-02-27 15:18:31,798 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:18:31,812 p=86106 u=qupeng |  TASK [tidb : combine final config] *****************************************************************************************************************************************
2018-02-27 15:18:31,859 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:18:31,873 p=86106 u=qupeng |  TASK [tidb : debug] ********************************************************************************************************************************************************
2018-02-27 15:18:31,929 p=86106 u=qupeng |  ok: [tidb] => {
    "tidb_conf": {
        "global": {
            "enable-chunk": true, 
            "host": "0.0.0.0", 
            "lease": "10s", 
            "run-ddl": true, 
            "split-table": true, 
            "store": "tikv"
        }, 
        "log": {
            "disable-timestamp": false, 
            "file": {
                "log-rotate": true
            }, 
            "format": "text", 
            "level": "info", 
            "query-log-max-len": 2048, 
            "slow-threshold": 300
        }, 
        "opentracing": {
            "enable": false, 
            "reporter": {
                "buffer-flush-interval": 0, 
                "local-agent-host-port": "", 
                "log-spans": false, 
                "queue-size": 0
            }, 
            "rpc-metrics": false, 
            "sampler": {
                "max-operations": 0, 
                "param": 1.0, 
                "sampling-refresh-interval": 0, 
                "sampling-server-url": "", 
                "type": "const"
            }
        }, 
        "performance": {
            "cross-join": true, 
            "join-concurrency": 5, 
            "max-procs": 0, 
            "retry-limit": 10, 
            "run-auto-analyze": true, 
            "stats-lease": "3s", 
            "tcp-keep-alive": true
        }, 
        "plan_cache": {
            "capacity": 2560, 
            "enabled": false, 
            "shards": 256
        }, 
        "prepared_plan_cache": {
            "capacity": 100, 
            "enabled": false
        }, 
        "proxy_protocol": {
            "header-timeout": 5, 
            "networks": ""
        }, 
        "security": {
            "cluster-ssl-ca": "", 
            "cluster-ssl-cert": "", 
            "cluster-ssl-key": "", 
            "ssl-ca": "", 
            "ssl-cert": "", 
            "ssl-key": ""
        }, 
        "status": {
            "metrics-addr": "172.16.21.1:70011", 
            "metrics-interval": 15, 
            "report-status": true
        }, 
        "tikv_client": {
            "grpc-connection-count": 16
        }, 
        "xprotocol": {
            "xhost": "0.0.0.0", 
            "xport": 14000, 
            "xserver": false, 
            "xsocket": ""
        }
    }
}
2018-02-27 15:18:31,940 p=86106 u=qupeng |  TASK [tidb : create config file] *******************************************************************************************************************************************
2018-02-27 15:18:33,409 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:18:33,419 p=86106 u=qupeng |  TASK [tidb : backup conf file] *********************************************************************************************************************************************
2018-02-27 15:18:33,450 p=86106 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-02-27 15:18:33,496 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/binary_deployment.yml for tidb
2018-02-27 15:18:33,508 p=86106 u=qupeng |  TASK [tidb : deploy binary] ************************************************************************************************************************************************
2018-02-27 15:18:35,041 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:18:35,048 p=86106 u=qupeng |  TASK [tidb : backup binary file] *******************************************************************************************************************************************
2018-02-27 15:18:35,080 p=86106 u=qupeng |  TASK [tidb : create run script] ********************************************************************************************************************************************
2018-02-27 15:18:36,581 p=86106 u=qupeng |  ok: [tidb] => (item=run)
2018-02-27 15:18:36,596 p=86106 u=qupeng |  TASK [tidb : backup script file] *******************************************************************************************************************************************
2018-02-27 15:18:36,633 p=86106 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-02-27 15:18:36,668 p=86106 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/supervise_deployment.yml for tidb
2018-02-27 15:18:36,677 p=86106 u=qupeng |  TASK [tidb : deploy supervise] *********************************************************************************************************************************************
2018-02-27 15:18:37,247 p=86106 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:18:37,986 p=86106 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/status/tidb)
2018-02-27 15:18:38,002 p=86106 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:18:39,452 p=86106 u=qupeng |  ok: [tidb] => (item=supervise)
2018-02-27 15:18:40,939 p=86106 u=qupeng |  ok: [tidb] => (item=svc)
2018-02-27 15:18:42,354 p=86106 u=qupeng |  ok: [tidb] => (item=svstat)
2018-02-27 15:18:42,367 p=86106 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:18:43,768 p=86106 u=qupeng |  ok: [tidb] => (item=start)
2018-02-27 15:18:45,191 p=86106 u=qupeng |  ok: [tidb] => (item=stop)
2018-02-27 15:18:45,220 p=86106 u=qupeng |  TASK [tidb : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 15:18:45,286 p=86106 u=qupeng |  ok: [tidb]
2018-02-27 15:18:45,295 p=86106 u=qupeng |  PLAY [finalizing deployment target] ****************************************************************************************************************************************
2018-02-27 15:18:45,316 p=86106 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-02-27 15:18:45,495 p=86106 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-02-27 15:18:45,672 p=86106 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-02-27 15:18:45,864 p=86106 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-02-27 15:18:46,038 p=86106 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-02-27 15:18:46,219 p=86106 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-02-27 15:18:46,409 p=86106 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-02-27 15:18:46,606 p=86106 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-02-27 15:18:46,778 p=86106 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 15:18:46,778 p=86106 u=qupeng |  172.16.21.1                : ok=28   changed=0    unreachable=0    failed=0   
2018-02-27 15:18:46,778 p=86106 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-02-27 15:18:46,779 p=86106 u=qupeng |  monitoring                 : ok=39   changed=2    unreachable=0    failed=0   
2018-02-27 15:18:46,779 p=86106 u=qupeng |  pd                         : ok=51   changed=10   unreachable=0    failed=0   
2018-02-27 15:18:46,779 p=86106 u=qupeng |  tidb                       : ok=29   changed=0    unreachable=0    failed=0   
2018-02-27 15:18:46,779 p=86106 u=qupeng |  tikv1                      : ok=30   changed=0    unreachable=0    failed=0   
2018-02-27 15:18:46,779 p=86106 u=qupeng |  tikv2                      : ok=30   changed=0    unreachable=0    failed=0   
2018-02-27 15:18:46,779 p=86106 u=qupeng |  tikv3                      : ok=30   changed=0    unreachable=0    failed=0   
2018-02-27 15:18:46,779 p=86106 u=qupeng |  tikv4                      : ok=30   changed=0    unreachable=0    failed=0   
2018-02-27 15:18:46,780 p=86106 u=qupeng |  tikv5                      : ok=30   changed=0    unreachable=0    failed=0   
2018-02-27 15:18:46,780 p=86106 u=qupeng |  Congrats! All goes well. :-)
2018-02-27 15:18:55,828 p=111943 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 15:18:55,843 p=111943 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 15:18:55,869 p=111943 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 15:18:55,892 p=111943 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 15:18:55,911 p=111943 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 15:18:55,935 p=111943 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 15:18:55,958 p=111943 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 15:18:56,032 p=111943 u=qupeng |  ok: [localhost]
2018-02-27 15:18:56,038 p=111943 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-02-27 15:18:56,058 p=111943 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 15:18:56,208 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:18:56,226 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:18:56,249 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:18:56,263 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:18:56,264 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:18:56,340 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:18:56,356 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:18:56,388 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:18:56,388 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:18:56,396 p=111943 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 15:19:02,031 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:19:02,284 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:19:02,437 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:02,501 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:19:02,625 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:19:07,347 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:19:07,850 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:19:08,234 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:19:08,918 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:19:08,947 p=111943 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 15:19:09,802 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:09,817 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:19:09,830 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:19:09,842 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:19:09,869 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:19:10,553 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:19:10,577 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:19:10,584 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:19:10,585 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:19:10,593 p=111943 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 15:19:10,692 p=111943 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 15:19:10,796 p=111943 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 15:19:10,903 p=111943 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 15:19:10,949 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:10,972 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:19:10,984 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:19:10,995 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:19:10,996 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:19:11,001 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:19:11,012 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:19:11,018 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:19:11,037 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:19:11,047 p=111943 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 15:19:11,154 p=111943 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 15:19:11,255 p=111943 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 15:19:11,369 p=111943 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 15:19:12,149 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:12,176 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:19:12,190 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:19:12,203 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:19:12,204 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:19:12,828 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:19:12,922 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:19:12,935 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:19:12,937 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:19:12,949 p=111943 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 15:19:13,698 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:13,720 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:19:13,749 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:19:13,769 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:19:13,771 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:19:14,412 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:19:14,416 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:19:14,481 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:19:14,563 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:19:14,572 p=111943 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 15:19:14,685 p=111943 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 15:19:14,786 p=111943 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 15:19:15,811 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:19:15,828 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:19:15,841 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:19:15,854 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:15,855 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:19:16,634 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:19:16,667 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:19:16,707 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:19:16,709 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:19:16,717 p=111943 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 15:19:16,828 p=111943 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 15:19:16,935 p=111943 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 15:19:17,787 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:19:17,799 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:17,835 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:19:17,852 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:19:17,854 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:19:18,614 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:19:18,639 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:19:18,690 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:19:18,729 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:19:18,738 p=111943 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 15:19:19,633 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:19:19,654 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:19:19,672 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:19,691 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:19:19,700 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:19:20,467 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:19:20,490 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:19:20,510 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:19:20,529 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:19:20,537 p=111943 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-02-27 15:19:20,591 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:20,604 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:19:20,617 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:19:20,630 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:19:20,630 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:19:20,631 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:19:20,637 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:19:20,646 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:19:20,659 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:19:20,666 p=111943 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:19:20,724 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:20,737 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:19:20,753 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:19:20,765 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:19:20,766 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:19:20,774 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:19:20,777 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:19:20,802 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:19:20,812 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:19:20,819 p=111943 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:19:20,872 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:20,883 p=111943 u=qupeng |  ok: [monitoring]
2018-02-27 15:19:20,898 p=111943 u=qupeng |  ok: [tidb]
2018-02-27 15:19:20,911 p=111943 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:19:20,912 p=111943 u=qupeng |  ok: [tikv1]
2018-02-27 15:19:20,913 p=111943 u=qupeng |  ok: [tikv2]
2018-02-27 15:19:20,928 p=111943 u=qupeng |  ok: [tikv3]
2018-02-27 15:19:20,935 p=111943 u=qupeng |  ok: [tikv4]
2018-02-27 15:19:20,957 p=111943 u=qupeng |  ok: [tikv5]
2018-02-27 15:19:20,963 p=111943 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-02-27 15:19:20,971 p=111943 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-02-27 15:19:21,875 p=111943 u=qupeng |  changed: [pd] => (item=node_exporter)
2018-02-27 15:19:21,885 p=111943 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-02-27 15:19:21,914 p=111943 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-02-27 15:19:21,942 p=111943 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:19:22,829 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:22,838 p=111943 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-02-27 15:19:22,853 p=111943 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-02-27 15:19:23,799 p=111943 u=qupeng |  changed: [pd] => (item=blackbox_exporter)
2018-02-27 15:19:23,812 p=111943 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-02-27 15:19:23,846 p=111943 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-02-27 15:19:23,876 p=111943 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:19:24,585 p=111943 u=qupeng |  ok: [pd]
2018-02-27 15:19:24,594 p=111943 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-02-27 15:19:24,608 p=111943 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-02-27 15:19:25,514 p=111943 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-02-27 15:19:26,429 p=111943 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-02-27 15:19:26,443 p=111943 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-02-27 15:19:26,481 p=111943 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-02-27 15:19:26,517 p=111943 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-02-27 15:24:03,002 p=111943 u=qupeng |   [ERROR]: User interrupted execution

2018-02-27 15:24:27,711 p=137138 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 15:24:27,727 p=137138 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 15:24:27,756 p=137138 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 15:24:27,783 p=137138 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 15:24:27,799 p=137138 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 15:24:27,818 p=137138 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 15:24:27,838 p=137138 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 15:24:27,909 p=137138 u=qupeng |  ok: [localhost]
2018-02-27 15:24:27,915 p=137138 u=qupeng |  PLAY [initializing deployment target] **************************************************************************************************************************************
2018-02-27 15:24:27,931 p=137138 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 15:24:28,080 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:28,098 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:28,112 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:28,126 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:28,127 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:28,198 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:28,221 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:28,234 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:28,253 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:28,260 p=137138 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 15:24:34,097 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:34,151 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:34,204 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:34,265 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:34,303 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:39,476 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:39,766 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:39,914 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:40,600 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:40,631 p=137138 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 15:24:41,533 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:41,571 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:41,593 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:41,614 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:41,615 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:42,221 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:42,281 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:42,304 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:42,311 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:42,319 p=137138 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 15:24:42,422 p=137138 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 15:24:42,521 p=137138 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 15:24:42,633 p=137138 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 15:24:42,689 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:42,705 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:42,717 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:42,729 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:42,730 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:42,730 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:42,745 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:42,755 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:42,769 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:42,780 p=137138 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 15:24:42,888 p=137138 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 15:24:43,002 p=137138 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 15:24:43,120 p=137138 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 15:24:43,906 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:43,926 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:43,943 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:43,959 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:43,960 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:44,616 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:44,620 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:44,639 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:44,686 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:44,696 p=137138 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 15:24:45,438 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:45,459 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:45,472 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:45,486 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:45,487 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:46,169 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:46,172 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:46,187 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:46,189 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:46,199 p=137138 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 15:24:46,310 p=137138 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 15:24:46,427 p=137138 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 15:24:47,450 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:47,473 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:47,493 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:47,511 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:47,513 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:48,283 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:48,312 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:48,315 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:48,319 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:48,327 p=137138 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 15:24:48,429 p=137138 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 15:24:48,529 p=137138 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 15:24:49,410 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:49,426 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:49,441 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:49,454 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:49,456 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:50,292 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:50,294 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:50,296 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:50,315 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:50,326 p=137138 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 15:24:51,246 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:51,263 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:51,283 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:51,300 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:51,302 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:52,115 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:52,139 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:52,158 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:52,196 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:52,210 p=137138 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-02-27 15:24:52,259 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:52,274 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:52,299 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:52,311 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:52,322 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:52,322 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:52,327 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:52,345 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:52,347 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:52,354 p=137138 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:24:52,413 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:52,424 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:52,441 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:52,455 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:52,455 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:52,466 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:52,473 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:52,493 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:52,504 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:52,511 p=137138 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:24:52,575 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:52,588 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:24:52,600 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:24:52,613 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:24:52,619 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:24:52,637 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:24:52,643 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:24:52,647 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:24:52,654 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:24:52,661 p=137138 u=qupeng |  PLAY [deploying monitoring agent] ******************************************************************************************************************************************
2018-02-27 15:24:52,670 p=137138 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:24:53,475 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-02-27 15:24:54,157 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-02-27 15:24:54,831 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-02-27 15:24:54,846 p=137138 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:24:54,895 p=137138 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:24:55,608 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-02-27 15:24:55,623 p=137138 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:24:55,669 p=137138 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-02-27 15:24:55,718 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/binary_deployment.yml for pd
2018-02-27 15:24:55,731 p=137138 u=qupeng |  TASK [node_exporter : create deploy directories] ***************************************************************************************************************************
2018-02-27 15:24:56,455 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-02-27 15:24:56,472 p=137138 u=qupeng |  TASK [node_exporter : deploy node_exporter binary] *************************************************************************************************************************
2018-02-27 15:24:58,629 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:24:58,645 p=137138 u=qupeng |  TASK [node_exporter : create run script] ***********************************************************************************************************************************
2018-02-27 15:25:00,038 p=137138 u=qupeng |  ok: [pd] => (item=run)
2018-02-27 15:25:00,054 p=137138 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-02-27 15:25:00,101 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/supervise_deployment.yml for pd
2018-02-27 15:25:00,116 p=137138 u=qupeng |  TASK [node_exporter : deploy supervise] ************************************************************************************************************************************
2018-02-27 15:25:00,647 p=137138 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:25:01,347 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/node_exporter)
2018-02-27 15:25:01,359 p=137138 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:25:02,786 p=137138 u=qupeng |  ok: [pd] => (item=supervise)
2018-02-27 15:25:04,206 p=137138 u=qupeng |  ok: [pd] => (item=svc)
2018-02-27 15:25:05,618 p=137138 u=qupeng |  ok: [pd] => (item=svstat)
2018-02-27 15:25:05,636 p=137138 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:25:07,080 p=137138 u=qupeng |  ok: [pd] => (item=start)
2018-02-27 15:25:08,536 p=137138 u=qupeng |  ok: [pd] => (item=stop)
2018-02-27 15:25:08,550 p=137138 u=qupeng |  TASK [node_exporter : prepare firewalld white list] ************************************************************************************************************************
2018-02-27 15:25:08,672 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:25:08,686 p=137138 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-02-27 15:25:08,745 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/binary_deployment.yml for pd
2018-02-27 15:25:08,758 p=137138 u=qupeng |  TASK [blackbox_exporter : create deploy directories] ***********************************************************************************************************************
2018-02-27 15:25:09,555 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-02-27 15:25:09,572 p=137138 u=qupeng |  TASK [blackbox_exporter : deploy blackbox_exporter binary] *****************************************************************************************************************
2018-02-27 15:25:11,824 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:25:11,837 p=137138 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-02-27 15:25:11,886 p=137138 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-02-27 15:25:12,672 p=137138 u=qupeng |  changed: [pd]
2018-02-27 15:25:12,679 p=137138 u=qupeng |  TASK [blackbox_exporter : create run script] *******************************************************************************************************************************
2018-02-27 15:25:14,043 p=137138 u=qupeng |  ok: [pd] => (item=run)
2018-02-27 15:25:14,053 p=137138 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-02-27 15:25:14,102 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/supervise_deployment.yml for pd
2018-02-27 15:25:14,115 p=137138 u=qupeng |  TASK [blackbox_exporter : deploy supervise] ********************************************************************************************************************************
2018-02-27 15:25:14,701 p=137138 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:25:15,454 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/blackbox_exporter)
2018-02-27 15:25:15,465 p=137138 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:25:16,950 p=137138 u=qupeng |  ok: [pd] => (item=supervise)
2018-02-27 15:25:18,414 p=137138 u=qupeng |  ok: [pd] => (item=svc)
2018-02-27 15:25:19,784 p=137138 u=qupeng |  ok: [pd] => (item=svstat)
2018-02-27 15:25:19,802 p=137138 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:25:21,293 p=137138 u=qupeng |  ok: [pd] => (item=start)
2018-02-27 15:25:22,671 p=137138 u=qupeng |  ok: [pd] => (item=stop)
2018-02-27 15:25:22,692 p=137138 u=qupeng |  TASK [blackbox_exporter : create config file] ******************************************************************************************************************************
2018-02-27 15:25:24,083 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:25:24,092 p=137138 u=qupeng |  TASK [blackbox_exporter : backup conf file] ********************************************************************************************************************************
2018-02-27 15:25:24,130 p=137138 u=qupeng |  TASK [blackbox_exporter : prepare firewalld white list] ********************************************************************************************************************
2018-02-27 15:25:24,186 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:25:24,195 p=137138 u=qupeng |  PLAY [deploying monitoring server] *****************************************************************************************************************************************
2018-02-27 15:25:24,214 p=137138 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:25:24,919 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 15:25:25,598 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 15:25:26,292 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 15:25:26,308 p=137138 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:25:26,356 p=137138 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:25:27,015 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 15:25:27,030 p=137138 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:25:27,068 p=137138 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-02-27 15:25:27,110 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/binary_deployment.yml for monitoring
2018-02-27 15:25:27,121 p=137138 u=qupeng |  TASK [pushgateway : create deploy directories] *****************************************************************************************************************************
2018-02-27 15:25:27,863 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 15:25:27,876 p=137138 u=qupeng |  TASK [pushgateway : deploy pushgateway binary] *****************************************************************************************************************************
2018-02-27 15:25:29,294 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:25:29,309 p=137138 u=qupeng |  TASK [pushgateway : create run script] *************************************************************************************************************************************
2018-02-27 15:25:31,410 p=137138 u=qupeng |  changed: [monitoring] => (item=run)
2018-02-27 15:25:31,423 p=137138 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-02-27 15:25:31,459 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/supervise_deployment.yml for monitoring
2018-02-27 15:25:31,471 p=137138 u=qupeng |  TASK [pushgateway : deploy supervise] **************************************************************************************************************************************
2018-02-27 15:25:32,014 p=137138 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:25:32,759 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/pushgateway)
2018-02-27 15:25:32,774 p=137138 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:25:34,202 p=137138 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-02-27 15:25:35,606 p=137138 u=qupeng |  ok: [monitoring] => (item=svc)
2018-02-27 15:25:36,983 p=137138 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-02-27 15:25:36,995 p=137138 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:25:38,405 p=137138 u=qupeng |  ok: [monitoring] => (item=start)
2018-02-27 15:25:39,782 p=137138 u=qupeng |  ok: [monitoring] => (item=stop)
2018-02-27 15:25:39,796 p=137138 u=qupeng |  TASK [pushgateway : prepare firewalld white list] **************************************************************************************************************************
2018-02-27 15:25:39,853 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:25:39,865 p=137138 u=qupeng |  TASK [prometheus : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:25:40,568 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 15:25:41,266 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-02-27 15:25:41,916 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-02-27 15:25:41,924 p=137138 u=qupeng |  TASK [prometheus : get config file stat] ***********************************************************************************************************************************
2018-02-27 15:25:42,888 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:25:42,902 p=137138 u=qupeng |  TASK [prometheus : get alert conf stat] ************************************************************************************************************************************
2018-02-27 15:25:43,614 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:25:43,624 p=137138 u=qupeng |  TASK [prometheus : create configuration file if not exist] *****************************************************************************************************************
2018-02-27 15:25:45,661 p=137138 u=qupeng |  changed: [monitoring]
2018-02-27 15:25:45,671 p=137138 u=qupeng |  TASK [prometheus : copy alert rules file] **********************************************************************************************************************************
2018-02-27 15:25:47,318 p=137138 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-02-27 15:25:49,043 p=137138 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-02-27 15:25:50,615 p=137138 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-02-27 15:25:52,222 p=137138 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-02-27 15:25:53,827 p=137138 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-02-27 15:25:55,434 p=137138 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-02-27 15:25:57,031 p=137138 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-02-27 15:25:57,046 p=137138 u=qupeng |  TASK [prometheus : set alert rules label changes] **************************************************************************************************************************
2018-02-27 15:25:57,880 p=137138 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-02-27 15:25:58,583 p=137138 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-02-27 15:25:59,225 p=137138 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-02-27 15:25:59,937 p=137138 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-02-27 15:26:00,597 p=137138 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-02-27 15:26:01,294 p=137138 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-02-27 15:26:01,975 p=137138 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-02-27 15:26:01,988 p=137138 u=qupeng |  TASK [prometheus : create deploy data directory] ***************************************************************************************************************************
2018-02-27 15:26:02,725 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-02-27 15:26:02,734 p=137138 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-02-27 15:26:02,769 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/binary_deployment.yml for monitoring
2018-02-27 15:26:02,778 p=137138 u=qupeng |  TASK [prometheus : create deploy log directory] ****************************************************************************************************************************
2018-02-27 15:26:03,496 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 15:26:03,513 p=137138 u=qupeng |  TASK [prometheus : deploy prometheus binary] *******************************************************************************************************************************
2018-02-27 15:26:05,093 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:26:05,104 p=137138 u=qupeng |  TASK [prometheus : create run script] **************************************************************************************************************************************
2018-02-27 15:26:07,077 p=137138 u=qupeng |  changed: [monitoring] => (item=run)
2018-02-27 15:26:07,089 p=137138 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-02-27 15:26:07,135 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/supervise_deployment.yml for monitoring
2018-02-27 15:26:07,148 p=137138 u=qupeng |  TASK [prometheus : deploy supervise] ***************************************************************************************************************************************
2018-02-27 15:26:07,840 p=137138 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:26:08,561 p=137138 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-02-27 15:26:08,580 p=137138 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:26:09,960 p=137138 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-02-27 15:26:11,368 p=137138 u=qupeng |  ok: [monitoring] => (item=svc)
2018-02-27 15:26:12,796 p=137138 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-02-27 15:26:12,819 p=137138 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:26:14,281 p=137138 u=qupeng |  ok: [monitoring] => (item=start)
2018-02-27 15:26:15,674 p=137138 u=qupeng |  ok: [monitoring] => (item=stop)
2018-02-27 15:26:15,691 p=137138 u=qupeng |  TASK [prometheus : prepare firewalld white list] ***************************************************************************************************************************
2018-02-27 15:26:15,751 p=137138 u=qupeng |  ok: [monitoring]
2018-02-27 15:26:15,761 p=137138 u=qupeng |  PLAY [deploying grafana] ***************************************************************************************************************************************************
2018-02-27 15:26:15,776 p=137138 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:26:16,524 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-02-27 15:26:17,316 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-02-27 15:26:18,020 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-02-27 15:26:18,035 p=137138 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:26:18,088 p=137138 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:26:18,876 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-02-27 15:26:18,890 p=137138 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:26:18,933 p=137138 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 15:26:18,983 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/tasks.yml for 172.16.21.1
2018-02-27 15:26:18,995 p=137138 u=qupeng |  TASK [grafana : create common deploy directories] **************************************************************************************************************************
2018-02-27 15:26:19,789 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-02-27 15:26:20,509 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/data.grafana)
2018-02-27 15:26:20,524 p=137138 u=qupeng |  TASK [grafana : push data source file] *************************************************************************************************************************************
2018-02-27 15:26:22,180 p=137138 u=qupeng |  changed: [172.16.21.1]
2018-02-27 15:26:22,194 p=137138 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 15:26:22,246 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/binary_deployment.yml for 172.16.21.1
2018-02-27 15:26:22,259 p=137138 u=qupeng |  TASK [grafana : create binary deploy directories (1/2)] ********************************************************************************************************************
2018-02-27 15:26:22,993 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt)
2018-02-27 15:26:23,005 p=137138 u=qupeng |  TASK [grafana : deploy grafana binary] *************************************************************************************************************************************
2018-02-27 15:26:23,476 p=137138 u=qupeng |  TASK [grafana : rename grafana deploy dir] *********************************************************************************************************************************
2018-02-27 15:26:24,199 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:26:24,214 p=137138 u=qupeng |  TASK [grafana : create binary deploy directories (2/2)] ********************************************************************************************************************
2018-02-27 15:26:24,958 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/dashboards)
2018-02-27 15:26:25,647 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/plugins)
2018-02-27 15:26:25,670 p=137138 u=qupeng |  TASK [grafana : create grafana configuration file] *************************************************************************************************************************
2018-02-27 15:26:27,350 p=137138 u=qupeng |  changed: [172.16.21.1]
2018-02-27 15:26:27,358 p=137138 u=qupeng |  TASK [grafana : create run script] *****************************************************************************************************************************************
2018-02-27 15:26:28,818 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=run)
2018-02-27 15:26:28,833 p=137138 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 15:26:28,878 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/supervise_deployment.yml for 172.16.21.1
2018-02-27 15:26:28,894 p=137138 u=qupeng |  TASK [grafana : deploy supervise] ******************************************************************************************************************************************
2018-02-27 15:26:29,487 p=137138 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:26:30,233 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/grafana)
2018-02-27 15:26:30,247 p=137138 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:26:31,639 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-02-27 15:26:33,016 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-02-27 15:26:34,396 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-02-27 15:26:34,412 p=137138 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:26:35,901 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=start)
2018-02-27 15:26:37,329 p=137138 u=qupeng |  ok: [172.16.21.1] => (item=stop)
2018-02-27 15:26:37,350 p=137138 u=qupeng |  TASK [grafana : prepare firewalld white list] ******************************************************************************************************************************
2018-02-27 15:26:37,417 p=137138 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:26:37,430 p=137138 u=qupeng |  PLAY [deploying PD cluster] ************************************************************************************************************************************************
2018-02-27 15:26:37,450 p=137138 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:26:38,190 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-02-27 15:26:38,896 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-02-27 15:26:39,599 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-02-27 15:26:39,615 p=137138 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:26:39,661 p=137138 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:26:40,413 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-02-27 15:26:40,428 p=137138 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:26:40,474 p=137138 u=qupeng |  TASK [pd : create deploy directories] **************************************************************************************************************************************
2018-02-27 15:26:41,179 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-02-27 15:26:41,843 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-02-27 15:26:42,625 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/data.pd)
2018-02-27 15:26:42,638 p=137138 u=qupeng |  TASK [pd : load customized config] *****************************************************************************************************************************************
2018-02-27 15:26:42,693 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:26:42,703 p=137138 u=qupeng |  TASK [pd : load default config] ********************************************************************************************************************************************
2018-02-27 15:26:42,748 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:26:42,758 p=137138 u=qupeng |  TASK [pd : generate metrics config] ****************************************************************************************************************************************
2018-02-27 15:26:42,854 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:26:42,866 p=137138 u=qupeng |  TASK [pd : generate final config] ******************************************************************************************************************************************
2018-02-27 15:26:42,929 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:26:42,938 p=137138 u=qupeng |  TASK [pd : debug] **********************************************************************************************************************************************************
2018-02-27 15:26:42,989 p=137138 u=qupeng |  ok: [pd] => {
    "pd_conf": {
        "global": {
            "lease": 3, 
            "tso-save-interval": "3s"
        }, 
        "log": {
            "file": {}, 
            "level": "info"
        }, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s"
        }, 
        "replication": {
            "location-labels": [], 
            "max-replicas": 3
        }, 
        "schedule": {
            "leader-schedule-limit": 64, 
            "max-pending-peer-count": 16, 
            "max-snapshot-count": 3, 
            "max-store-down-time": "1h", 
            "region-schedule-limit": 16, 
            "replica-schedule-limit": 24, 
            "tolerant-size-ratio": 2.5
        }, 
        "security": {
            "cacert-path": "", 
            "cert-path": "", 
            "key-path": ""
        }
    }
}
2018-02-27 15:26:42,998 p=137138 u=qupeng |  TASK [pd : create configuration file] **************************************************************************************************************************************
2018-02-27 15:26:44,836 p=137138 u=qupeng |  changed: [pd]
2018-02-27 15:26:44,850 p=137138 u=qupeng |  TASK [pd : backup conf file] ***********************************************************************************************************************************************
2018-02-27 15:26:45,750 p=137138 u=qupeng |  changed: [pd]
2018-02-27 15:26:45,761 p=137138 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-02-27 15:26:45,808 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-02-27 15:26:45,820 p=137138 u=qupeng |  TASK [pd : deploy binary] **************************************************************************************************************************************************
2018-02-27 15:26:47,430 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:26:47,444 p=137138 u=qupeng |  TASK [pd : backup bianry file] *********************************************************************************************************************************************
2018-02-27 15:26:47,481 p=137138 u=qupeng |  TASK [pd : create startup script] ******************************************************************************************************************************************
2018-02-27 15:26:49,418 p=137138 u=qupeng |  changed: [pd] => (item=run)
2018-02-27 15:26:49,433 p=137138 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-02-27 15:26:49,481 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-02-27 15:26:49,495 p=137138 u=qupeng |  TASK [pd : deploy supervise] ***********************************************************************************************************************************************
2018-02-27 15:26:50,055 p=137138 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:26:50,803 p=137138 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/pd)
2018-02-27 15:26:50,818 p=137138 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:26:52,263 p=137138 u=qupeng |  ok: [pd] => (item=supervise)
2018-02-27 15:26:53,706 p=137138 u=qupeng |  ok: [pd] => (item=svc)
2018-02-27 15:26:55,080 p=137138 u=qupeng |  ok: [pd] => (item=svstat)
2018-02-27 15:26:55,100 p=137138 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:26:56,505 p=137138 u=qupeng |  ok: [pd] => (item=start)
2018-02-27 15:26:57,931 p=137138 u=qupeng |  ok: [pd] => (item=stop)
2018-02-27 15:26:57,947 p=137138 u=qupeng |  TASK [pd : prepare firewalld white list] ***********************************************************************************************************************************
2018-02-27 15:26:58,011 p=137138 u=qupeng |  ok: [pd]
2018-02-27 15:26:58,022 p=137138 u=qupeng |  PLAY [deploying TiKV cluster] **********************************************************************************************************************************************
2018-02-27 15:26:58,043 p=137138 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:26:58,708 p=137138 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/scripts)
2018-02-27 15:26:58,726 p=137138 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/scripts)
2018-02-27 15:26:58,741 p=137138 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/scripts)
2018-02-27 15:26:58,760 p=137138 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/scripts)
2018-02-27 15:26:58,775 p=137138 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/scripts)
2018-02-27 15:26:59,293 p=137138 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-02-27 15:26:59,350 p=137138 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-02-27 15:26:59,353 p=137138 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-02-27 15:26:59,355 p=137138 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-02-27 15:26:59,370 p=137138 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-02-27 15:26:59,904 p=137138 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/backup)
2018-02-27 15:26:59,982 p=137138 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/backup)
2018-02-27 15:26:59,991 p=137138 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/backup)
2018-02-27 15:27:00,001 p=137138 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/backup)
2018-02-27 15:27:00,004 p=137138 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/backup)
2018-02-27 15:27:00,018 p=137138 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:27:00,653 p=137138 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status)
2018-02-27 15:27:00,686 p=137138 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status)
2018-02-27 15:27:00,700 p=137138 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status)
2018-02-27 15:27:00,710 p=137138 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status)
2018-02-27 15:27:00,739 p=137138 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status)
2018-02-27 15:27:00,747 p=137138 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:27:01,389 p=137138 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/bin)
2018-02-27 15:27:01,398 p=137138 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/bin)
2018-02-27 15:27:01,402 p=137138 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/bin)
2018-02-27 15:27:01,417 p=137138 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/bin)
2018-02-27 15:27:01,438 p=137138 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/bin)
2018-02-27 15:27:01,448 p=137138 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:27:01,529 p=137138 u=qupeng |  TASK [tikv : create deploy directories] ************************************************************************************************************************************
2018-02-27 15:27:02,173 p=137138 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/log)
2018-02-27 15:27:02,175 p=137138 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/log)
2018-02-27 15:27:02,205 p=137138 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/log)
2018-02-27 15:27:02,224 p=137138 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/log)
2018-02-27 15:27:02,235 p=137138 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/log)
2018-02-27 15:27:02,764 p=137138 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/data)
2018-02-27 15:27:02,769 p=137138 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/data)
2018-02-27 15:27:02,824 p=137138 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/data)
2018-02-27 15:27:02,836 p=137138 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/data)
2018-02-27 15:27:02,848 p=137138 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/data)
2018-02-27 15:27:03,360 p=137138 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-02-27 15:27:03,366 p=137138 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-02-27 15:27:03,452 p=137138 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-02-27 15:27:03,454 p=137138 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-02-27 15:27:03,465 p=137138 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-02-27 15:27:03,473 p=137138 u=qupeng |  TASK [tikv : load customized config] ***************************************************************************************************************************************
2018-02-27 15:27:03,515 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:27:03,531 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:27:03,542 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:27:03,562 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:27:03,570 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:27:03,577 p=137138 u=qupeng |  TASK [tikv : load default config] ******************************************************************************************************************************************
2018-02-27 15:27:03,618 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:27:03,635 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:27:03,655 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:27:03,664 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:27:03,671 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:27:03,678 p=137138 u=qupeng |  TASK [tikv : generate metrics config] **************************************************************************************************************************************
2018-02-27 15:27:03,757 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:27:03,759 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:27:03,784 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:27:03,816 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:27:03,823 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:27:03,830 p=137138 u=qupeng |  TASK [tikv : generate final config] ****************************************************************************************************************************************
2018-02-27 15:27:03,881 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:27:03,887 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:27:03,890 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:27:03,909 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:27:03,940 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:27:03,947 p=137138 u=qupeng |  TASK [tikv : debug] ********************************************************************************************************************************************************
2018-02-27 15:27:03,999 p=137138 u=qupeng |  ok: [tikv2] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:27:04,002 p=137138 u=qupeng |  ok: [tikv1] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:27:04,028 p=137138 u=qupeng |  ok: [tikv3] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:27:04,039 p=137138 u=qupeng |  ok: [tikv5] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:27:04,040 p=137138 u=qupeng |  ok: [tikv4] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-02-27 15:27:04,047 p=137138 u=qupeng |  TASK [tikv : create config file] *******************************************************************************************************************************************
2018-02-27 15:27:05,771 p=137138 u=qupeng |  changed: [tikv1]
2018-02-27 15:27:05,806 p=137138 u=qupeng |  changed: [tikv4]
2018-02-27 15:27:05,821 p=137138 u=qupeng |  changed: [tikv2]
2018-02-27 15:27:05,836 p=137138 u=qupeng |  changed: [tikv3]
2018-02-27 15:27:05,837 p=137138 u=qupeng |  changed: [tikv5]
2018-02-27 15:27:05,849 p=137138 u=qupeng |  TASK [tikv : backup conf file] *********************************************************************************************************************************************
2018-02-27 15:27:06,597 p=137138 u=qupeng |  changed: [tikv1]
2018-02-27 15:27:06,605 p=137138 u=qupeng |  changed: [tikv2]
2018-02-27 15:27:06,614 p=137138 u=qupeng |  changed: [tikv4]
2018-02-27 15:27:06,736 p=137138 u=qupeng |  changed: [tikv5]
2018-02-27 15:27:07,630 p=137138 u=qupeng |  changed: [tikv3]
2018-02-27 15:27:07,638 p=137138 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-02-27 15:27:07,769 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/binary_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-02-27 15:27:07,789 p=137138 u=qupeng |  TASK [tikv : deploy binary] ************************************************************************************************************************************************
2018-02-27 15:27:09,667 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:27:09,730 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:27:09,744 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:27:09,754 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:27:09,860 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:27:09,873 p=137138 u=qupeng |  TASK [tikv : backup bianry file] *******************************************************************************************************************************************
2018-02-27 15:27:09,955 p=137138 u=qupeng |  TASK [tikv : create run script] ********************************************************************************************************************************************
2018-02-27 15:27:11,713 p=137138 u=qupeng |  changed: [tikv3] => (item=run)
2018-02-27 15:27:11,755 p=137138 u=qupeng |  changed: [tikv1] => (item=run)
2018-02-27 15:27:11,765 p=137138 u=qupeng |  changed: [tikv2] => (item=run)
2018-02-27 15:27:11,803 p=137138 u=qupeng |  changed: [tikv5] => (item=run)
2018-02-27 15:27:11,845 p=137138 u=qupeng |  changed: [tikv4] => (item=run)
2018-02-27 15:27:11,861 p=137138 u=qupeng |  TASK [tikv : backup script file] *******************************************************************************************************************************************
2018-02-27 15:27:11,963 p=137138 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-02-27 15:27:12,069 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/supervise_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-02-27 15:27:12,082 p=137138 u=qupeng |  TASK [tikv : deploy supervise] *********************************************************************************************************************************************
2018-02-27 15:27:14,791 p=137138 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:27:15,555 p=137138 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status/tikv)
2018-02-27 15:27:15,557 p=137138 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status/tikv)
2018-02-27 15:27:15,559 p=137138 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status/tikv)
2018-02-27 15:27:15,560 p=137138 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status/tikv)
2018-02-27 15:27:15,562 p=137138 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status/tikv)
2018-02-27 15:27:15,572 p=137138 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:27:16,887 p=137138 u=qupeng |  ok: [tikv2] => (item=supervise)
2018-02-27 15:27:16,895 p=137138 u=qupeng |  ok: [tikv1] => (item=supervise)
2018-02-27 15:27:16,932 p=137138 u=qupeng |  ok: [tikv3] => (item=supervise)
2018-02-27 15:27:16,965 p=137138 u=qupeng |  ok: [tikv5] => (item=supervise)
2018-02-27 15:27:16,983 p=137138 u=qupeng |  ok: [tikv4] => (item=supervise)
2018-02-27 15:27:18,166 p=137138 u=qupeng |  ok: [tikv3] => (item=svc)
2018-02-27 15:27:18,174 p=137138 u=qupeng |  ok: [tikv1] => (item=svc)
2018-02-27 15:27:18,201 p=137138 u=qupeng |  ok: [tikv2] => (item=svc)
2018-02-27 15:27:18,277 p=137138 u=qupeng |  ok: [tikv5] => (item=svc)
2018-02-27 15:27:18,282 p=137138 u=qupeng |  ok: [tikv4] => (item=svc)
2018-02-27 15:27:19,513 p=137138 u=qupeng |  ok: [tikv3] => (item=svstat)
2018-02-27 15:27:19,518 p=137138 u=qupeng |  ok: [tikv2] => (item=svstat)
2018-02-27 15:27:19,526 p=137138 u=qupeng |  ok: [tikv1] => (item=svstat)
2018-02-27 15:27:19,618 p=137138 u=qupeng |  ok: [tikv4] => (item=svstat)
2018-02-27 15:27:19,622 p=137138 u=qupeng |  ok: [tikv5] => (item=svstat)
2018-02-27 15:27:19,632 p=137138 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:27:20,973 p=137138 u=qupeng |  ok: [tikv4] => (item=start)
2018-02-27 15:27:20,986 p=137138 u=qupeng |  ok: [tikv3] => (item=start)
2018-02-27 15:27:20,989 p=137138 u=qupeng |  ok: [tikv5] => (item=start)
2018-02-27 15:27:20,993 p=137138 u=qupeng |  ok: [tikv2] => (item=start)
2018-02-27 15:27:21,000 p=137138 u=qupeng |  ok: [tikv1] => (item=start)
2018-02-27 15:27:22,349 p=137138 u=qupeng |  ok: [tikv5] => (item=stop)
2018-02-27 15:27:22,377 p=137138 u=qupeng |  ok: [tikv2] => (item=stop)
2018-02-27 15:27:22,380 p=137138 u=qupeng |  ok: [tikv4] => (item=stop)
2018-02-27 15:27:22,392 p=137138 u=qupeng |  ok: [tikv3] => (item=stop)
2018-02-27 15:27:22,394 p=137138 u=qupeng |  ok: [tikv1] => (item=stop)
2018-02-27 15:27:22,404 p=137138 u=qupeng |  TASK [tikv : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 15:27:22,466 p=137138 u=qupeng |  ok: [tikv1]
2018-02-27 15:27:22,480 p=137138 u=qupeng |  ok: [tikv2]
2018-02-27 15:27:22,488 p=137138 u=qupeng |  ok: [tikv3]
2018-02-27 15:27:22,514 p=137138 u=qupeng |  ok: [tikv4]
2018-02-27 15:27:22,516 p=137138 u=qupeng |  ok: [tikv5]
2018-02-27 15:27:22,523 p=137138 u=qupeng |  PLAY [deploying TiDB cluster] **********************************************************************************************************************************************
2018-02-27 15:27:22,536 p=137138 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:27:22,587 p=137138 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:27:22,619 p=137138 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:27:22,649 p=137138 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:27:22,675 p=137138 u=qupeng |  TASK [pump : create deploy directories] ************************************************************************************************************************************
2018-02-27 15:27:22,709 p=137138 u=qupeng |  TASK [pump : include] ******************************************************************************************************************************************************
2018-02-27 15:27:22,730 p=137138 u=qupeng |  TASK [pump : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 15:27:22,751 p=137138 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:27:23,476 p=137138 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/scripts)
2018-02-27 15:27:24,287 p=137138 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-02-27 15:27:24,981 p=137138 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/backup)
2018-02-27 15:27:24,997 p=137138 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:27:25,045 p=137138 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:27:25,918 p=137138 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/bin)
2018-02-27 15:27:25,933 p=137138 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:27:25,978 p=137138 u=qupeng |  TASK [tidb : create deploy directories] ************************************************************************************************************************************
2018-02-27 15:27:26,850 p=137138 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/log)
2018-02-27 15:27:27,534 p=137138 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-02-27 15:27:27,549 p=137138 u=qupeng |  TASK [tidb : load customized config] ***************************************************************************************************************************************
2018-02-27 15:27:27,609 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:27:27,624 p=137138 u=qupeng |  TASK [tidb : load default config] ******************************************************************************************************************************************
2018-02-27 15:27:27,673 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:27:27,689 p=137138 u=qupeng |  TASK [tidb : generate metrics config] **************************************************************************************************************************************
2018-02-27 15:27:27,762 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:27:27,777 p=137138 u=qupeng |  TASK [tidb : combine final config] *****************************************************************************************************************************************
2018-02-27 15:27:27,823 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:27:27,837 p=137138 u=qupeng |  TASK [tidb : debug] ********************************************************************************************************************************************************
2018-02-27 15:27:27,884 p=137138 u=qupeng |  ok: [tidb] => {
    "tidb_conf": {
        "global": {
            "enable-chunk": true, 
            "host": "0.0.0.0", 
            "lease": "10s", 
            "run-ddl": true, 
            "split-table": true, 
            "store": "tikv"
        }, 
        "log": {
            "disable-timestamp": false, 
            "file": {
                "log-rotate": true
            }, 
            "format": "text", 
            "level": "info", 
            "query-log-max-len": 2048, 
            "slow-threshold": 300
        }, 
        "opentracing": {
            "enable": false, 
            "reporter": {
                "buffer-flush-interval": 0, 
                "local-agent-host-port": "", 
                "log-spans": false, 
                "queue-size": 0
            }, 
            "rpc-metrics": false, 
            "sampler": {
                "max-operations": 0, 
                "param": 1.0, 
                "sampling-refresh-interval": 0, 
                "sampling-server-url": "", 
                "type": "const"
            }
        }, 
        "performance": {
            "cross-join": true, 
            "join-concurrency": 5, 
            "max-procs": 0, 
            "retry-limit": 10, 
            "run-auto-analyze": true, 
            "stats-lease": "3s", 
            "tcp-keep-alive": true
        }, 
        "plan_cache": {
            "capacity": 2560, 
            "enabled": false, 
            "shards": 256
        }, 
        "prepared_plan_cache": {
            "capacity": 100, 
            "enabled": false
        }, 
        "proxy_protocol": {
            "header-timeout": 5, 
            "networks": ""
        }, 
        "security": {
            "cluster-ssl-ca": "", 
            "cluster-ssl-cert": "", 
            "cluster-ssl-key": "", 
            "ssl-ca": "", 
            "ssl-cert": "", 
            "ssl-key": ""
        }, 
        "status": {
            "metrics-addr": "172.16.21.1:60011", 
            "metrics-interval": 15, 
            "report-status": true
        }, 
        "tikv_client": {
            "grpc-connection-count": 16
        }, 
        "xprotocol": {
            "xhost": "0.0.0.0", 
            "xport": 14000, 
            "xserver": false, 
            "xsocket": ""
        }
    }
}
2018-02-27 15:27:27,898 p=137138 u=qupeng |  TASK [tidb : create config file] *******************************************************************************************************************************************
2018-02-27 15:27:29,799 p=137138 u=qupeng |  changed: [tidb]
2018-02-27 15:27:29,814 p=137138 u=qupeng |  TASK [tidb : backup conf file] *********************************************************************************************************************************************
2018-02-27 15:27:30,702 p=137138 u=qupeng |  changed: [tidb]
2018-02-27 15:27:30,711 p=137138 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-02-27 15:27:30,761 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/binary_deployment.yml for tidb
2018-02-27 15:27:30,774 p=137138 u=qupeng |  TASK [tidb : deploy binary] ************************************************************************************************************************************************
2018-02-27 15:27:32,418 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:27:32,432 p=137138 u=qupeng |  TASK [tidb : backup binary file] *******************************************************************************************************************************************
2018-02-27 15:27:32,468 p=137138 u=qupeng |  TASK [tidb : create run script] ********************************************************************************************************************************************
2018-02-27 15:27:34,401 p=137138 u=qupeng |  changed: [tidb] => (item=run)
2018-02-27 15:27:34,417 p=137138 u=qupeng |  TASK [tidb : backup script file] *******************************************************************************************************************************************
2018-02-27 15:27:34,452 p=137138 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-02-27 15:27:34,505 p=137138 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/supervise_deployment.yml for tidb
2018-02-27 15:27:34,520 p=137138 u=qupeng |  TASK [tidb : deploy supervise] *********************************************************************************************************************************************
2018-02-27 15:27:35,335 p=137138 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-02-27 15:27:36,098 p=137138 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/status/tidb)
2018-02-27 15:27:36,109 p=137138 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-02-27 15:27:37,610 p=137138 u=qupeng |  ok: [tidb] => (item=supervise)
2018-02-27 15:27:38,950 p=137138 u=qupeng |  ok: [tidb] => (item=svc)
2018-02-27 15:27:40,353 p=137138 u=qupeng |  ok: [tidb] => (item=svstat)
2018-02-27 15:27:40,362 p=137138 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-02-27 15:27:41,848 p=137138 u=qupeng |  ok: [tidb] => (item=start)
2018-02-27 15:27:43,342 p=137138 u=qupeng |  ok: [tidb] => (item=stop)
2018-02-27 15:27:43,357 p=137138 u=qupeng |  TASK [tidb : prepare firewalld white list] *********************************************************************************************************************************
2018-02-27 15:27:43,411 p=137138 u=qupeng |  ok: [tidb]
2018-02-27 15:27:43,420 p=137138 u=qupeng |  PLAY [finalizing deployment target] ****************************************************************************************************************************************
2018-02-27 15:27:43,441 p=137138 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-02-27 15:27:43,587 p=137138 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-02-27 15:27:43,720 p=137138 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-02-27 15:27:43,862 p=137138 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-02-27 15:27:44,036 p=137138 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-02-27 15:27:44,201 p=137138 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-02-27 15:27:44,374 p=137138 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-02-27 15:27:44,550 p=137138 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-02-27 15:27:44,722 p=137138 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 15:27:44,723 p=137138 u=qupeng |  172.16.21.1                : ok=28   changed=2    unreachable=0    failed=0   
2018-02-27 15:27:44,723 p=137138 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-02-27 15:27:44,723 p=137138 u=qupeng |  monitoring                 : ok=39   changed=5    unreachable=0    failed=0   
2018-02-27 15:27:44,723 p=137138 u=qupeng |  pd                         : ok=52   changed=4    unreachable=0    failed=0   
2018-02-27 15:27:44,723 p=137138 u=qupeng |  tidb                       : ok=30   changed=3    unreachable=0    failed=0   
2018-02-27 15:27:44,723 p=137138 u=qupeng |  tikv1                      : ok=31   changed=3    unreachable=0    failed=0   
2018-02-27 15:27:44,724 p=137138 u=qupeng |  tikv2                      : ok=31   changed=3    unreachable=0    failed=0   
2018-02-27 15:27:44,724 p=137138 u=qupeng |  tikv3                      : ok=31   changed=3    unreachable=0    failed=0   
2018-02-27 15:27:44,724 p=137138 u=qupeng |  tikv4                      : ok=31   changed=3    unreachable=0    failed=0   
2018-02-27 15:27:44,724 p=137138 u=qupeng |  tikv5                      : ok=31   changed=3    unreachable=0    failed=0   
2018-02-27 15:27:44,724 p=137138 u=qupeng |  Congrats! All goes well. :-)
2018-02-27 15:27:58,017 p=161385 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 15:27:58,031 p=161385 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 15:27:58,057 p=161385 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 15:27:58,082 p=161385 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 15:27:58,097 p=161385 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 15:27:58,116 p=161385 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 15:27:58,136 p=161385 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 15:27:58,212 p=161385 u=qupeng |  ok: [localhost]
2018-02-27 15:27:58,220 p=161385 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-02-27 15:27:58,248 p=161385 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 15:27:58,407 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:27:58,429 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:27:58,445 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:27:58,460 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:27:58,461 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:27:58,543 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:27:58,558 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:27:58,571 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:27:58,586 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:27:58,599 p=161385 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 15:28:04,179 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:28:04,384 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:04,749 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:28:04,902 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:28:04,951 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:28:09,670 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:28:09,969 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:28:10,084 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:28:11,317 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:28:11,346 p=161385 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 15:28:12,288 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:28:12,303 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:28:12,318 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:28:12,332 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:12,334 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:28:12,993 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:28:13,015 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:28:13,041 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:28:13,046 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:28:13,054 p=161385 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 15:28:13,165 p=161385 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 15:28:13,273 p=161385 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 15:28:13,384 p=161385 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 15:28:13,431 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:13,442 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:28:13,465 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:28:13,477 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:28:13,478 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:28:13,479 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:28:13,498 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:28:13,502 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:28:13,506 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:28:13,514 p=161385 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 15:28:13,621 p=161385 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 15:28:13,722 p=161385 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 15:28:13,825 p=161385 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 15:28:14,594 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:28:14,617 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:28:14,630 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:28:14,643 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:28:14,644 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:15,354 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:28:15,357 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:28:15,364 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:28:15,406 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:28:15,422 p=161385 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 15:28:16,165 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:16,179 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:28:16,205 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:28:16,223 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:28:16,226 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:28:16,863 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:28:16,895 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:28:16,944 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:28:16,985 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:28:17,000 p=161385 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 15:28:17,136 p=161385 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 15:28:17,244 p=161385 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 15:28:18,255 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:18,271 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:28:18,287 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:28:18,301 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:28:18,303 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:28:19,060 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:28:19,107 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:28:19,165 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:28:19,214 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:28:19,227 p=161385 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 15:28:19,351 p=161385 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 15:28:19,461 p=161385 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 15:28:20,331 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:28:20,346 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:28:20,359 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:28:20,372 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:20,373 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:28:21,222 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:28:21,230 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:28:21,233 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:28:21,244 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:28:21,256 p=161385 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 15:28:22,102 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:22,123 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:28:22,142 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:28:22,195 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:28:22,198 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:28:22,960 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:28:22,980 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:28:23,045 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:28:23,093 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:28:23,101 p=161385 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-02-27 15:28:23,147 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:23,158 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:28:23,172 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:28:23,183 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:28:23,195 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:28:23,196 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:28:23,202 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:28:23,216 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:28:23,224 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:28:23,231 p=161385 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:28:23,300 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:28:23,312 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:23,326 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:28:23,338 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:28:23,338 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:28:23,347 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:28:23,359 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:28:23,372 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:28:23,400 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:28:23,411 p=161385 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:28:23,458 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:23,487 p=161385 u=qupeng |  ok: [monitoring]
2018-02-27 15:28:23,503 p=161385 u=qupeng |  ok: [tidb]
2018-02-27 15:28:23,518 p=161385 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:28:23,536 p=161385 u=qupeng |  ok: [tikv1]
2018-02-27 15:28:23,542 p=161385 u=qupeng |  ok: [tikv3]
2018-02-27 15:28:23,549 p=161385 u=qupeng |  ok: [tikv2]
2018-02-27 15:28:23,558 p=161385 u=qupeng |  ok: [tikv4]
2018-02-27 15:28:23,573 p=161385 u=qupeng |  ok: [tikv5]
2018-02-27 15:28:23,581 p=161385 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-02-27 15:28:23,593 p=161385 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-02-27 15:28:24,527 p=161385 u=qupeng |  changed: [pd] => (item=node_exporter)
2018-02-27 15:28:24,537 p=161385 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-02-27 15:28:24,557 p=161385 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-02-27 15:28:24,588 p=161385 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:28:25,435 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:25,442 p=161385 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-02-27 15:28:25,456 p=161385 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-02-27 15:28:26,404 p=161385 u=qupeng |  changed: [pd] => (item=blackbox_exporter)
2018-02-27 15:28:26,418 p=161385 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-02-27 15:28:26,450 p=161385 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-02-27 15:28:26,480 p=161385 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:28:27,186 p=161385 u=qupeng |  ok: [pd]
2018-02-27 15:28:27,195 p=161385 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-02-27 15:28:27,209 p=161385 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-02-27 15:28:28,187 p=161385 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-02-27 15:28:29,085 p=161385 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-02-27 15:28:29,099 p=161385 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-02-27 15:28:29,135 p=161385 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-02-27 15:28:29,170 p=161385 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-02-27 15:29:58,057 p=161385 u=qupeng |   [ERROR]: User interrupted execution

2018-02-27 15:30:22,080 p=167835 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-02-27 15:30:22,096 p=167835 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-02-27 15:30:22,120 p=167835 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-02-27 15:30:22,140 p=167835 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-02-27 15:30:22,155 p=167835 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-02-27 15:30:22,181 p=167835 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-02-27 15:30:22,200 p=167835 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-02-27 15:30:22,269 p=167835 u=qupeng |  ok: [localhost]
2018-02-27 15:30:22,278 p=167835 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-02-27 15:30:22,308 p=167835 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-02-27 15:30:22,453 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:22,478 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:22,498 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:22,516 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:22,517 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:22,580 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:22,620 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:22,637 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:22,639 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:22,648 p=167835 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-02-27 15:30:28,760 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:28,996 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:29,561 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:29,697 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:29,881 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:34,626 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:35,163 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:35,236 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:35,510 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:35,529 p=167835 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-02-27 15:30:36,462 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:36,476 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:36,489 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:36,504 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:36,525 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:37,213 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:37,247 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:37,250 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:37,259 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:37,270 p=167835 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-02-27 15:30:37,379 p=167835 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-02-27 15:30:37,480 p=167835 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-02-27 15:30:37,607 p=167835 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-02-27 15:30:37,657 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:37,668 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:37,680 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:37,692 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:37,693 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:37,693 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:37,703 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:37,710 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:37,732 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:37,738 p=167835 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-02-27 15:30:37,842 p=167835 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-02-27 15:30:37,938 p=167835 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-02-27 15:30:38,042 p=167835 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-02-27 15:30:38,799 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:38,814 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:38,854 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:38,872 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:38,873 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:39,475 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:39,501 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:39,531 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:39,565 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:39,573 p=167835 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-02-27 15:30:40,322 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:40,336 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:40,358 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:40,375 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:40,377 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:41,015 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:41,030 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:41,092 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:41,098 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:41,108 p=167835 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-02-27 15:30:41,213 p=167835 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-02-27 15:30:41,316 p=167835 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-02-27 15:30:42,304 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:42,327 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:42,348 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:42,364 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:42,367 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:43,125 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:43,144 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:43,188 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:43,190 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:43,201 p=167835 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-02-27 15:30:43,308 p=167835 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-02-27 15:30:43,408 p=167835 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-02-27 15:30:44,261 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:44,284 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:44,315 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:44,329 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:44,330 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:45,125 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:45,152 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:45,154 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:45,180 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:45,193 p=167835 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-02-27 15:30:46,048 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:46,065 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:46,082 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:46,097 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:46,129 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:46,908 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:46,911 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:46,920 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:46,928 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:46,938 p=167835 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-02-27 15:30:46,972 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:46,983 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:46,994 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:47,015 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:47,026 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:47,027 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:47,037 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:47,038 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:47,049 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:47,056 p=167835 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:30:47,111 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:47,122 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:47,132 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:47,144 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:47,145 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:47,156 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:47,172 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:47,182 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:47,186 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:47,194 p=167835 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-02-27 15:30:47,246 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:47,263 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:47,274 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:30:47,286 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:30:47,287 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:30:47,289 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:30:47,310 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:30:47,317 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:30:47,322 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:30:47,328 p=167835 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-02-27 15:30:47,335 p=167835 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-02-27 15:30:48,279 p=167835 u=qupeng |  changed: [pd] => (item=node_exporter)
2018-02-27 15:30:48,288 p=167835 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-02-27 15:30:48,316 p=167835 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-02-27 15:30:48,341 p=167835 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:30:49,206 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:49,211 p=167835 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-02-27 15:30:49,219 p=167835 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-02-27 15:30:50,146 p=167835 u=qupeng |  changed: [pd] => (item=blackbox_exporter)
2018-02-27 15:30:50,160 p=167835 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-02-27 15:30:50,192 p=167835 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-02-27 15:30:50,221 p=167835 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:30:50,917 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:30:50,926 p=167835 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-02-27 15:30:50,942 p=167835 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-02-27 15:30:51,937 p=167835 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-02-27 15:30:52,824 p=167835 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-02-27 15:30:52,838 p=167835 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-02-27 15:30:52,872 p=167835 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-02-27 15:30:52,903 p=167835 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-02-27 15:30:53,603 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:53,616 p=167835 u=qupeng |  TASK [wait prometheus up] **************************************************************************************************************************************************
2018-02-27 15:30:54,305 p=167835 u=qupeng |  ok: [monitoring]
2018-02-27 15:30:54,311 p=167835 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-02-27 15:30:54,323 p=167835 u=qupeng |  TASK [start PD by supervise] ***********************************************************************************************************************************************
2018-02-27 15:30:55,168 p=167835 u=qupeng |  changed: [pd] => (item=pd)
2018-02-27 15:30:55,181 p=167835 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-02-27 15:30:55,213 p=167835 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-02-27 15:30:55,243 p=167835 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:31:00,205 p=167835 u=qupeng |  ok: [pd]
2018-02-27 15:31:00,215 p=167835 u=qupeng |  PLAY [tikv_servers] ********************************************************************************************************************************************************
2018-02-27 15:31:00,232 p=167835 u=qupeng |  TASK [start TiKV by supervise] *********************************************************************************************************************************************
2018-02-27 15:31:01,015 p=167835 u=qupeng |  changed: [tikv1] => (item=tikv)
2018-02-27 15:31:01,021 p=167835 u=qupeng |  changed: [tikv2] => (item=tikv)
2018-02-27 15:31:01,043 p=167835 u=qupeng |  changed: [tikv3] => (item=tikv)
2018-02-27 15:31:01,084 p=167835 u=qupeng |  changed: [tikv4] => (item=tikv)
2018-02-27 15:31:01,098 p=167835 u=qupeng |  changed: [tikv5] => (item=tikv)
2018-02-27 15:31:01,106 p=167835 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-02-27 15:31:01,163 p=167835 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-02-27 15:31:01,222 p=167835 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:31:03,082 p=167835 u=qupeng |  ok: [tikv3]
2018-02-27 15:31:03,085 p=167835 u=qupeng |  ok: [tikv1]
2018-02-27 15:31:03,086 p=167835 u=qupeng |  ok: [tikv5]
2018-02-27 15:31:03,095 p=167835 u=qupeng |  ok: [tikv4]
2018-02-27 15:31:03,128 p=167835 u=qupeng |  ok: [tikv2]
2018-02-27 15:31:03,144 p=167835 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:31:03,242 p=167835 u=qupeng |  TASK [command] *************************************************************************************************************************************************************
2018-02-27 15:31:03,939 p=167835 u=qupeng |  changed: [tikv1]
2018-02-27 15:31:03,968 p=167835 u=qupeng |  changed: [tikv4]
2018-02-27 15:31:03,992 p=167835 u=qupeng |  changed: [tikv5]
2018-02-27 15:31:04,018 p=167835 u=qupeng |  changed: [tikv2]
2018-02-27 15:31:05,019 p=167835 u=qupeng |  changed: [tikv3]
2018-02-27 15:31:05,032 p=167835 u=qupeng |  TASK [display new tikv pid] ************************************************************************************************************************************************
2018-02-27 15:31:05,127 p=167835 u=qupeng |  ok: [tikv1] => {
    "msg": "tikv binary or docker pid: 173091"
}
2018-02-27 15:31:05,138 p=167835 u=qupeng |  ok: [tikv2] => {
    "msg": "tikv binary or docker pid: 173098"
}
2018-02-27 15:31:05,159 p=167835 u=qupeng |  ok: [tikv3] => {
    "msg": "tikv binary or docker pid: 173113"
}
2018-02-27 15:31:05,183 p=167835 u=qupeng |  ok: [tikv4] => {
    "msg": "tikv binary or docker pid: 173125"
}
2018-02-27 15:31:05,184 p=167835 u=qupeng |  ok: [tikv5] => {
    "msg": "tikv binary or docker pid: 173136"
}
2018-02-27 15:31:05,191 p=167835 u=qupeng |  PLAY [tidb_servers] ********************************************************************************************************************************************************
2018-02-27 15:31:05,201 p=167835 u=qupeng |  TASK [clean pump .node file] ***********************************************************************************************************************************************
2018-02-27 15:31:05,222 p=167835 u=qupeng |  TASK [start pump by supervise] *********************************************************************************************************************************************
2018-02-27 15:31:05,245 p=167835 u=qupeng |  TASK [start pump by systemd] ***********************************************************************************************************************************************
2018-02-27 15:31:05,266 p=167835 u=qupeng |  TASK [start pump by systemd] ***********************************************************************************************************************************************
2018-02-27 15:31:05,288 p=167835 u=qupeng |  TASK [wait pump up] ********************************************************************************************************************************************************
2018-02-27 15:31:05,314 p=167835 u=qupeng |  TASK [start TiDB by supervise] *********************************************************************************************************************************************
2018-02-27 15:31:06,171 p=167835 u=qupeng |  changed: [tidb] => (item=tidb)
2018-02-27 15:31:06,183 p=167835 u=qupeng |  TASK [start TiDB by systemd] ***********************************************************************************************************************************************
2018-02-27 15:31:06,213 p=167835 u=qupeng |  TASK [start TiDB by systemd] ***********************************************************************************************************************************************
2018-02-27 15:31:06,248 p=167835 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-02-27 15:31:09,941 p=167835 u=qupeng |  ok: [tidb]
2018-02-27 15:31:09,949 p=167835 u=qupeng |  PLAY [grafana_servers] *****************************************************************************************************************************************************
2018-02-27 15:31:09,965 p=167835 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-02-27 15:31:10,020 p=167835 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-02-27 15:31:10,051 p=167835 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-02-27 15:31:10,081 p=167835 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-02-27 15:31:10,123 p=167835 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-02-27 15:31:10,148 p=167835 u=qupeng |  TASK [start grafana by supervise] ******************************************************************************************************************************************
2018-02-27 15:31:11,113 p=167835 u=qupeng |  changed: [172.16.21.1] => (item=grafana)
2018-02-27 15:31:11,127 p=167835 u=qupeng |  TASK [start grafana by systemd] ********************************************************************************************************************************************
2018-02-27 15:31:11,161 p=167835 u=qupeng |  TASK [start grafana by systemd] ********************************************************************************************************************************************
2018-02-27 15:31:11,192 p=167835 u=qupeng |  TASK [wait grafana up] *****************************************************************************************************************************************************
2018-02-27 15:32:11,985 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:32:12,001 p=167835 u=qupeng |  TASK [set_fact] ************************************************************************************************************************************************************
2018-02-27 15:32:12,087 p=167835 u=qupeng |  ok: [172.16.21.1]
2018-02-27 15:32:12,100 p=167835 u=qupeng |  TASK [import grafana data source] ******************************************************************************************************************************************
2018-02-27 15:32:13,000 p=167835 u=qupeng |  changed: [172.16.21.1]
2018-02-27 15:32:13,021 p=167835 u=qupeng |  TASK [import grafana dashboards - prepare config] **************************************************************************************************************************
2018-02-27 15:32:13,562 p=167835 u=qupeng |  changed: [172.16.21.1 -> localhost]
2018-02-27 15:32:13,582 p=167835 u=qupeng |  TASK [import grafana dashboards - run import script] ***********************************************************************************************************************
2018-02-27 15:32:14,624 p=167835 u=qupeng |  changed: [172.16.21.1 -> localhost]
2018-02-27 15:32:14,627 p=167835 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-02-27 15:32:14,627 p=167835 u=qupeng |  172.16.21.1                : ok=18   changed=4    unreachable=0    failed=0   
2018-02-27 15:32:14,627 p=167835 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-02-27 15:32:14,628 p=167835 u=qupeng |  monitoring                 : ok=15   changed=1    unreachable=0    failed=0   
2018-02-27 15:32:14,628 p=167835 u=qupeng |  pd                         : ok=18   changed=3    unreachable=0    failed=0   
2018-02-27 15:32:14,628 p=167835 u=qupeng |  tidb                       : ok=14   changed=1    unreachable=0    failed=0   
2018-02-27 15:32:14,628 p=167835 u=qupeng |  tikv1                      : ok=16   changed=2    unreachable=0    failed=0   
2018-02-27 15:32:14,629 p=167835 u=qupeng |  tikv2                      : ok=16   changed=2    unreachable=0    failed=0   
2018-02-27 15:32:14,629 p=167835 u=qupeng |  tikv3                      : ok=16   changed=2    unreachable=0    failed=0   
2018-02-27 15:32:14,629 p=167835 u=qupeng |  tikv4                      : ok=16   changed=2    unreachable=0    failed=0   
2018-02-27 15:32:14,629 p=167835 u=qupeng |  tikv5                      : ok=16   changed=2    unreachable=0    failed=0   
2018-02-27 15:32:14,630 p=167835 u=qupeng |  Congrats! All goes well. :-)
2018-03-06 17:58:17,418 p=140584 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 17:58:17,441 p=140584 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 17:58:17,473 p=140584 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 17:58:17,501 p=140584 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 17:58:17,523 p=140584 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 17:58:17,550 p=140584 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 17:58:17,577 p=140584 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 17:58:17,631 p=140584 u=qupeng |  ok: [localhost]
2018-03-06 17:58:17,638 p=140584 u=qupeng |  PLAY [initializing deployment target] **************************************************************************************************************************************
2018-03-06 17:58:17,656 p=140584 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 17:58:17,793 p=140584 u=qupeng |  ok: [pd]
2018-03-06 17:58:17,817 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:58:17,830 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 17:58:17,851 p=140584 u=qupeng |  ok: [172.16.21.1]
2018-03-06 17:58:17,853 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 17:58:17,915 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 17:58:17,952 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 17:58:17,954 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 17:58:17,966 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 17:58:17,972 p=140584 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 17:58:23,004 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:58:23,056 p=140584 u=qupeng |  ok: [172.16.21.1]
2018-03-06 17:58:23,096 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 17:58:23,138 p=140584 u=qupeng |  ok: [pd]
2018-03-06 17:58:23,207 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 17:58:27,587 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 17:58:27,676 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 17:58:27,739 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 17:58:29,001 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 17:58:29,030 p=140584 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 17:58:29,931 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:58:29,960 p=140584 u=qupeng |  ok: [172.16.21.1]
2018-03-06 17:58:29,977 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 17:58:29,992 p=140584 u=qupeng |  ok: [pd]
2018-03-06 17:58:29,993 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 17:58:30,646 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 17:58:30,650 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 17:58:30,655 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 17:58:30,717 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 17:58:30,732 p=140584 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 17:58:30,861 p=140584 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 17:58:30,959 p=140584 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 17:58:31,056 p=140584 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 17:58:31,097 p=140584 u=qupeng |  ok: [pd]
2018-03-06 17:58:31,107 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:58:31,131 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 17:58:31,142 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 17:58:31,143 p=140584 u=qupeng |  ok: [172.16.21.1]
2018-03-06 17:58:31,143 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 17:58:31,158 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 17:58:31,169 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 17:58:31,171 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 17:58:31,183 p=140584 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 17:58:31,299 p=140584 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 17:58:31,432 p=140584 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 17:58:31,532 p=140584 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 17:58:32,293 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 17:58:32,317 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 17:58:32,335 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:58:32,350 p=140584 u=qupeng |  ok: [172.16.21.1]
2018-03-06 17:58:32,351 p=140584 u=qupeng |  ok: [pd]
2018-03-06 17:58:32,975 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 17:58:33,004 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 17:58:33,014 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 17:58:33,085 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 17:58:33,100 p=140584 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 17:58:33,759 p=140584 u=qupeng |  ok: [pd]
2018-03-06 17:58:33,807 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:58:33,861 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 17:58:33,874 p=140584 u=qupeng |  ok: [172.16.21.1]
2018-03-06 17:58:33,877 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 17:58:34,417 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 17:58:34,474 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 17:58:34,567 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 17:58:34,587 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 17:58:34,601 p=140584 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 17:58:34,730 p=140584 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 17:58:34,832 p=140584 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 17:58:35,573 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:58:35,593 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 17:58:35,614 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 17:58:35,631 p=140584 u=qupeng |  ok: [172.16.21.1]
2018-03-06 17:58:35,632 p=140584 u=qupeng |  ok: [pd]
2018-03-06 17:58:36,204 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 17:58:36,241 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 17:58:36,245 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 17:58:36,259 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 17:58:36,270 p=140584 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 17:58:36,385 p=140584 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 17:58:36,424 p=140584 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 17:58:36,437 p=140584 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 17:58:36,447 p=140584 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 17:58:36,472 p=140584 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 17:58:36,473 p=140584 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 17:58:36,473 p=140584 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 17:58:36,477 p=140584 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 17:58:36,498 p=140584 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 17:58:36,508 p=140584 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 17:58:36,516 p=140584 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 17:58:37,098 p=140584 u=qupeng |  ok: [pd]
2018-03-06 17:58:37,169 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 17:58:37,182 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:58:37,195 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 17:58:37,196 p=140584 u=qupeng |  ok: [172.16.21.1]
2018-03-06 17:58:37,700 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 17:58:37,734 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 17:58:37,779 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 17:58:37,791 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 17:58:37,803 p=140584 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 17:58:37,916 p=140584 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 17:58:37,946 p=140584 u=qupeng |  ok: [pd]
2018-03-06 17:58:37,957 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:58:37,978 p=140584 u=qupeng |  ok: [172.16.21.1]
2018-03-06 17:58:37,991 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 17:58:38,002 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 17:58:38,003 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 17:58:38,011 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 17:58:38,022 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 17:58:38,024 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 17:58:38,031 p=140584 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 17:58:38,134 p=140584 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 17:58:38,238 p=140584 u=qupeng |  PLAY [deploying monitoring agent] ******************************************************************************************************************************************
2018-03-06 17:58:38,247 p=140584 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 17:58:39,004 p=140584 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-03-06 17:58:39,708 p=140584 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 17:58:40,442 p=140584 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-03-06 17:58:40,458 p=140584 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 17:58:40,502 p=140584 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 17:58:41,233 p=140584 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-03-06 17:58:41,247 p=140584 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 17:58:41,293 p=140584 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-03-06 17:58:41,341 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/binary_deployment.yml for pd
2018-03-06 17:58:41,353 p=140584 u=qupeng |  TASK [node_exporter : create deploy directories] ***************************************************************************************************************************
2018-03-06 17:58:42,072 p=140584 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 17:58:42,088 p=140584 u=qupeng |  TASK [node_exporter : deploy node_exporter binary] *************************************************************************************************************************
2018-03-06 17:58:44,432 p=140584 u=qupeng |  changed: [pd]
2018-03-06 17:58:44,448 p=140584 u=qupeng |  TASK [node_exporter : create run script] ***********************************************************************************************************************************
2018-03-06 17:58:45,804 p=140584 u=qupeng |  changed: [pd] => (item=run)
2018-03-06 17:58:45,819 p=140584 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-03-06 17:58:45,865 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/supervise_deployment.yml for pd
2018-03-06 17:58:45,880 p=140584 u=qupeng |  TASK [node_exporter : deploy supervise] ************************************************************************************************************************************
2018-03-06 17:58:46,388 p=140584 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 17:58:47,116 p=140584 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/node_exporter)
2018-03-06 17:58:47,124 p=140584 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 17:58:48,514 p=140584 u=qupeng |  changed: [pd] => (item=supervise)
2018-03-06 17:58:49,914 p=140584 u=qupeng |  changed: [pd] => (item=svc)
2018-03-06 17:58:51,271 p=140584 u=qupeng |  changed: [pd] => (item=svstat)
2018-03-06 17:58:51,286 p=140584 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 17:58:52,652 p=140584 u=qupeng |  changed: [pd] => (item=start)
2018-03-06 17:58:53,998 p=140584 u=qupeng |  changed: [pd] => (item=stop)
2018-03-06 17:58:54,013 p=140584 u=qupeng |  TASK [node_exporter : prepare firewalld white list] ************************************************************************************************************************
2018-03-06 17:58:54,053 p=140584 u=qupeng |  ok: [pd]
2018-03-06 17:58:54,067 p=140584 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-03-06 17:58:54,120 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/binary_deployment.yml for pd
2018-03-06 17:58:54,135 p=140584 u=qupeng |  TASK [blackbox_exporter : create deploy directories] ***********************************************************************************************************************
2018-03-06 17:58:54,854 p=140584 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 17:58:54,869 p=140584 u=qupeng |  TASK [blackbox_exporter : deploy blackbox_exporter binary] *****************************************************************************************************************
2018-03-06 17:58:57,212 p=140584 u=qupeng |  changed: [pd]
2018-03-06 17:58:57,220 p=140584 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-03-06 17:58:57,247 p=140584 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-03-06 17:58:58,073 p=140584 u=qupeng |  changed: [pd]
2018-03-06 17:58:58,080 p=140584 u=qupeng |  TASK [blackbox_exporter : create run script] *******************************************************************************************************************************
2018-03-06 17:58:59,470 p=140584 u=qupeng |  changed: [pd] => (item=run)
2018-03-06 17:58:59,483 p=140584 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-03-06 17:58:59,521 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/supervise_deployment.yml for pd
2018-03-06 17:58:59,535 p=140584 u=qupeng |  TASK [blackbox_exporter : deploy supervise] ********************************************************************************************************************************
2018-03-06 17:59:00,130 p=140584 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 17:59:00,875 p=140584 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/blackbox_exporter)
2018-03-06 17:59:00,890 p=140584 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 17:59:02,289 p=140584 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 17:59:03,657 p=140584 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 17:59:05,124 p=140584 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 17:59:05,133 p=140584 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 17:59:06,543 p=140584 u=qupeng |  changed: [pd] => (item=start)
2018-03-06 17:59:07,927 p=140584 u=qupeng |  changed: [pd] => (item=stop)
2018-03-06 17:59:07,941 p=140584 u=qupeng |  TASK [blackbox_exporter : create config file] ******************************************************************************************************************************
2018-03-06 17:59:09,384 p=140584 u=qupeng |  changed: [pd]
2018-03-06 17:59:09,398 p=140584 u=qupeng |  TASK [blackbox_exporter : backup conf file] ********************************************************************************************************************************
2018-03-06 17:59:09,443 p=140584 u=qupeng |  TASK [blackbox_exporter : prepare firewalld white list] ********************************************************************************************************************
2018-03-06 17:59:09,502 p=140584 u=qupeng |  ok: [pd]
2018-03-06 17:59:09,511 p=140584 u=qupeng |  PLAY [deploying monitoring server] *****************************************************************************************************************************************
2018-03-06 17:59:09,530 p=140584 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 17:59:10,281 p=140584 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-03-06 17:59:10,947 p=140584 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-03-06 17:59:11,645 p=140584 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-03-06 17:59:11,660 p=140584 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 17:59:11,692 p=140584 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 17:59:12,394 p=140584 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-03-06 17:59:12,408 p=140584 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 17:59:12,444 p=140584 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-03-06 17:59:12,486 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/binary_deployment.yml for monitoring
2018-03-06 17:59:12,500 p=140584 u=qupeng |  TASK [pushgateway : create deploy directories] *****************************************************************************************************************************
2018-03-06 17:59:13,248 p=140584 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 17:59:13,260 p=140584 u=qupeng |  TASK [pushgateway : deploy pushgateway binary] *****************************************************************************************************************************
2018-03-06 17:59:14,770 p=140584 u=qupeng |  changed: [monitoring]
2018-03-06 17:59:14,783 p=140584 u=qupeng |  TASK [pushgateway : create run script] *************************************************************************************************************************************
2018-03-06 17:59:16,194 p=140584 u=qupeng |  changed: [monitoring] => (item=run)
2018-03-06 17:59:16,208 p=140584 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-03-06 17:59:16,252 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/supervise_deployment.yml for monitoring
2018-03-06 17:59:16,265 p=140584 u=qupeng |  TASK [pushgateway : deploy supervise] **************************************************************************************************************************************
2018-03-06 17:59:16,806 p=140584 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 17:59:17,550 p=140584 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/pushgateway)
2018-03-06 17:59:17,564 p=140584 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 17:59:18,933 p=140584 u=qupeng |  changed: [monitoring] => (item=supervise)
2018-03-06 17:59:20,336 p=140584 u=qupeng |  changed: [monitoring] => (item=svc)
2018-03-06 17:59:21,696 p=140584 u=qupeng |  changed: [monitoring] => (item=svstat)
2018-03-06 17:59:21,712 p=140584 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 17:59:23,146 p=140584 u=qupeng |  changed: [monitoring] => (item=start)
2018-03-06 17:59:24,504 p=140584 u=qupeng |  changed: [monitoring] => (item=stop)
2018-03-06 17:59:24,513 p=140584 u=qupeng |  TASK [pushgateway : prepare firewalld white list] **************************************************************************************************************************
2018-03-06 17:59:24,549 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:59:24,560 p=140584 u=qupeng |  TASK [prometheus : create deploy directories] ******************************************************************************************************************************
2018-03-06 17:59:25,263 p=140584 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 17:59:25,987 p=140584 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-03-06 17:59:26,679 p=140584 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-03-06 17:59:26,694 p=140584 u=qupeng |  TASK [prometheus : get config file stat] ***********************************************************************************************************************************
2018-03-06 17:59:27,398 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:59:27,410 p=140584 u=qupeng |  TASK [prometheus : get alert conf stat] ************************************************************************************************************************************
2018-03-06 17:59:28,105 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:59:28,118 p=140584 u=qupeng |  TASK [prometheus : create configuration file if not exist] *****************************************************************************************************************
2018-03-06 17:59:29,820 p=140584 u=qupeng |  changed: [monitoring]
2018-03-06 17:59:29,834 p=140584 u=qupeng |  TASK [prometheus : copy alert rules file] **********************************************************************************************************************************
2018-03-06 17:59:31,254 p=140584 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-03-06 17:59:32,615 p=140584 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-03-06 17:59:33,997 p=140584 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-03-06 17:59:35,462 p=140584 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-03-06 17:59:36,824 p=140584 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-03-06 17:59:38,178 p=140584 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-03-06 17:59:39,563 p=140584 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-03-06 17:59:39,579 p=140584 u=qupeng |  TASK [prometheus : set alert rules label changes] **************************************************************************************************************************
2018-03-06 17:59:40,442 p=140584 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-03-06 17:59:41,149 p=140584 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-03-06 17:59:41,876 p=140584 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-03-06 17:59:42,585 p=140584 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-03-06 17:59:43,317 p=140584 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-03-06 17:59:43,994 p=140584 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-03-06 17:59:44,686 p=140584 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-03-06 17:59:44,702 p=140584 u=qupeng |  TASK [prometheus : create deploy data directory] ***************************************************************************************************************************
2018-03-06 17:59:45,449 p=140584 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-03-06 17:59:45,462 p=140584 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-03-06 17:59:45,514 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/binary_deployment.yml for monitoring
2018-03-06 17:59:45,527 p=140584 u=qupeng |  TASK [prometheus : create deploy log directory] ****************************************************************************************************************************
2018-03-06 17:59:46,313 p=140584 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 17:59:46,327 p=140584 u=qupeng |  TASK [prometheus : deploy prometheus binary] *******************************************************************************************************************************
2018-03-06 17:59:48,486 p=140584 u=qupeng |  changed: [monitoring]
2018-03-06 17:59:48,496 p=140584 u=qupeng |  TASK [prometheus : create run script] **************************************************************************************************************************************
2018-03-06 17:59:49,996 p=140584 u=qupeng |  changed: [monitoring] => (item=run)
2018-03-06 17:59:50,011 p=140584 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-03-06 17:59:50,061 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/supervise_deployment.yml for monitoring
2018-03-06 17:59:50,075 p=140584 u=qupeng |  TASK [prometheus : deploy supervise] ***************************************************************************************************************************************
2018-03-06 17:59:50,677 p=140584 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 17:59:51,419 p=140584 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-03-06 17:59:51,436 p=140584 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 17:59:52,877 p=140584 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-03-06 17:59:54,381 p=140584 u=qupeng |  ok: [monitoring] => (item=svc)
2018-03-06 17:59:55,759 p=140584 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-03-06 17:59:55,775 p=140584 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 17:59:57,195 p=140584 u=qupeng |  changed: [monitoring] => (item=start)
2018-03-06 17:59:58,574 p=140584 u=qupeng |  changed: [monitoring] => (item=stop)
2018-03-06 17:59:58,588 p=140584 u=qupeng |  TASK [prometheus : prepare firewalld white list] ***************************************************************************************************************************
2018-03-06 17:59:58,642 p=140584 u=qupeng |  ok: [monitoring]
2018-03-06 17:59:58,651 p=140584 u=qupeng |  PLAY [deploying grafana] ***************************************************************************************************************************************************
2018-03-06 17:59:58,665 p=140584 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 17:59:59,397 p=140584 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-03-06 18:00:00,093 p=140584 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-03-06 18:00:00,779 p=140584 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-03-06 18:00:00,794 p=140584 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:00:00,846 p=140584 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:00:01,552 p=140584 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-03-06 18:00:01,563 p=140584 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:00:01,607 p=140584 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:00:01,648 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/tasks.yml for 172.16.21.1
2018-03-06 18:00:01,659 p=140584 u=qupeng |  TASK [grafana : create common deploy directories] **************************************************************************************************************************
2018-03-06 18:00:02,390 p=140584 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:00:03,098 p=140584 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/data.grafana)
2018-03-06 18:00:03,115 p=140584 u=qupeng |  TASK [grafana : push data source file] *************************************************************************************************************************************
2018-03-06 18:00:04,585 p=140584 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:00:04,599 p=140584 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:00:04,649 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/binary_deployment.yml for 172.16.21.1
2018-03-06 18:00:04,661 p=140584 u=qupeng |  TASK [grafana : create binary deploy directories (1/2)] ********************************************************************************************************************
2018-03-06 18:00:05,317 p=140584 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt)
2018-03-06 18:00:05,333 p=140584 u=qupeng |  TASK [grafana : deploy grafana binary] *************************************************************************************************************************************
2018-03-06 18:00:12,198 p=140584 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:00:12,212 p=140584 u=qupeng |  TASK [grafana : rename grafana deploy dir] *********************************************************************************************************************************
2018-03-06 18:00:12,999 p=140584 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:00:13,013 p=140584 u=qupeng |  TASK [grafana : create binary deploy directories (2/2)] ********************************************************************************************************************
2018-03-06 18:00:13,731 p=140584 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/dashboards)
2018-03-06 18:00:14,413 p=140584 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/plugins)
2018-03-06 18:00:14,433 p=140584 u=qupeng |  TASK [grafana : create grafana configuration file] *************************************************************************************************************************
2018-03-06 18:00:15,825 p=140584 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:00:15,839 p=140584 u=qupeng |  TASK [grafana : create run script] *****************************************************************************************************************************************
2018-03-06 18:00:17,243 p=140584 u=qupeng |  changed: [172.16.21.1] => (item=run)
2018-03-06 18:00:17,257 p=140584 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:00:17,307 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/supervise_deployment.yml for 172.16.21.1
2018-03-06 18:00:17,323 p=140584 u=qupeng |  TASK [grafana : deploy supervise] ******************************************************************************************************************************************
2018-03-06 18:00:17,865 p=140584 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:00:18,601 p=140584 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/grafana)
2018-03-06 18:00:18,617 p=140584 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:00:20,008 p=140584 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-03-06 18:00:21,372 p=140584 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-03-06 18:00:22,808 p=140584 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-03-06 18:00:22,820 p=140584 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:00:24,224 p=140584 u=qupeng |  changed: [172.16.21.1] => (item=start)
2018-03-06 18:00:25,570 p=140584 u=qupeng |  changed: [172.16.21.1] => (item=stop)
2018-03-06 18:00:25,586 p=140584 u=qupeng |  TASK [grafana : prepare firewalld white list] ******************************************************************************************************************************
2018-03-06 18:00:25,639 p=140584 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:00:25,649 p=140584 u=qupeng |  PLAY [deploying PD cluster] ************************************************************************************************************************************************
2018-03-06 18:00:25,668 p=140584 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:00:26,383 p=140584 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-03-06 18:00:27,093 p=140584 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:00:27,854 p=140584 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-03-06 18:00:27,870 p=140584 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:00:27,905 p=140584 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:00:28,621 p=140584 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-03-06 18:00:28,635 p=140584 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:00:28,682 p=140584 u=qupeng |  TASK [pd : create deploy directories] **************************************************************************************************************************************
2018-03-06 18:00:29,465 p=140584 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:00:30,142 p=140584 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:00:30,825 p=140584 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/data.pd)
2018-03-06 18:00:30,836 p=140584 u=qupeng |  TASK [pd : load customized config] *****************************************************************************************************************************************
2018-03-06 18:00:30,966 p=140584 u=qupeng |  ok: [pd]
2018-03-06 18:00:30,977 p=140584 u=qupeng |  TASK [pd : load default config] ********************************************************************************************************************************************
2018-03-06 18:00:31,068 p=140584 u=qupeng |  ok: [pd]
2018-03-06 18:00:31,080 p=140584 u=qupeng |  TASK [pd : generate metrics config] ****************************************************************************************************************************************
2018-03-06 18:00:31,258 p=140584 u=qupeng |  ok: [pd]
2018-03-06 18:00:31,266 p=140584 u=qupeng |  TASK [pd : generate final config] ******************************************************************************************************************************************
2018-03-06 18:00:31,333 p=140584 u=qupeng |  ok: [pd]
2018-03-06 18:00:31,346 p=140584 u=qupeng |  TASK [pd : debug] **********************************************************************************************************************************************************
2018-03-06 18:00:31,403 p=140584 u=qupeng |  ok: [pd] => {
    "pd_conf": {
        "global": {
            "lease": 3, 
            "tso-save-interval": "3s"
        }, 
        "log": {
            "file": {}, 
            "level": "info"
        }, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s"
        }, 
        "replication": {
            "location-labels": [], 
            "max-replicas": 3
        }, 
        "schedule": {
            "leader-schedule-limit": 64, 
            "max-pending-peer-count": 16, 
            "max-snapshot-count": 3, 
            "max-store-down-time": "1h", 
            "region-schedule-limit": 16, 
            "replica-schedule-limit": 24, 
            "tolerant-size-ratio": 2.5
        }, 
        "security": {
            "cacert-path": "", 
            "cert-path": "", 
            "key-path": ""
        }
    }
}
2018-03-06 18:00:31,415 p=140584 u=qupeng |  TASK [pd : create configuration file] **************************************************************************************************************************************
2018-03-06 18:00:32,820 p=140584 u=qupeng |  changed: [pd]
2018-03-06 18:00:32,833 p=140584 u=qupeng |  TASK [pd : backup conf file] ***********************************************************************************************************************************************
2018-03-06 18:00:32,869 p=140584 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:00:32,915 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-03-06 18:00:32,928 p=140584 u=qupeng |  TASK [pd : deploy binary] **************************************************************************************************************************************************
2018-03-06 18:00:34,678 p=140584 u=qupeng |  changed: [pd]
2018-03-06 18:00:34,692 p=140584 u=qupeng |  TASK [pd : backup bianry file] *********************************************************************************************************************************************
2018-03-06 18:00:34,728 p=140584 u=qupeng |  TASK [pd : create startup script] ******************************************************************************************************************************************
2018-03-06 18:00:36,194 p=140584 u=qupeng |  changed: [pd] => (item=run)
2018-03-06 18:00:36,201 p=140584 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:00:36,233 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-03-06 18:00:36,240 p=140584 u=qupeng |  TASK [pd : deploy supervise] ***********************************************************************************************************************************************
2018-03-06 18:00:36,718 p=140584 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:00:37,476 p=140584 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/pd)
2018-03-06 18:00:37,491 p=140584 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:00:38,897 p=140584 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 18:00:40,280 p=140584 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 18:00:41,662 p=140584 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 18:00:41,679 p=140584 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:00:43,084 p=140584 u=qupeng |  changed: [pd] => (item=start)
2018-03-06 18:00:44,465 p=140584 u=qupeng |  changed: [pd] => (item=stop)
2018-03-06 18:00:44,480 p=140584 u=qupeng |  TASK [pd : prepare firewalld white list] ***********************************************************************************************************************************
2018-03-06 18:00:44,535 p=140584 u=qupeng |  ok: [pd]
2018-03-06 18:00:44,545 p=140584 u=qupeng |  PLAY [deploying TiKV cluster] **********************************************************************************************************************************************
2018-03-06 18:00:44,564 p=140584 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:00:45,178 p=140584 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/scripts)
2018-03-06 18:00:45,246 p=140584 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/scripts)
2018-03-06 18:00:45,263 p=140584 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/scripts)
2018-03-06 18:00:45,267 p=140584 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/scripts)
2018-03-06 18:00:45,294 p=140584 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/scripts)
2018-03-06 18:00:45,788 p=140584 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:00:45,818 p=140584 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-03-06 18:00:45,885 p=140584 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-03-06 18:00:45,896 p=140584 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-03-06 18:00:45,928 p=140584 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-03-06 18:00:46,393 p=140584 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/backup)
2018-03-06 18:00:46,404 p=140584 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/backup)
2018-03-06 18:00:46,489 p=140584 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/backup)
2018-03-06 18:00:46,499 p=140584 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/backup)
2018-03-06 18:00:46,507 p=140584 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/backup)
2018-03-06 18:00:46,515 p=140584 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:00:47,167 p=140584 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status)
2018-03-06 18:00:47,182 p=140584 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status)
2018-03-06 18:00:47,194 p=140584 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status)
2018-03-06 18:00:47,201 p=140584 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status)
2018-03-06 18:00:47,204 p=140584 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status)
2018-03-06 18:00:47,211 p=140584 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:00:47,853 p=140584 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/bin)
2018-03-06 18:00:47,856 p=140584 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/bin)
2018-03-06 18:00:47,866 p=140584 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/bin)
2018-03-06 18:00:47,868 p=140584 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/bin)
2018-03-06 18:00:47,886 p=140584 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/bin)
2018-03-06 18:00:47,896 p=140584 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:00:47,975 p=140584 u=qupeng |  TASK [tikv : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:00:48,570 p=140584 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/log)
2018-03-06 18:00:48,615 p=140584 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/log)
2018-03-06 18:00:48,627 p=140584 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/log)
2018-03-06 18:00:48,632 p=140584 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/log)
2018-03-06 18:00:48,652 p=140584 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/log)
2018-03-06 18:00:49,163 p=140584 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/data)
2018-03-06 18:00:49,236 p=140584 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/data)
2018-03-06 18:00:49,244 p=140584 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/data)
2018-03-06 18:00:49,257 p=140584 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/data)
2018-03-06 18:00:49,286 p=140584 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/data)
2018-03-06 18:00:49,783 p=140584 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:00:49,862 p=140584 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-03-06 18:00:49,871 p=140584 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-03-06 18:00:49,878 p=140584 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-03-06 18:00:49,887 p=140584 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-03-06 18:00:49,902 p=140584 u=qupeng |  TASK [tikv : load customized config] ***************************************************************************************************************************************
2018-03-06 18:00:49,959 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 18:00:49,979 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 18:00:49,981 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 18:00:49,989 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 18:00:50,010 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 18:00:50,021 p=140584 u=qupeng |  TASK [tikv : load default config] ******************************************************************************************************************************************
2018-03-06 18:00:50,073 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 18:00:50,093 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 18:00:50,095 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 18:00:50,100 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 18:00:50,119 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 18:00:50,125 p=140584 u=qupeng |  TASK [tikv : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:00:50,185 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 18:00:50,195 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 18:00:50,242 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 18:00:50,243 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 18:00:50,244 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 18:00:50,251 p=140584 u=qupeng |  TASK [tikv : generate final config] ****************************************************************************************************************************************
2018-03-06 18:00:50,304 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 18:00:50,305 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 18:00:50,312 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 18:00:50,334 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 18:00:50,340 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 18:00:50,347 p=140584 u=qupeng |  TASK [tikv : debug] ********************************************************************************************************************************************************
2018-03-06 18:00:50,396 p=140584 u=qupeng |  ok: [tikv1] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:00:50,405 p=140584 u=qupeng |  ok: [tikv3] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:00:50,409 p=140584 u=qupeng |  ok: [tikv2] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:00:50,434 p=140584 u=qupeng |  ok: [tikv5] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:00:50,436 p=140584 u=qupeng |  ok: [tikv4] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:00:50,442 p=140584 u=qupeng |  TASK [tikv : create config file] *******************************************************************************************************************************************
2018-03-06 18:00:51,727 p=140584 u=qupeng |  changed: [tikv3]
2018-03-06 18:00:51,730 p=140584 u=qupeng |  changed: [tikv5]
2018-03-06 18:00:51,736 p=140584 u=qupeng |  changed: [tikv4]
2018-03-06 18:00:51,745 p=140584 u=qupeng |  changed: [tikv1]
2018-03-06 18:00:51,765 p=140584 u=qupeng |  changed: [tikv2]
2018-03-06 18:00:51,772 p=140584 u=qupeng |  TASK [tikv : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:00:51,845 p=140584 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:00:51,944 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/binary_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-03-06 18:00:51,956 p=140584 u=qupeng |  TASK [tikv : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:00:55,556 p=140584 u=qupeng |  changed: [tikv4]
2018-03-06 18:00:55,570 p=140584 u=qupeng |  changed: [tikv5]
2018-03-06 18:00:55,632 p=140584 u=qupeng |  changed: [tikv1]
2018-03-06 18:00:55,643 p=140584 u=qupeng |  changed: [tikv3]
2018-03-06 18:00:55,664 p=140584 u=qupeng |  changed: [tikv2]
2018-03-06 18:00:55,673 p=140584 u=qupeng |  TASK [tikv : backup bianry file] *******************************************************************************************************************************************
2018-03-06 18:00:55,739 p=140584 u=qupeng |  TASK [tikv : create run script] ********************************************************************************************************************************************
2018-03-06 18:00:57,064 p=140584 u=qupeng |  changed: [tikv2] => (item=run)
2018-03-06 18:00:57,068 p=140584 u=qupeng |  changed: [tikv1] => (item=run)
2018-03-06 18:00:57,075 p=140584 u=qupeng |  changed: [tikv4] => (item=run)
2018-03-06 18:00:57,106 p=140584 u=qupeng |  changed: [tikv5] => (item=run)
2018-03-06 18:00:57,109 p=140584 u=qupeng |  changed: [tikv3] => (item=run)
2018-03-06 18:00:57,119 p=140584 u=qupeng |  TASK [tikv : backup script file] *******************************************************************************************************************************************
2018-03-06 18:00:57,192 p=140584 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:00:57,288 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/supervise_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-03-06 18:00:57,299 p=140584 u=qupeng |  TASK [tikv : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:00:59,914 p=140584 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:01:00,597 p=140584 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status/tikv)
2018-03-06 18:01:00,620 p=140584 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status/tikv)
2018-03-06 18:01:00,621 p=140584 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status/tikv)
2018-03-06 18:01:00,627 p=140584 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status/tikv)
2018-03-06 18:01:00,656 p=140584 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status/tikv)
2018-03-06 18:01:00,665 p=140584 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:01:02,002 p=140584 u=qupeng |  changed: [tikv1] => (item=supervise)
2018-03-06 18:01:02,009 p=140584 u=qupeng |  changed: [tikv2] => (item=supervise)
2018-03-06 18:01:02,014 p=140584 u=qupeng |  changed: [tikv4] => (item=supervise)
2018-03-06 18:01:02,018 p=140584 u=qupeng |  changed: [tikv3] => (item=supervise)
2018-03-06 18:01:02,034 p=140584 u=qupeng |  changed: [tikv5] => (item=supervise)
2018-03-06 18:01:03,340 p=140584 u=qupeng |  changed: [tikv5] => (item=svc)
2018-03-06 18:01:03,347 p=140584 u=qupeng |  changed: [tikv1] => (item=svc)
2018-03-06 18:01:03,355 p=140584 u=qupeng |  changed: [tikv4] => (item=svc)
2018-03-06 18:01:03,356 p=140584 u=qupeng |  changed: [tikv2] => (item=svc)
2018-03-06 18:01:03,362 p=140584 u=qupeng |  changed: [tikv3] => (item=svc)
2018-03-06 18:01:04,633 p=140584 u=qupeng |  changed: [tikv3] => (item=svstat)
2018-03-06 18:01:04,649 p=140584 u=qupeng |  changed: [tikv5] => (item=svstat)
2018-03-06 18:01:04,677 p=140584 u=qupeng |  changed: [tikv2] => (item=svstat)
2018-03-06 18:01:04,680 p=140584 u=qupeng |  changed: [tikv4] => (item=svstat)
2018-03-06 18:01:04,681 p=140584 u=qupeng |  changed: [tikv1] => (item=svstat)
2018-03-06 18:01:04,691 p=140584 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:01:05,938 p=140584 u=qupeng |  changed: [tikv1] => (item=start)
2018-03-06 18:01:06,049 p=140584 u=qupeng |  changed: [tikv3] => (item=start)
2018-03-06 18:01:06,056 p=140584 u=qupeng |  changed: [tikv2] => (item=start)
2018-03-06 18:01:06,071 p=140584 u=qupeng |  changed: [tikv4] => (item=start)
2018-03-06 18:01:06,083 p=140584 u=qupeng |  changed: [tikv5] => (item=start)
2018-03-06 18:01:07,299 p=140584 u=qupeng |  changed: [tikv1] => (item=stop)
2018-03-06 18:01:07,381 p=140584 u=qupeng |  changed: [tikv5] => (item=stop)
2018-03-06 18:01:07,385 p=140584 u=qupeng |  changed: [tikv3] => (item=stop)
2018-03-06 18:01:07,414 p=140584 u=qupeng |  changed: [tikv4] => (item=stop)
2018-03-06 18:01:07,422 p=140584 u=qupeng |  changed: [tikv2] => (item=stop)
2018-03-06 18:01:07,437 p=140584 u=qupeng |  TASK [tikv : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:01:07,499 p=140584 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:07,521 p=140584 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:07,533 p=140584 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:07,555 p=140584 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:07,572 p=140584 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:07,578 p=140584 u=qupeng |  PLAY [deploying TiDB cluster] **********************************************************************************************************************************************
2018-03-06 18:01:07,590 p=140584 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:01:07,638 p=140584 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:01:07,671 p=140584 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:01:07,701 p=140584 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:01:07,730 p=140584 u=qupeng |  TASK [pump : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:01:07,768 p=140584 u=qupeng |  TASK [pump : include] ******************************************************************************************************************************************************
2018-03-06 18:01:07,792 p=140584 u=qupeng |  TASK [pump : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:01:07,815 p=140584 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:01:08,505 p=140584 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/scripts)
2018-03-06 18:01:09,226 p=140584 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-03-06 18:01:09,940 p=140584 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/backup)
2018-03-06 18:01:09,953 p=140584 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:01:10,004 p=140584 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:01:10,758 p=140584 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/bin)
2018-03-06 18:01:10,773 p=140584 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:01:10,810 p=140584 u=qupeng |  TASK [tidb : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:01:11,538 p=140584 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/log)
2018-03-06 18:01:12,237 p=140584 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-03-06 18:01:12,253 p=140584 u=qupeng |  TASK [tidb : load customized config] ***************************************************************************************************************************************
2018-03-06 18:01:12,295 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 18:01:12,308 p=140584 u=qupeng |  TASK [tidb : load default config] ******************************************************************************************************************************************
2018-03-06 18:01:12,358 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 18:01:12,370 p=140584 u=qupeng |  TASK [tidb : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:01:12,449 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 18:01:12,462 p=140584 u=qupeng |  TASK [tidb : combine final config] *****************************************************************************************************************************************
2018-03-06 18:01:12,505 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 18:01:12,515 p=140584 u=qupeng |  TASK [tidb : debug] ********************************************************************************************************************************************************
2018-03-06 18:01:12,557 p=140584 u=qupeng |  ok: [tidb] => {
    "tidb_conf": {
        "global": {
            "enable-chunk": true, 
            "host": "0.0.0.0", 
            "lease": "10s", 
            "run-ddl": true, 
            "split-table": true, 
            "store": "tikv"
        }, 
        "log": {
            "disable-timestamp": false, 
            "file": {
                "log-rotate": true
            }, 
            "format": "text", 
            "level": "info", 
            "query-log-max-len": 2048, 
            "slow-threshold": 300
        }, 
        "opentracing": {
            "enable": false, 
            "reporter": {
                "buffer-flush-interval": 0, 
                "local-agent-host-port": "", 
                "log-spans": false, 
                "queue-size": 0
            }, 
            "rpc-metrics": false, 
            "sampler": {
                "max-operations": 0, 
                "param": 1.0, 
                "sampling-refresh-interval": 0, 
                "sampling-server-url": "", 
                "type": "const"
            }
        }, 
        "performance": {
            "cross-join": true, 
            "join-concurrency": 5, 
            "max-procs": 0, 
            "retry-limit": 10, 
            "run-auto-analyze": true, 
            "stats-lease": "3s", 
            "tcp-keep-alive": true
        }, 
        "plan_cache": {
            "capacity": 2560, 
            "enabled": false, 
            "shards": 256
        }, 
        "prepared_plan_cache": {
            "capacity": 100, 
            "enabled": false
        }, 
        "proxy_protocol": {
            "header-timeout": 5, 
            "networks": ""
        }, 
        "security": {
            "cluster-ssl-ca": "", 
            "cluster-ssl-cert": "", 
            "cluster-ssl-key": "", 
            "ssl-ca": "", 
            "ssl-cert": "", 
            "ssl-key": ""
        }, 
        "status": {
            "metrics-addr": "172.16.21.1:60011", 
            "metrics-interval": 15, 
            "report-status": true
        }, 
        "tikv_client": {
            "grpc-connection-count": 16
        }, 
        "xprotocol": {
            "xhost": "0.0.0.0", 
            "xport": 14000, 
            "xserver": false, 
            "xsocket": ""
        }
    }
}
2018-03-06 18:01:12,566 p=140584 u=qupeng |  TASK [tidb : create config file] *******************************************************************************************************************************************
2018-03-06 18:01:14,029 p=140584 u=qupeng |  changed: [tidb]
2018-03-06 18:01:14,039 p=140584 u=qupeng |  TASK [tidb : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:01:14,077 p=140584 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-03-06 18:01:14,122 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/binary_deployment.yml for tidb
2018-03-06 18:01:14,134 p=140584 u=qupeng |  TASK [tidb : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:01:16,060 p=140584 u=qupeng |  changed: [tidb]
2018-03-06 18:01:16,074 p=140584 u=qupeng |  TASK [tidb : backup binary file] *******************************************************************************************************************************************
2018-03-06 18:01:16,114 p=140584 u=qupeng |  TASK [tidb : create run script] ********************************************************************************************************************************************
2018-03-06 18:01:17,631 p=140584 u=qupeng |  changed: [tidb] => (item=run)
2018-03-06 18:01:17,646 p=140584 u=qupeng |  TASK [tidb : backup script file] *******************************************************************************************************************************************
2018-03-06 18:01:17,690 p=140584 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-03-06 18:01:17,739 p=140584 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/supervise_deployment.yml for tidb
2018-03-06 18:01:17,753 p=140584 u=qupeng |  TASK [tidb : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:01:18,545 p=140584 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:01:19,350 p=140584 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/status/tidb)
2018-03-06 18:01:19,360 p=140584 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:01:20,753 p=140584 u=qupeng |  changed: [tidb] => (item=supervise)
2018-03-06 18:01:22,098 p=140584 u=qupeng |  changed: [tidb] => (item=svc)
2018-03-06 18:01:23,484 p=140584 u=qupeng |  changed: [tidb] => (item=svstat)
2018-03-06 18:01:23,503 p=140584 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:01:24,954 p=140584 u=qupeng |  changed: [tidb] => (item=start)
2018-03-06 18:01:26,464 p=140584 u=qupeng |  changed: [tidb] => (item=stop)
2018-03-06 18:01:26,478 p=140584 u=qupeng |  TASK [tidb : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:01:26,616 p=140584 u=qupeng |  ok: [tidb]
2018-03-06 18:01:26,626 p=140584 u=qupeng |  PLAY [finalizing deployment target] ****************************************************************************************************************************************
2018-03-06 18:01:26,649 p=140584 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-03-06 18:01:26,816 p=140584 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-03-06 18:01:26,964 p=140584 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-03-06 18:01:27,127 p=140584 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-03-06 18:01:27,416 p=140584 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-03-06 18:01:27,555 p=140584 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-03-06 18:01:27,690 p=140584 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-03-06 18:01:27,853 p=140584 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-03-06 18:01:28,008 p=140584 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:01:28,008 p=140584 u=qupeng |  172.16.21.1                : ok=27   changed=10   unreachable=0    failed=0   
2018-03-06 18:01:28,009 p=140584 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:01:28,009 p=140584 u=qupeng |  monitoring                 : ok=37   changed=15   unreachable=0    failed=0   
2018-03-06 18:01:28,009 p=140584 u=qupeng |  pd                         : ok=49   changed=20   unreachable=0    failed=0   
2018-03-06 18:01:28,009 p=140584 u=qupeng |  tidb                       : ok=27   changed=9    unreachable=0    failed=0   
2018-03-06 18:01:28,009 p=140584 u=qupeng |  tikv1                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:01:28,009 p=140584 u=qupeng |  tikv2                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:01:28,009 p=140584 u=qupeng |  tikv3                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:01:28,009 p=140584 u=qupeng |  tikv4                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:01:28,009 p=140584 u=qupeng |  tikv5                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:01:28,010 p=140584 u=qupeng |  Congrats! All goes well. :-)
2018-03-06 18:01:35,151 p=157289 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:01:35,165 p=157289 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:01:35,193 p=157289 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:01:35,216 p=157289 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:01:35,236 p=157289 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:01:35,257 p=157289 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:01:35,283 p=157289 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:01:35,352 p=157289 u=qupeng |  ok: [localhost]
2018-03-06 18:01:35,356 p=157289 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:01:35,371 p=157289 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:01:35,531 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:35,556 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:35,573 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:35,587 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:35,588 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:35,662 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:35,678 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:35,683 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:35,708 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:35,716 p=157289 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:01:40,806 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:40,919 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:40,977 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:41,027 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:41,061 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:45,480 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:45,575 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:45,674 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:46,387 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:46,411 p=157289 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:01:47,299 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:47,311 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:47,321 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:47,333 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:47,334 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:48,068 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:48,108 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:48,116 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:48,126 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:48,133 p=157289 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:01:48,229 p=157289 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:01:48,324 p=157289 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:01:48,417 p=157289 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:01:48,454 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:48,474 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:48,487 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:48,497 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:48,498 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:48,499 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:48,508 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:48,513 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:48,525 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:48,532 p=157289 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:01:48,626 p=157289 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:01:48,719 p=157289 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:01:48,813 p=157289 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:01:49,501 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:49,543 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:49,580 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:49,591 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:49,593 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:50,165 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:50,182 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:50,242 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:50,246 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:50,261 p=157289 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:01:50,927 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:50,991 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:51,053 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:51,069 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:51,070 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:51,582 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:51,662 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:51,752 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:51,798 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:51,808 p=157289 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:01:51,906 p=157289 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:01:51,999 p=157289 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:01:52,993 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:53,010 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:53,029 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:53,043 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:53,060 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:53,755 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:53,849 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:53,872 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:53,878 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:53,888 p=157289 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:01:53,986 p=157289 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:01:54,023 p=157289 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:01:54,035 p=157289 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:01:54,048 p=157289 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:01:54,068 p=157289 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:01:54,069 p=157289 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:01:54,074 p=157289 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:01:54,076 p=157289 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:01:54,095 p=157289 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:01:54,108 p=157289 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:01:54,115 p=157289 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:01:54,970 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:54,987 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:55,007 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:55,030 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:55,053 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:55,811 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:55,819 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:55,845 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:55,847 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:55,859 p=157289 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:01:56,638 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:56,702 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:56,718 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:56,731 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:56,769 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:57,576 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:57,619 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:57,645 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:57,652 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:57,660 p=157289 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:01:57,702 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:57,724 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:57,735 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:57,746 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:57,747 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:57,747 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:57,758 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:57,769 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:57,770 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:57,778 p=157289 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:01:57,826 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:57,836 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:57,866 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:57,877 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:57,878 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:57,879 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:57,884 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:57,905 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:57,928 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:57,934 p=157289 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:01:57,978 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:01:58,000 p=157289 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:01:58,011 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:01:58,024 p=157289 u=qupeng |  ok: [tikv1]
2018-03-06 18:01:58,024 p=157289 u=qupeng |  ok: [tidb]
2018-03-06 18:01:58,025 p=157289 u=qupeng |  ok: [tikv2]
2018-03-06 18:01:58,037 p=157289 u=qupeng |  ok: [tikv3]
2018-03-06 18:01:58,057 p=157289 u=qupeng |  ok: [tikv4]
2018-03-06 18:01:58,059 p=157289 u=qupeng |  ok: [tikv5]
2018-03-06 18:01:58,071 p=157289 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:01:58,086 p=157289 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-03-06 18:01:58,949 p=157289 u=qupeng |  changed: [pd] => (item=node_exporter)
2018-03-06 18:01:58,963 p=157289 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:01:58,997 p=157289 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:01:59,028 p=157289 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:02:00,930 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:02:00,937 p=157289 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:02:00,950 p=157289 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-03-06 18:02:01,867 p=157289 u=qupeng |  changed: [pd] => (item=blackbox_exporter)
2018-03-06 18:02:01,878 p=157289 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:02:01,910 p=157289 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:02:01,943 p=157289 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:02:03,647 p=157289 u=qupeng |  ok: [pd]
2018-03-06 18:02:03,655 p=157289 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:02:03,669 p=157289 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-03-06 18:02:04,597 p=157289 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-03-06 18:02:05,476 p=157289 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-03-06 18:02:05,490 p=157289 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:02:05,530 p=157289 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:02:05,567 p=157289 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-03-06 18:02:06,260 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:02:06,275 p=157289 u=qupeng |  TASK [wait prometheus up] **************************************************************************************************************************************************
2018-03-06 18:02:06,966 p=157289 u=qupeng |  ok: [monitoring]
2018-03-06 18:02:06,970 p=157289 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-03-06 18:02:06,978 p=157289 u=qupeng |  TASK [start PD by supervise] ***********************************************************************************************************************************************
2018-03-06 18:02:07,825 p=157289 u=qupeng |  changed: [pd] => (item=pd)
2018-03-06 18:02:07,838 p=157289 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:02:07,871 p=157289 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:02:07,905 p=157289 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:03:23,307 p=157289 u=qupeng |   [ERROR]: User interrupted execution

2018-03-06 18:04:48,006 p=162984 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:04:48,020 p=162984 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:04:48,048 p=162984 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:04:48,072 p=162984 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:04:48,088 p=162984 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:04:48,110 p=162984 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:04:48,130 p=162984 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:04:48,191 p=162984 u=qupeng |  ok: [localhost]
2018-03-06 18:04:48,199 p=162984 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:04:48,227 p=162984 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:04:48,392 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:04:48,420 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:04:48,439 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:04:48,454 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:04:48,455 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:04:48,515 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:04:48,546 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:04:48,559 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:04:48,595 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:04:48,606 p=162984 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:04:53,330 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:04:53,564 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:04:53,610 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:04:53,704 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:04:54,678 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:04:58,063 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:04:58,419 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:04:58,448 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:04:59,158 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:04:59,185 p=162984 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:05:00,096 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:05:00,113 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:00,128 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:05:00,143 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:05:00,144 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:05:00,845 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:05:00,847 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:05:00,848 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:05:00,883 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:05:00,894 p=162984 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:05:01,009 p=162984 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:05:01,109 p=162984 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:05:01,209 p=162984 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:05:01,251 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:01,264 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:05:01,278 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:05:01,290 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:05:01,301 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:05:01,308 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:05:01,325 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:05:01,328 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:05:01,335 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:05:01,341 p=162984 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:05:01,443 p=162984 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:05:01,542 p=162984 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:05:01,642 p=162984 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:05:02,398 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:02,430 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:05:02,445 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:05:02,456 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:05:02,457 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:05:03,105 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:05:03,167 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:05:03,172 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:05:03,174 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:05:03,184 p=162984 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:05:03,915 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:03,929 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:05:03,944 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:05:03,971 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:05:03,973 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:05:04,605 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:05:04,667 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:05:04,676 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:05:04,679 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:05:04,692 p=162984 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:05:04,832 p=162984 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:05:04,932 p=162984 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:05:05,866 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:05:05,888 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:05:05,908 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:05:05,959 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:05:05,974 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:06,661 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:05:06,669 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:05:06,704 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:05:06,837 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:05:06,851 p=162984 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:05:06,980 p=162984 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:05:07,022 p=162984 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:05:07,035 p=162984 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:05:07,047 p=162984 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:05:07,059 p=162984 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:05:07,071 p=162984 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:05:07,072 p=162984 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:05:07,076 p=162984 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:05:07,093 p=162984 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:05:07,103 p=162984 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:05:07,110 p=162984 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:05:07,924 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:07,941 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:05:07,975 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:05:07,991 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:05:08,052 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:05:08,734 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:05:08,766 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:05:08,768 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:05:08,814 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:05:08,827 p=162984 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:05:09,682 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:09,719 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:05:09,738 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:05:09,757 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:05:09,762 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:05:10,524 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:05:10,537 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:05:10,564 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:05:10,586 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:05:10,598 p=162984 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:05:10,642 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:10,668 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:05:10,678 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:05:10,689 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:05:10,702 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:05:10,703 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:05:10,704 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:05:10,713 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:05:10,735 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:05:10,741 p=162984 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:05:10,805 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:05:10,816 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:10,829 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:05:10,840 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:05:10,844 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:05:10,848 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:05:10,856 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:05:10,867 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:05:10,878 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:05:10,885 p=162984 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:05:10,936 p=162984 u=qupeng |  ok: [monitoring]
2018-03-06 18:05:10,948 p=162984 u=qupeng |  ok: [tidb]
2018-03-06 18:05:10,961 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:10,974 p=162984 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:05:10,975 p=162984 u=qupeng |  ok: [tikv2]
2018-03-06 18:05:10,989 p=162984 u=qupeng |  ok: [tikv3]
2018-03-06 18:05:10,990 p=162984 u=qupeng |  ok: [tikv1]
2018-03-06 18:05:11,004 p=162984 u=qupeng |  ok: [tikv4]
2018-03-06 18:05:11,012 p=162984 u=qupeng |  ok: [tikv5]
2018-03-06 18:05:11,018 p=162984 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:05:11,025 p=162984 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-03-06 18:05:11,933 p=162984 u=qupeng |  changed: [pd] => (item=node_exporter)
2018-03-06 18:05:11,940 p=162984 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:05:11,972 p=162984 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:05:12,002 p=162984 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:05:13,785 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:13,793 p=162984 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:05:13,805 p=162984 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-03-06 18:05:14,663 p=162984 u=qupeng |  changed: [pd] => (item=blackbox_exporter)
2018-03-06 18:05:14,675 p=162984 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:05:14,711 p=162984 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:05:14,743 p=162984 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:05:16,451 p=162984 u=qupeng |  ok: [pd]
2018-03-06 18:05:16,458 p=162984 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:05:16,469 p=162984 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-03-06 18:05:17,417 p=162984 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-03-06 18:05:18,330 p=162984 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-03-06 18:05:18,342 p=162984 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:05:18,385 p=162984 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:05:18,424 p=162984 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-03-06 18:06:14,493 p=162984 u=qupeng |   [ERROR]: User interrupted execution

2018-03-06 18:06:20,287 p=167343 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:06:20,301 p=167343 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:06:20,332 p=167343 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:06:20,357 p=167343 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:06:20,377 p=167343 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:06:20,400 p=167343 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:06:20,422 p=167343 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:06:20,489 p=167343 u=qupeng |  ok: [localhost]
2018-03-06 18:06:20,497 p=167343 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:06:20,522 p=167343 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:06:20,676 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:20,703 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:20,726 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:20,742 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:20,743 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:20,796 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:20,836 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:20,857 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:20,861 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:20,871 p=167343 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:06:25,900 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:25,944 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:25,986 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:26,033 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:27,024 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:30,372 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:30,483 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:30,509 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:31,495 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:31,517 p=167343 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:06:32,455 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:32,471 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:32,495 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:32,508 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:32,512 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:33,155 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:33,215 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:33,217 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:33,221 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:33,235 p=167343 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:06:33,360 p=167343 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:06:33,455 p=167343 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:06:33,551 p=167343 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:06:33,591 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:33,603 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:33,626 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:33,638 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:33,639 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:33,639 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:33,654 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:33,664 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:33,664 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:33,671 p=167343 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:06:33,771 p=167343 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:06:33,873 p=167343 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:06:33,974 p=167343 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:06:34,703 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:34,717 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:34,734 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:34,786 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:34,788 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:35,360 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:35,404 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:35,452 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:35,484 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:35,498 p=167343 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:06:36,182 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:36,226 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:36,251 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:36,270 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:36,272 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:36,872 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:36,968 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:36,988 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:37,021 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:37,032 p=167343 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:06:37,156 p=167343 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:06:37,275 p=167343 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:06:38,290 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:38,320 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:38,340 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:38,359 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:38,361 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:39,056 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:39,114 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:39,119 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:39,210 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:39,218 p=167343 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:06:39,324 p=167343 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:06:39,366 p=167343 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:06:39,378 p=167343 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:06:39,389 p=167343 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:06:39,413 p=167343 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:06:39,414 p=167343 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:06:39,415 p=167343 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:06:39,421 p=167343 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:06:39,429 p=167343 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:06:39,464 p=167343 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:06:39,470 p=167343 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:06:40,360 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:40,379 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:40,398 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:40,414 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:40,416 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:41,113 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:41,194 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:41,204 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:41,211 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:41,225 p=167343 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:06:42,115 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:42,133 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:42,147 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:42,160 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:42,192 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:43,013 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:43,024 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:43,041 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:43,088 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:43,104 p=167343 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:06:43,154 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:43,170 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:43,183 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:43,209 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:43,221 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:43,222 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:43,230 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:43,242 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:43,247 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:43,254 p=167343 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:06:43,304 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:43,317 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:43,332 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:43,344 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:43,345 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:43,367 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:43,374 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:43,382 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:43,385 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:43,392 p=167343 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:06:43,448 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:43,458 p=167343 u=qupeng |  ok: [monitoring]
2018-03-06 18:06:43,470 p=167343 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:06:43,485 p=167343 u=qupeng |  ok: [tidb]
2018-03-06 18:06:43,486 p=167343 u=qupeng |  ok: [tikv2]
2018-03-06 18:06:43,493 p=167343 u=qupeng |  ok: [tikv1]
2018-03-06 18:06:43,497 p=167343 u=qupeng |  ok: [tikv3]
2018-03-06 18:06:43,514 p=167343 u=qupeng |  ok: [tikv4]
2018-03-06 18:06:43,543 p=167343 u=qupeng |  ok: [tikv5]
2018-03-06 18:06:43,549 p=167343 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:06:43,557 p=167343 u=qupeng |  TASK [stop node_exporter/blackbox_exporter by supervise] *******************************************************************************************************************
2018-03-06 18:06:44,409 p=167343 u=qupeng |  changed: [pd] => (item=node_exporter)
2018-03-06 18:06:45,294 p=167343 u=qupeng |  changed: [pd] => (item=blackbox_exporter)
2018-03-06 18:06:45,304 p=167343 u=qupeng |  TASK [stop node_exporter/blackbox_exporter by systemd] *********************************************************************************************************************
2018-03-06 18:06:45,342 p=167343 u=qupeng |  TASK [stop node_exporter/blackbox_exporter by systemd] *********************************************************************************************************************
2018-03-06 18:06:45,377 p=167343 u=qupeng |  TASK [wait node_exporter down] *********************************************************************************************************************************************
2018-03-06 18:06:46,185 p=167343 u=qupeng |  ok: [pd]
2018-03-06 18:06:46,197 p=167343 u=qupeng |  TASK [wait blackbox_exporter down] *****************************************************************************************************************************************
2018-03-06 18:06:55,457 p=167343 u=qupeng |   [ERROR]: User interrupted execution

2018-03-06 18:07:14,575 p=171307 u=qupeng |  ERROR! the playbook: start could not be found
2018-03-06 18:07:16,542 p=171328 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:07:16,557 p=171328 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:07:16,585 p=171328 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:07:16,609 p=171328 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:07:16,626 p=171328 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:07:16,646 p=171328 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:07:16,664 p=171328 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:07:16,711 p=171328 u=qupeng |  ok: [localhost]
2018-03-06 18:07:16,715 p=171328 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:07:16,730 p=171328 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:07:16,882 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:16,897 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:16,918 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:16,935 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:16,937 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:17,007 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:17,020 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:17,051 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:17,070 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:17,077 p=171328 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:07:21,913 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:21,969 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:22,103 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:22,157 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:22,192 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:26,534 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:26,668 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:27,567 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:27,939 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:27,956 p=171328 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:07:28,867 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:28,888 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:28,905 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:28,917 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:28,941 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:29,508 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:29,602 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:29,606 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:29,619 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:29,627 p=171328 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:07:29,732 p=171328 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:07:29,836 p=171328 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:07:29,933 p=171328 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:07:29,976 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:29,989 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:30,000 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:30,011 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:30,022 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:30,027 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:30,028 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:30,039 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:30,050 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:30,056 p=171328 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:07:30,152 p=171328 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:07:30,244 p=171328 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:07:30,339 p=171328 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:07:31,095 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:31,119 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:31,134 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:31,149 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:31,155 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:31,770 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:31,822 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:31,837 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:31,842 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:31,854 p=171328 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:07:32,624 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:32,646 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:32,663 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:32,678 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:32,680 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:33,410 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:33,434 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:33,442 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:33,457 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:33,474 p=171328 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:07:33,594 p=171328 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:07:33,695 p=171328 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:07:34,694 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:34,714 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:34,729 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:34,743 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:34,750 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:35,498 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:35,514 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:35,545 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:35,610 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:35,626 p=171328 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:07:35,772 p=171328 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:07:35,821 p=171328 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:07:35,832 p=171328 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:07:35,845 p=171328 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:07:35,857 p=171328 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:07:35,858 p=171328 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:07:35,860 p=171328 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:07:35,864 p=171328 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:07:35,871 p=171328 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:07:35,895 p=171328 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:07:35,902 p=171328 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:07:36,772 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:36,785 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:36,798 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:36,812 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:36,828 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:37,565 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:37,606 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:37,635 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:37,645 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:37,659 p=171328 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:07:38,491 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:38,535 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:38,556 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:38,574 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:38,576 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:39,316 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:39,324 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:39,392 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:39,412 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:39,423 p=171328 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:07:39,467 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:39,479 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:39,500 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:39,513 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:39,527 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:39,534 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:39,535 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:39,540 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:39,549 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:39,556 p=171328 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:07:39,608 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:39,619 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:39,632 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:39,661 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:39,664 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:39,670 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:39,675 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:39,676 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:39,720 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:39,728 p=171328 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:07:39,780 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:39,795 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:07:39,807 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:39,823 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:39,824 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:07:39,830 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:39,833 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:39,849 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:39,860 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:39,866 p=171328 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:07:39,873 p=171328 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-03-06 18:07:40,768 p=171328 u=qupeng |  changed: [pd] => (item=node_exporter)
2018-03-06 18:07:40,782 p=171328 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:07:40,817 p=171328 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:07:40,850 p=171328 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:07:42,722 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:42,730 p=171328 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:07:42,743 p=171328 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-03-06 18:07:43,682 p=171328 u=qupeng |  changed: [pd] => (item=blackbox_exporter)
2018-03-06 18:07:43,697 p=171328 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:07:43,733 p=171328 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:07:43,765 p=171328 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:07:44,456 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:44,465 p=171328 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:07:44,479 p=171328 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-03-06 18:07:45,370 p=171328 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-03-06 18:07:46,240 p=171328 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-03-06 18:07:46,251 p=171328 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:07:46,293 p=171328 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:07:46,335 p=171328 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-03-06 18:07:47,058 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:47,071 p=171328 u=qupeng |  TASK [wait prometheus up] **************************************************************************************************************************************************
2018-03-06 18:07:47,750 p=171328 u=qupeng |  ok: [monitoring]
2018-03-06 18:07:47,759 p=171328 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-03-06 18:07:47,774 p=171328 u=qupeng |  TASK [start PD by supervise] ***********************************************************************************************************************************************
2018-03-06 18:07:48,624 p=171328 u=qupeng |  changed: [pd] => (item=pd)
2018-03-06 18:07:48,637 p=171328 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:07:48,671 p=171328 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:07:48,705 p=171328 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:07:53,164 p=171328 u=qupeng |  ok: [pd]
2018-03-06 18:07:53,173 p=171328 u=qupeng |  PLAY [tikv_servers] ********************************************************************************************************************************************************
2018-03-06 18:07:53,189 p=171328 u=qupeng |  TASK [start TiKV by supervise] *********************************************************************************************************************************************
2018-03-06 18:07:53,952 p=171328 u=qupeng |  changed: [tikv2] => (item=tikv)
2018-03-06 18:07:53,959 p=171328 u=qupeng |  changed: [tikv1] => (item=tikv)
2018-03-06 18:07:54,008 p=171328 u=qupeng |  changed: [tikv3] => (item=tikv)
2018-03-06 18:07:54,018 p=171328 u=qupeng |  changed: [tikv5] => (item=tikv)
2018-03-06 18:07:54,031 p=171328 u=qupeng |  changed: [tikv4] => (item=tikv)
2018-03-06 18:07:54,038 p=171328 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:07:54,097 p=171328 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:07:54,164 p=171328 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:07:55,982 p=171328 u=qupeng |  ok: [tikv1]
2018-03-06 18:07:55,984 p=171328 u=qupeng |  ok: [tikv2]
2018-03-06 18:07:55,992 p=171328 u=qupeng |  ok: [tikv4]
2018-03-06 18:07:55,998 p=171328 u=qupeng |  ok: [tikv5]
2018-03-06 18:07:56,013 p=171328 u=qupeng |  ok: [tikv3]
2018-03-06 18:07:56,023 p=171328 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:07:56,094 p=171328 u=qupeng |  TASK [command] *************************************************************************************************************************************************************
2018-03-06 18:07:56,818 p=171328 u=qupeng |  changed: [tikv5]
2018-03-06 18:07:56,848 p=171328 u=qupeng |  changed: [tikv3]
2018-03-06 18:07:56,851 p=171328 u=qupeng |  changed: [tikv4]
2018-03-06 18:07:56,866 p=171328 u=qupeng |  changed: [tikv2]
2018-03-06 18:07:56,868 p=171328 u=qupeng |  changed: [tikv1]
2018-03-06 18:07:56,878 p=171328 u=qupeng |  TASK [display new tikv pid] ************************************************************************************************************************************************
2018-03-06 18:07:56,908 p=171328 u=qupeng |  ok: [tikv1] => {
    "msg": "tikv binary or docker pid: 176032"
}
2018-03-06 18:07:56,934 p=171328 u=qupeng |  ok: [tikv3] => {
    "msg": "tikv binary or docker pid: 176047"
}
2018-03-06 18:07:56,939 p=171328 u=qupeng |  ok: [tikv2] => {
    "msg": "tikv binary or docker pid: 176024"
}
2018-03-06 18:07:56,944 p=171328 u=qupeng |  ok: [tikv4] => {
    "msg": "tikv binary or docker pid: 176070"
}
2018-03-06 18:07:56,978 p=171328 u=qupeng |  ok: [tikv5] => {
    "msg": "tikv binary or docker pid: 176056"
}
2018-03-06 18:07:56,983 p=171328 u=qupeng |  PLAY [tidb_servers] ********************************************************************************************************************************************************
2018-03-06 18:07:56,991 p=171328 u=qupeng |  TASK [clean pump .node file] ***********************************************************************************************************************************************
2018-03-06 18:07:57,007 p=171328 u=qupeng |  TASK [start pump by supervise] *********************************************************************************************************************************************
2018-03-06 18:07:57,027 p=171328 u=qupeng |  TASK [start pump by systemd] ***********************************************************************************************************************************************
2018-03-06 18:07:57,044 p=171328 u=qupeng |  TASK [start pump by systemd] ***********************************************************************************************************************************************
2018-03-06 18:07:57,063 p=171328 u=qupeng |  TASK [wait pump up] ********************************************************************************************************************************************************
2018-03-06 18:07:57,078 p=171328 u=qupeng |  TASK [start TiDB by supervise] *********************************************************************************************************************************************
2018-03-06 18:07:57,948 p=171328 u=qupeng |  changed: [tidb] => (item=tidb)
2018-03-06 18:07:57,962 p=171328 u=qupeng |  TASK [start TiDB by systemd] ***********************************************************************************************************************************************
2018-03-06 18:07:57,995 p=171328 u=qupeng |  TASK [start TiDB by systemd] ***********************************************************************************************************************************************
2018-03-06 18:07:58,029 p=171328 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:08:01,757 p=171328 u=qupeng |  ok: [tidb]
2018-03-06 18:08:01,766 p=171328 u=qupeng |  PLAY [grafana_servers] *****************************************************************************************************************************************************
2018-03-06 18:08:01,783 p=171328 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:08:01,842 p=171328 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:08:01,879 p=171328 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:08:01,914 p=171328 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:08:01,950 p=171328 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:08:01,980 p=171328 u=qupeng |  TASK [start grafana by supervise] ******************************************************************************************************************************************
2018-03-06 18:08:02,893 p=171328 u=qupeng |  changed: [172.16.21.1] => (item=grafana)
2018-03-06 18:08:02,909 p=171328 u=qupeng |  TASK [start grafana by systemd] ********************************************************************************************************************************************
2018-03-06 18:08:02,941 p=171328 u=qupeng |  TASK [start grafana by systemd] ********************************************************************************************************************************************
2018-03-06 18:08:02,975 p=171328 u=qupeng |  TASK [wait grafana up] *****************************************************************************************************************************************************
2018-03-06 18:08:04,654 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:08:04,665 p=171328 u=qupeng |  TASK [set_fact] ************************************************************************************************************************************************************
2018-03-06 18:08:04,750 p=171328 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:08:04,763 p=171328 u=qupeng |  TASK [import grafana data source] ******************************************************************************************************************************************
2018-03-06 18:08:05,658 p=171328 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:08:05,676 p=171328 u=qupeng |  TASK [import grafana dashboards - prepare config] **************************************************************************************************************************
2018-03-06 18:08:06,214 p=171328 u=qupeng |  ok: [172.16.21.1 -> localhost]
2018-03-06 18:08:06,231 p=171328 u=qupeng |  TASK [import grafana dashboards - run import script] ***********************************************************************************************************************
2018-03-06 18:08:07,299 p=171328 u=qupeng |  changed: [172.16.21.1 -> localhost]
2018-03-06 18:08:07,301 p=171328 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:08:07,301 p=171328 u=qupeng |  172.16.21.1                : ok=19   changed=3    unreachable=0    failed=0   
2018-03-06 18:08:07,301 p=171328 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:08:07,302 p=171328 u=qupeng |  monitoring                 : ok=16   changed=1    unreachable=0    failed=0   
2018-03-06 18:08:07,302 p=171328 u=qupeng |  pd                         : ok=19   changed=3    unreachable=0    failed=0   
2018-03-06 18:08:07,302 p=171328 u=qupeng |  tidb                       : ok=15   changed=1    unreachable=0    failed=0   
2018-03-06 18:08:07,302 p=171328 u=qupeng |  tikv1                      : ok=17   changed=2    unreachable=0    failed=0   
2018-03-06 18:08:07,302 p=171328 u=qupeng |  tikv2                      : ok=17   changed=2    unreachable=0    failed=0   
2018-03-06 18:08:07,303 p=171328 u=qupeng |  tikv3                      : ok=17   changed=2    unreachable=0    failed=0   
2018-03-06 18:08:07,303 p=171328 u=qupeng |  tikv4                      : ok=17   changed=2    unreachable=0    failed=0   
2018-03-06 18:08:07,303 p=171328 u=qupeng |  tikv5                      : ok=17   changed=2    unreachable=0    failed=0   
2018-03-06 18:08:07,303 p=171328 u=qupeng |  Congrats! All goes well. :-)
2018-03-06 18:14:29,114 p=181566 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:14:29,128 p=181566 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:14:29,161 p=181566 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:14:29,188 p=181566 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:14:29,210 p=181566 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:14:29,236 p=181566 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:14:29,267 p=181566 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:14:29,330 p=181566 u=qupeng |  ok: [localhost]
2018-03-06 18:14:29,338 p=181566 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:14:29,365 p=181566 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:14:29,514 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:29,536 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:29,551 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:29,567 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:29,568 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:29,642 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:29,661 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:29,665 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:29,680 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:29,687 p=181566 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:14:34,780 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:34,834 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:34,898 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:34,949 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:35,041 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:39,470 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:39,856 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:39,903 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:41,045 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:41,078 p=181566 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:14:41,994 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:42,013 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:42,030 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:42,048 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:42,049 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:42,730 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:42,775 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:42,795 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:42,801 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:42,815 p=181566 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:14:42,942 p=181566 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:14:43,077 p=181566 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:14:43,185 p=181566 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:14:43,228 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:43,239 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:43,250 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:43,274 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:43,275 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:43,276 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:43,291 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:43,295 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:43,303 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:43,310 p=181566 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:14:43,412 p=181566 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:14:43,511 p=181566 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:14:43,616 p=181566 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:14:44,365 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:44,382 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:44,399 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:44,417 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:44,418 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:45,044 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:45,093 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:45,103 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:45,116 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:45,127 p=181566 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:14:45,808 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:45,847 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:45,861 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:45,878 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:45,879 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:46,546 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:46,548 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:46,589 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:46,615 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:46,630 p=181566 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:14:46,744 p=181566 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:14:46,839 p=181566 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:14:47,798 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:47,856 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:47,874 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:47,887 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:47,888 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:48,594 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:48,672 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:48,730 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:48,746 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:48,754 p=181566 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:14:48,852 p=181566 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:14:48,891 p=181566 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:14:48,901 p=181566 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:14:48,926 p=181566 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:14:48,937 p=181566 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:14:48,937 p=181566 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:14:48,938 p=181566 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:14:48,952 p=181566 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:14:48,959 p=181566 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:14:48,964 p=181566 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:14:48,972 p=181566 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:14:49,862 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:49,882 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:49,903 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:49,919 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:49,921 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:50,688 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:50,712 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:50,725 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:50,754 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:50,766 p=181566 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:14:51,658 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:51,679 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:51,695 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:51,707 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:51,708 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:52,498 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:52,526 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:52,555 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:52,588 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:52,596 p=181566 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:14:52,631 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:52,642 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:52,653 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:52,673 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:52,685 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:52,685 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:52,686 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:52,700 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:52,708 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:52,715 p=181566 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:14:52,762 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:52,773 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:52,783 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:52,798 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:52,799 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:52,803 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:52,813 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:52,824 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:52,837 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:52,844 p=181566 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:14:52,889 p=181566 u=qupeng |  ok: [pd]
2018-03-06 18:14:52,904 p=181566 u=qupeng |  ok: [tidb]
2018-03-06 18:14:52,917 p=181566 u=qupeng |  ok: [monitoring]
2018-03-06 18:14:52,928 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:52,929 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:52,933 p=181566 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:14:52,943 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:52,966 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:52,968 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:52,981 p=181566 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:14:52,991 p=181566 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:14:53,001 p=181566 u=qupeng |  PLAY [tidb_servers] ********************************************************************************************************************************************************
2018-03-06 18:14:53,010 p=181566 u=qupeng |  PLAY [tikv_servers] ********************************************************************************************************************************************************
2018-03-06 18:14:53,023 p=181566 u=qupeng |  TASK [stop TiKV by supervise] **********************************************************************************************************************************************
2018-03-06 18:14:53,811 p=181566 u=qupeng |  changed: [tikv1] => (item=tikv)
2018-03-06 18:14:54,142 p=181566 u=qupeng |  changed: [tikv4] => (item=tikv)
2018-03-06 18:14:54,155 p=181566 u=qupeng |  changed: [tikv2] => (item=tikv)
2018-03-06 18:14:54,170 p=181566 u=qupeng |  changed: [tikv5] => (item=tikv)
2018-03-06 18:14:54,176 p=181566 u=qupeng |  changed: [tikv3] => (item=tikv)
2018-03-06 18:14:54,183 p=181566 u=qupeng |  TASK [stop TiKV by systemd] ************************************************************************************************************************************************
2018-03-06 18:14:54,246 p=181566 u=qupeng |  TASK [stop TiKV by systemd] ************************************************************************************************************************************************
2018-03-06 18:14:54,307 p=181566 u=qupeng |  TASK [wait TiKV down (via Port)] *******************************************************************************************************************************************
2018-03-06 18:14:55,098 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:55,116 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:55,123 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:55,134 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:55,147 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:55,156 p=181566 u=qupeng |  TASK [wait TiKV down (via PID)] ********************************************************************************************************************************************
2018-03-06 18:14:55,971 p=181566 u=qupeng |  ok: [tikv4]
2018-03-06 18:14:55,972 p=181566 u=qupeng |  ok: [tikv2]
2018-03-06 18:14:55,979 p=181566 u=qupeng |  ok: [tikv5]
2018-03-06 18:14:55,990 p=181566 u=qupeng |  ok: [tikv1]
2018-03-06 18:14:56,005 p=181566 u=qupeng |  ok: [tikv3]
2018-03-06 18:14:56,012 p=181566 u=qupeng |  TASK [command] *************************************************************************************************************************************************************
2018-03-06 18:14:56,737 p=181566 u=qupeng |  changed: [tikv4]
2018-03-06 18:14:56,739 p=181566 u=qupeng |  changed: [tikv5]
2018-03-06 18:14:56,743 p=181566 u=qupeng |  changed: [tikv3]
2018-03-06 18:14:56,767 p=181566 u=qupeng |  changed: [tikv2]
2018-03-06 18:14:56,773 p=181566 u=qupeng |  changed: [tikv1]
2018-03-06 18:14:56,782 p=181566 u=qupeng |  TASK [display old tikv pid] ************************************************************************************************************************************************
2018-03-06 18:14:56,815 p=181566 u=qupeng |  ok: [tikv1] => {
    "msg": "tikv binary or docker pid: 176032"
}
2018-03-06 18:14:56,836 p=181566 u=qupeng |  ok: [tikv2] => {
    "msg": "tikv binary or docker pid: 176024"
}
2018-03-06 18:14:56,836 p=181566 u=qupeng |  ok: [tikv3] => {
    "msg": "tikv binary or docker pid: 176047"
}
2018-03-06 18:14:56,838 p=181566 u=qupeng |  ok: [tikv4] => {
    "msg": "tikv binary or docker pid: 176070"
}
2018-03-06 18:14:56,871 p=181566 u=qupeng |  ok: [tikv5] => {
    "msg": "tikv binary or docker pid: 176056"
}
2018-03-06 18:14:56,876 p=181566 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-03-06 18:14:56,881 p=181566 u=qupeng |  PLAY [grafana_servers] *****************************************************************************************************************************************************
2018-03-06 18:14:56,884 p=181566 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:14:56,884 p=181566 u=qupeng |  172.16.21.1                : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:14:56,884 p=181566 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:14:56,884 p=181566 u=qupeng |  monitoring                 : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:14:56,884 p=181566 u=qupeng |  pd                         : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:14:56,884 p=181566 u=qupeng |  tidb                       : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:14:56,884 p=181566 u=qupeng |  tikv1                      : ok=18   changed=2    unreachable=0    failed=0   
2018-03-06 18:14:56,884 p=181566 u=qupeng |  tikv2                      : ok=18   changed=2    unreachable=0    failed=0   
2018-03-06 18:14:56,885 p=181566 u=qupeng |  tikv3                      : ok=18   changed=2    unreachable=0    failed=0   
2018-03-06 18:14:56,885 p=181566 u=qupeng |  tikv4                      : ok=18   changed=2    unreachable=0    failed=0   
2018-03-06 18:14:56,885 p=181566 u=qupeng |  tikv5                      : ok=18   changed=2    unreachable=0    failed=0   
2018-03-06 18:14:56,885 p=181566 u=qupeng |  Congrats! All goes well. :-)
2018-03-06 18:16:27,545 p=187398 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:16:27,560 p=187398 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:16:27,589 p=187398 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:16:27,617 p=187398 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:16:27,638 p=187398 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:16:27,663 p=187398 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:16:27,688 p=187398 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:16:27,756 p=187398 u=qupeng |  ok: [localhost]
2018-03-06 18:16:27,765 p=187398 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:16:27,792 p=187398 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:16:27,945 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:27,962 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:27,979 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:27,998 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:27,999 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:28,066 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:28,092 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:28,107 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:28,116 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:28,123 p=187398 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:16:33,100 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:33,270 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:33,337 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:33,388 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:34,584 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:38,013 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:38,058 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:38,231 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:39,266 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:39,297 p=187398 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:16:40,163 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:40,178 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:40,190 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:40,207 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:40,217 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:40,869 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:40,905 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:40,913 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:40,973 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:40,987 p=187398 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:16:41,103 p=187398 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:16:41,195 p=187398 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:16:41,283 p=187398 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:16:41,323 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:41,333 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:41,345 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:41,356 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:41,367 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:41,368 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:41,374 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:41,386 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:41,396 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:41,403 p=187398 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:16:41,511 p=187398 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:16:41,635 p=187398 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:16:41,736 p=187398 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:16:42,456 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:42,474 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:42,493 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:42,506 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:42,542 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:43,191 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:43,197 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:43,246 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:43,264 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:43,272 p=187398 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:16:44,002 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:44,018 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:44,030 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:44,041 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:44,059 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:44,747 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:44,748 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:44,767 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:44,822 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:44,842 p=187398 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:16:44,963 p=187398 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:16:45,067 p=187398 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:16:46,001 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:46,022 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:46,042 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:46,061 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:46,063 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:46,851 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:46,861 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:46,877 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:46,896 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:46,909 p=187398 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:16:47,038 p=187398 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:16:47,070 p=187398 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:16:47,104 p=187398 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:16:47,119 p=187398 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:16:47,131 p=187398 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:16:47,132 p=187398 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:16:47,136 p=187398 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:16:47,152 p=187398 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:16:47,157 p=187398 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:16:47,158 p=187398 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:16:47,166 p=187398 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:16:48,025 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:48,042 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:48,058 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:48,071 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:48,078 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:48,778 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:48,879 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:48,934 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:48,950 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:48,959 p=187398 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:16:49,826 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:49,853 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:49,871 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:49,888 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:49,890 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:50,600 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:50,644 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:50,697 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:50,743 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:50,750 p=187398 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:16:50,799 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:50,811 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:50,821 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:50,834 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:50,835 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:50,836 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:50,840 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:50,847 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:50,863 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:50,871 p=187398 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:16:50,927 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:50,939 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:50,949 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:50,960 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:50,967 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:50,976 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:50,978 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:50,988 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:51,000 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:51,014 p=187398 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:16:51,059 p=187398 u=qupeng |  ok: [pd]
2018-03-06 18:16:51,098 p=187398 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:16:51,110 p=187398 u=qupeng |  ok: [monitoring]
2018-03-06 18:16:51,121 p=187398 u=qupeng |  ok: [tidb]
2018-03-06 18:16:51,132 p=187398 u=qupeng |  ok: [tikv3]
2018-03-06 18:16:51,133 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:51,149 p=187398 u=qupeng |  ok: [tikv2]
2018-03-06 18:16:51,155 p=187398 u=qupeng |  ok: [tikv4]
2018-03-06 18:16:51,186 p=187398 u=qupeng |  ok: [tikv5]
2018-03-06 18:16:51,192 p=187398 u=qupeng |  PLAY [rolling update PD cluster] *******************************************************************************************************************************************
2018-03-06 18:16:51,204 p=187398 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:16:51,231 p=187398 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-03-06 18:16:51,239 p=187398 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:16:51,263 p=187398 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-03-06 18:16:51,269 p=187398 u=qupeng |  PLAY [rolling update TiKV cluster] *****************************************************************************************************************************************
2018-03-06 18:16:51,280 p=187398 u=qupeng |  TASK [set_fact] ************************************************************************************************************************************************************
2018-03-06 18:16:51,330 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:51,339 p=187398 u=qupeng |  TASK [set_fact] ************************************************************************************************************************************************************
2018-03-06 18:16:51,366 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:51,376 p=187398 u=qupeng |  TASK [debug] ***************************************************************************************************************************************************************
2018-03-06 18:16:51,403 p=187398 u=qupeng |  ok: [tikv1] => {
    "pd_addr": "172.16.21.1:60001"
}
2018-03-06 18:16:51,412 p=187398 u=qupeng |  TASK [debug] ***************************************************************************************************************************************************************
2018-03-06 18:16:51,439 p=187398 u=qupeng |  ok: [tikv1] => {
    "tikv_addr": "172.16.21.1:60005"
}
2018-03-06 18:16:51,448 p=187398 u=qupeng |  TASK [get store info from PD] **********************************************************************************************************************************************
2018-03-06 18:16:52,365 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:52,379 p=187398 u=qupeng |  TASK [set_fact] ************************************************************************************************************************************************************
2018-03-06 18:16:52,437 p=187398 u=qupeng |  ok: [tikv1] => (item=4)
2018-03-06 18:16:52,449 p=187398 u=qupeng |  TASK [debug] ***************************************************************************************************************************************************************
2018-03-06 18:16:52,490 p=187398 u=qupeng |  ok: [tikv1] => {
    "store_id": 4
}
2018-03-06 18:16:52,501 p=187398 u=qupeng |  TASK [remove evict-leader-scheduler] ***************************************************************************************************************************************
2018-03-06 18:16:53,279 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:53,292 p=187398 u=qupeng |  TASK [add evict-leader-scheduler] ******************************************************************************************************************************************
2018-03-06 18:16:54,074 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:54,082 p=187398 u=qupeng |  TASK [check tikv's leader count] *******************************************************************************************************************************************
2018-03-06 18:16:54,800 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:54,811 p=187398 u=qupeng |  TASK [debug] ***************************************************************************************************************************************************************
2018-03-06 18:16:54,860 p=187398 u=qupeng |  ok: [tikv1] => {
    "store_info.json.status.leader_count": "3"
}
2018-03-06 18:16:54,869 p=187398 u=qupeng |  TASK [stop TiKV by supervise] **********************************************************************************************************************************************
2018-03-06 18:16:55,787 p=187398 u=qupeng |  changed: [tikv1]
2018-03-06 18:16:55,798 p=187398 u=qupeng |  TASK [stop TiKV by systemd] ************************************************************************************************************************************************
2018-03-06 18:16:55,824 p=187398 u=qupeng |  TASK [stop TiKV by systemd] ************************************************************************************************************************************************
2018-03-06 18:16:55,848 p=187398 u=qupeng |  TASK [wait TiKV down (via Port)] *******************************************************************************************************************************************
2018-03-06 18:16:56,645 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:56,657 p=187398 u=qupeng |  TASK [wait TiKV down (via PID)] ********************************************************************************************************************************************
2018-03-06 18:16:57,484 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:16:57,498 p=187398 u=qupeng |  TASK [command] *************************************************************************************************************************************************************
2018-03-06 18:16:58,329 p=187398 u=qupeng |  changed: [tikv1]
2018-03-06 18:16:58,342 p=187398 u=qupeng |  TASK [display old tikv pid] ************************************************************************************************************************************************
2018-03-06 18:16:58,371 p=187398 u=qupeng |  ok: [tikv1] => {
    "msg": "tikv binary or docker pid: 176032"
}
2018-03-06 18:16:58,385 p=187398 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:16:59,316 p=187398 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/scripts)
2018-03-06 18:17:00,016 p=187398 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:17:00,691 p=187398 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/backup)
2018-03-06 18:17:00,707 p=187398 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:17:01,441 p=187398 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status)
2018-03-06 18:17:01,453 p=187398 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:17:02,150 p=187398 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/bin)
2018-03-06 18:17:02,164 p=187398 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:17:02,207 p=187398 u=qupeng |  TASK [tikv : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:17:02,931 p=187398 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/log)
2018-03-06 18:17:03,584 p=187398 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/data)
2018-03-06 18:17:04,264 p=187398 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:17:04,278 p=187398 u=qupeng |  TASK [tikv : load customized config] ***************************************************************************************************************************************
2018-03-06 18:17:04,330 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:17:04,340 p=187398 u=qupeng |  TASK [tikv : load default config] ******************************************************************************************************************************************
2018-03-06 18:17:04,408 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:17:04,423 p=187398 u=qupeng |  TASK [tikv : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:17:04,505 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:17:04,519 p=187398 u=qupeng |  TASK [tikv : generate final config] ****************************************************************************************************************************************
2018-03-06 18:17:04,597 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:17:04,610 p=187398 u=qupeng |  TASK [tikv : debug] ********************************************************************************************************************************************************
2018-03-06 18:17:04,687 p=187398 u=qupeng |  ok: [tikv1] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:17:04,702 p=187398 u=qupeng |  TASK [tikv : create config file] *******************************************************************************************************************************************
2018-03-06 18:17:06,709 p=187398 u=qupeng |  changed: [tikv1]
2018-03-06 18:17:06,719 p=187398 u=qupeng |  TASK [tikv : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:17:07,607 p=187398 u=qupeng |  changed: [tikv1]
2018-03-06 18:17:07,620 p=187398 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:17:07,668 p=187398 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/binary_deployment.yml for tikv1
2018-03-06 18:17:07,681 p=187398 u=qupeng |  TASK [tikv : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:17:09,648 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:17:09,661 p=187398 u=qupeng |  TASK [tikv : backup bianry file] *******************************************************************************************************************************************
2018-03-06 18:17:09,699 p=187398 u=qupeng |  TASK [tikv : create run script] ********************************************************************************************************************************************
2018-03-06 18:17:11,199 p=187398 u=qupeng |  ok: [tikv1] => (item=run)
2018-03-06 18:17:11,214 p=187398 u=qupeng |  TASK [tikv : backup script file] *******************************************************************************************************************************************
2018-03-06 18:17:11,250 p=187398 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:17:11,293 p=187398 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/supervise_deployment.yml for tikv1
2018-03-06 18:17:11,307 p=187398 u=qupeng |  TASK [tikv : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:17:11,928 p=187398 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:17:12,651 p=187398 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status/tikv)
2018-03-06 18:17:12,666 p=187398 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:17:14,059 p=187398 u=qupeng |  ok: [tikv1] => (item=supervise)
2018-03-06 18:17:15,481 p=187398 u=qupeng |  ok: [tikv1] => (item=svc)
2018-03-06 18:17:16,954 p=187398 u=qupeng |  ok: [tikv1] => (item=svstat)
2018-03-06 18:17:16,974 p=187398 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:17:18,482 p=187398 u=qupeng |  ok: [tikv1] => (item=start)
2018-03-06 18:17:19,906 p=187398 u=qupeng |  ok: [tikv1] => (item=stop)
2018-03-06 18:17:19,918 p=187398 u=qupeng |  TASK [tikv : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:17:19,968 p=187398 u=qupeng |  ok: [tikv1]
2018-03-06 18:17:19,981 p=187398 u=qupeng |  TASK [start TiKV by supervise] *********************************************************************************************************************************************
2018-03-06 18:17:20,847 p=187398 u=qupeng |  changed: [tikv1]
2018-03-06 18:17:20,860 p=187398 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:17:20,888 p=187398 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:17:20,919 p=187398 u=qupeng |  TASK [wait TiKV up] ********************************************************************************************************************************************************
2018-03-06 18:22:21,976 p=187398 u=qupeng |  fatal: [tikv1]: FAILED! => {"changed": false, "elapsed": 300, "msg": "Timeout when waiting for PID:/data3/qupeng/raftstore-learner/tikv1/status/tikv.pid to stop."}
2018-03-06 18:22:21,977 fail [tikv1]: Ansible FAILED! => playbook: rolling_update.yml; TASK: wait TiKV up; message: {"changed": false, "elapsed": 300, "msg": "Timeout when waiting for PID:/data3/qupeng/raftstore-learner/tikv1/status/tikv.pid to stop."}
2018-03-06 18:22:21,978 p=187398 u=qupeng |  NO MORE HOSTS LEFT *********************************************************************************************************************************************************
2018-03-06 18:22:21,981 p=187398 u=qupeng |  	to retry, use: --limit @/home/qupeng/ansible/tidb-ansible/retry_files/rolling_update.retry

2018-03-06 18:22:21,981 p=187398 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:22:21,981 p=187398 u=qupeng |  172.16.21.1                : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:22:21,982 p=187398 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:22:21,982 p=187398 u=qupeng |  monitoring                 : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:22:21,982 p=187398 u=qupeng |  pd                         : ok=15   changed=0    unreachable=0    failed=0   
2018-03-06 18:22:21,983 p=187398 u=qupeng |  tidb                       : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:22:21,983 p=187398 u=qupeng |  tikv1                      : ok=49   changed=5    unreachable=0    failed=1   
2018-03-06 18:22:21,983 p=187398 u=qupeng |  tikv2                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:22:21,984 p=187398 u=qupeng |  tikv3                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:22:21,984 p=187398 u=qupeng |  tikv4                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:22:21,984 p=187398 u=qupeng |  tikv5                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:22:21,985 p=187398 u=qupeng |  ERROR MESSAGE SUMMARY ******************************************************************************************************************************************************
2018-03-06 18:22:21,985 p=187398 u=qupeng |  [tikv1]: Ansible FAILED! => playbook: rolling_update.yml; TASK: wait TiKV up; message: {"changed": false, "elapsed": 300, "msg": "Timeout when waiting for PID:/data3/qupeng/raftstore-learner/tikv1/status/tikv.pid to stop."}

2018-03-06 18:22:21,986 p=187398 u=qupeng |  Ask for help:
2018-03-06 18:22:21,986 p=187398 u=qupeng |  Contact us: sre@pingcap.com
2018-03-06 18:22:21,986 p=187398 u=qupeng |  It seems that you encounter some problems. You can send an email to the above email address, attached with the tidb-ansible/inventory.ini and tidb-ansible/log/ansible.log files and the error message, or new issue on https://github.com/pingcap/tidb-ansible/issues. We'll try our best to help you deploy a TiDB cluster. Thanks. :-)
2018-03-06 18:23:15,690 p=637 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:23:15,704 p=637 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:23:15,734 p=637 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:23:15,760 p=637 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:23:15,780 p=637 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:23:15,808 p=637 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:23:15,836 p=637 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:23:15,906 p=637 u=qupeng |  ok: [localhost]
2018-03-06 18:23:15,914 p=637 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:23:15,940 p=637 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:23:16,094 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:16,116 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:16,136 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:16,149 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:16,150 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:16,223 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:16,256 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:16,276 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:16,279 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:16,289 p=637 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:23:21,372 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:21,460 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:21,524 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:22,633 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:22,679 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:26,169 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:26,222 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:26,347 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:27,213 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:27,243 p=637 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:23:28,154 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:28,172 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:28,185 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:28,202 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:28,203 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:28,813 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:28,898 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:28,917 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:28,955 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:28,969 p=637 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:23:29,090 p=637 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:23:29,196 p=637 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:23:29,303 p=637 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:23:29,349 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:29,362 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:29,375 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:29,390 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:29,402 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:29,403 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:29,419 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:29,419 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:29,431 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:29,439 p=637 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:23:29,544 p=637 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:23:29,653 p=637 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:23:29,764 p=637 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:23:30,533 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:30,565 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:30,579 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:30,591 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:30,593 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:31,190 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:31,305 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:31,310 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:31,342 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:31,354 p=637 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:23:32,037 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:32,073 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:32,119 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:32,135 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:32,137 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:32,752 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:32,767 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:32,845 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:32,849 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:32,864 p=637 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:23:32,998 p=637 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:23:33,101 p=637 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:23:34,106 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:34,124 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:34,141 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:34,157 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:34,183 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:34,923 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:34,930 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:34,940 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:34,970 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:34,978 p=637 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:23:35,095 p=637 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:23:35,142 p=637 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:23:35,160 p=637 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:23:35,176 p=637 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:23:35,194 p=637 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:23:35,222 p=637 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:23:35,225 p=637 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:23:35,237 p=637 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:23:35,237 p=637 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:23:35,262 p=637 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:23:35,269 p=637 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:23:36,072 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:36,093 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:36,127 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:36,145 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:36,146 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:36,877 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:36,938 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:36,986 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:37,013 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:37,025 p=637 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:23:37,925 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:37,946 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:37,966 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:37,983 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:37,985 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:38,724 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:38,760 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:38,849 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:38,875 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:38,893 p=637 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:23:38,950 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:38,965 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:38,977 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:38,991 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:39,003 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:39,004 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:39,008 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:39,018 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:39,037 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:39,044 p=637 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:23:39,088 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:39,112 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:39,131 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:39,143 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:39,144 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:39,151 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:39,163 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:39,180 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:39,182 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:39,190 p=637 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:23:39,233 p=637 u=qupeng |  ok: [pd]
2018-03-06 18:23:39,245 p=637 u=qupeng |  ok: [monitoring]
2018-03-06 18:23:39,284 p=637 u=qupeng |  ok: [tidb]
2018-03-06 18:23:39,300 p=637 u=qupeng |  ok: [tikv2]
2018-03-06 18:23:39,300 p=637 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:23:39,301 p=637 u=qupeng |  ok: [tikv3]
2018-03-06 18:23:39,301 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:39,335 p=637 u=qupeng |  ok: [tikv5]
2018-03-06 18:23:39,347 p=637 u=qupeng |  ok: [tikv4]
2018-03-06 18:23:39,353 p=637 u=qupeng |  PLAY [rolling update PD cluster] *******************************************************************************************************************************************
2018-03-06 18:23:39,365 p=637 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:23:39,397 p=637 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-03-06 18:23:39,406 p=637 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:23:39,439 p=637 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-03-06 18:23:39,445 p=637 u=qupeng |  PLAY [rolling update TiKV cluster] *****************************************************************************************************************************************
2018-03-06 18:23:39,457 p=637 u=qupeng |  TASK [set_fact] ************************************************************************************************************************************************************
2018-03-06 18:23:39,548 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:39,558 p=637 u=qupeng |  TASK [set_fact] ************************************************************************************************************************************************************
2018-03-06 18:23:39,596 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:39,607 p=637 u=qupeng |  TASK [debug] ***************************************************************************************************************************************************************
2018-03-06 18:23:39,636 p=637 u=qupeng |  ok: [tikv1] => {
    "pd_addr": "172.16.21.1:60001"
}
2018-03-06 18:23:39,649 p=637 u=qupeng |  TASK [debug] ***************************************************************************************************************************************************************
2018-03-06 18:23:39,678 p=637 u=qupeng |  ok: [tikv1] => {
    "tikv_addr": "172.16.21.1:60005"
}
2018-03-06 18:23:39,690 p=637 u=qupeng |  TASK [get store info from PD] **********************************************************************************************************************************************
2018-03-06 18:23:40,627 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:40,641 p=637 u=qupeng |  TASK [set_fact] ************************************************************************************************************************************************************
2018-03-06 18:23:40,704 p=637 u=qupeng |  ok: [tikv1] => (item=4)
2018-03-06 18:23:40,716 p=637 u=qupeng |  TASK [debug] ***************************************************************************************************************************************************************
2018-03-06 18:23:40,746 p=637 u=qupeng |  ok: [tikv1] => {
    "store_id": 4
}
2018-03-06 18:23:40,756 p=637 u=qupeng |  TASK [remove evict-leader-scheduler] ***************************************************************************************************************************************
2018-03-06 18:23:41,485 p=637 u=qupeng |  FAILED - RETRYING: remove evict-leader-scheduler (3 retries left).
2018-03-06 18:23:47,216 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:47,229 p=637 u=qupeng |  TASK [add evict-leader-scheduler] ******************************************************************************************************************************************
2018-03-06 18:23:47,980 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:47,993 p=637 u=qupeng |  TASK [check tikv's leader count] *******************************************************************************************************************************************
2018-03-06 18:23:48,806 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:48,819 p=637 u=qupeng |  TASK [debug] ***************************************************************************************************************************************************************
2018-03-06 18:23:48,868 p=637 u=qupeng |  ok: [tikv1] => {
    "store_info.json.status.leader_count": "3"
}
2018-03-06 18:23:48,881 p=637 u=qupeng |  TASK [stop TiKV by supervise] **********************************************************************************************************************************************
2018-03-06 18:23:49,789 p=637 u=qupeng |  changed: [tikv1]
2018-03-06 18:23:49,796 p=637 u=qupeng |  TASK [stop TiKV by systemd] ************************************************************************************************************************************************
2018-03-06 18:23:49,825 p=637 u=qupeng |  TASK [stop TiKV by systemd] ************************************************************************************************************************************************
2018-03-06 18:23:49,851 p=637 u=qupeng |  TASK [wait TiKV down (via Port)] *******************************************************************************************************************************************
2018-03-06 18:23:50,649 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:50,661 p=637 u=qupeng |  TASK [wait TiKV down (via PID)] ********************************************************************************************************************************************
2018-03-06 18:23:51,482 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:51,488 p=637 u=qupeng |  TASK [command] *************************************************************************************************************************************************************
2018-03-06 18:23:53,347 p=637 u=qupeng |  changed: [tikv1]
2018-03-06 18:23:53,360 p=637 u=qupeng |  TASK [display old tikv pid] ************************************************************************************************************************************************
2018-03-06 18:23:53,403 p=637 u=qupeng |  ok: [tikv1] => {
    "msg": "tikv binary or docker pid: 5359"
}
2018-03-06 18:23:53,415 p=637 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:23:54,200 p=637 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/scripts)
2018-03-06 18:23:54,837 p=637 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:23:55,525 p=637 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/backup)
2018-03-06 18:23:55,542 p=637 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:23:56,275 p=637 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status)
2018-03-06 18:23:56,289 p=637 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:23:56,967 p=637 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/bin)
2018-03-06 18:23:56,978 p=637 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:23:57,005 p=637 u=qupeng |  TASK [tikv : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:23:57,673 p=637 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/log)
2018-03-06 18:23:58,401 p=637 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/data)
2018-03-06 18:23:59,068 p=637 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:23:59,083 p=637 u=qupeng |  TASK [tikv : load customized config] ***************************************************************************************************************************************
2018-03-06 18:23:59,116 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:59,131 p=637 u=qupeng |  TASK [tikv : load default config] ******************************************************************************************************************************************
2018-03-06 18:23:59,161 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:59,175 p=637 u=qupeng |  TASK [tikv : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:23:59,231 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:59,243 p=637 u=qupeng |  TASK [tikv : generate final config] ****************************************************************************************************************************************
2018-03-06 18:23:59,275 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:23:59,288 p=637 u=qupeng |  TASK [tikv : debug] ********************************************************************************************************************************************************
2018-03-06 18:23:59,325 p=637 u=qupeng |  ok: [tikv1] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:23:59,338 p=637 u=qupeng |  TASK [tikv : create config file] *******************************************************************************************************************************************
2018-03-06 18:24:00,722 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:24:00,735 p=637 u=qupeng |  TASK [tikv : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:24:00,764 p=637 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:24:00,809 p=637 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/binary_deployment.yml for tikv1
2018-03-06 18:24:00,824 p=637 u=qupeng |  TASK [tikv : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:24:02,858 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:24:02,872 p=637 u=qupeng |  TASK [tikv : backup bianry file] *******************************************************************************************************************************************
2018-03-06 18:24:02,909 p=637 u=qupeng |  TASK [tikv : create run script] ********************************************************************************************************************************************
2018-03-06 18:24:04,357 p=637 u=qupeng |  ok: [tikv1] => (item=run)
2018-03-06 18:24:04,366 p=637 u=qupeng |  TASK [tikv : backup script file] *******************************************************************************************************************************************
2018-03-06 18:24:04,395 p=637 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:24:04,432 p=637 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/supervise_deployment.yml for tikv1
2018-03-06 18:24:04,440 p=637 u=qupeng |  TASK [tikv : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:24:05,077 p=637 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:24:05,799 p=637 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status/tikv)
2018-03-06 18:24:05,812 p=637 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:24:07,200 p=637 u=qupeng |  ok: [tikv1] => (item=supervise)
2018-03-06 18:24:08,522 p=637 u=qupeng |  ok: [tikv1] => (item=svc)
2018-03-06 18:24:10,049 p=637 u=qupeng |  ok: [tikv1] => (item=svstat)
2018-03-06 18:24:10,065 p=637 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:24:11,637 p=637 u=qupeng |  ok: [tikv1] => (item=start)
2018-03-06 18:24:13,005 p=637 u=qupeng |  ok: [tikv1] => (item=stop)
2018-03-06 18:24:13,018 p=637 u=qupeng |  TASK [tikv : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:24:13,052 p=637 u=qupeng |  ok: [tikv1]
2018-03-06 18:24:13,062 p=637 u=qupeng |  TASK [start TiKV by supervise] *********************************************************************************************************************************************
2018-03-06 18:24:13,888 p=637 u=qupeng |  changed: [tikv1]
2018-03-06 18:24:13,899 p=637 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:24:13,935 p=637 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:24:13,965 p=637 u=qupeng |  TASK [wait TiKV up] ********************************************************************************************************************************************************
2018-03-06 18:25:37,349 p=637 u=qupeng |   [ERROR]: User interrupted execution

2018-03-06 18:25:45,466 p=7864 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:25:45,481 p=7864 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:25:45,508 p=7864 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:25:45,532 p=7864 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:25:45,549 p=7864 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:25:45,571 p=7864 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:25:45,594 p=7864 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:25:45,660 p=7864 u=qupeng |  ok: [localhost]
2018-03-06 18:25:45,668 p=7864 u=qupeng |  PLAY [initializing deployment target] **************************************************************************************************************************************
2018-03-06 18:25:45,693 p=7864 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:25:45,853 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:25:45,872 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:25:45,888 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:25:45,903 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:25:45,904 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:25:45,971 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:25:46,003 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:25:46,019 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:25:46,020 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:25:46,033 p=7864 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:25:51,038 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:25:51,096 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:25:51,144 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:25:51,220 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:25:52,085 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:25:55,679 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:25:55,715 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:25:55,834 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:25:55,994 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:25:56,025 p=7864 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:25:56,898 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:25:56,918 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:25:56,935 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:25:56,953 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:25:56,954 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:25:57,572 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:25:57,622 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:25:57,629 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:25:57,632 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:25:57,646 p=7864 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:25:57,783 p=7864 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:25:57,879 p=7864 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:25:57,976 p=7864 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:25:58,015 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:25:58,026 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:25:58,038 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:25:58,060 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:25:58,061 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:25:58,068 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:25:58,069 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:25:58,077 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:25:58,089 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:25:58,096 p=7864 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:25:58,200 p=7864 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:25:58,293 p=7864 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:25:58,387 p=7864 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:25:59,100 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:25:59,119 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:25:59,145 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:25:59,169 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:25:59,178 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:25:59,805 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:25:59,813 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:25:59,837 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:25:59,878 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:25:59,892 p=7864 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:26:00,652 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:26:00,666 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:00,680 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:26:00,691 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:00,729 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:26:01,446 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:26:01,448 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:26:01,451 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:26:01,456 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:26:01,473 p=7864 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:26:01,608 p=7864 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:26:01,725 p=7864 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:26:02,675 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:26:02,690 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:26:02,706 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:26:02,719 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:02,755 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:03,444 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:26:03,486 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:26:03,488 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:26:03,492 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:26:03,500 p=7864 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:26:03,595 p=7864 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:26:03,633 p=7864 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:26:03,653 p=7864 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:26:03,676 p=7864 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:26:03,692 p=7864 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:26:03,707 p=7864 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:26:03,708 p=7864 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:26:03,711 p=7864 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:26:03,734 p=7864 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:26:03,738 p=7864 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:26:03,751 p=7864 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:26:04,576 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:04,634 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:04,647 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:26:04,660 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:26:04,667 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:26:05,387 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:26:05,465 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:26:05,501 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:26:05,522 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:26:05,530 p=7864 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:26:06,347 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:06,359 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:26:06,374 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:26:06,407 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:06,440 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:26:07,152 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:26:07,156 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:26:07,192 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:26:07,225 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:26:07,233 p=7864 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:26:07,274 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:07,297 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:26:07,309 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:07,321 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:26:07,322 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:26:07,323 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:26:07,325 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:26:07,343 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:26:07,352 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:26:07,359 p=7864 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:26:07,406 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:07,432 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:07,453 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:26:07,464 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:26:07,465 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:26:07,466 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:26:07,475 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:26:07,497 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:26:07,513 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:26:07,520 p=7864 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:26:07,575 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:07,614 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:26:07,626 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:07,637 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:26:07,638 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:26:07,638 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:26:07,663 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:26:07,676 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:26:07,690 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:26:07,696 p=7864 u=qupeng |  PLAY [deploying monitoring agent] ******************************************************************************************************************************************
2018-03-06 18:26:07,706 p=7864 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:26:08,507 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-03-06 18:26:09,264 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:26:09,940 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-03-06 18:26:09,954 p=7864 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:26:09,994 p=7864 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:26:10,664 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-03-06 18:26:10,678 p=7864 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:26:10,727 p=7864 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-03-06 18:26:10,779 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/binary_deployment.yml for pd
2018-03-06 18:26:10,792 p=7864 u=qupeng |  TASK [node_exporter : create deploy directories] ***************************************************************************************************************************
2018-03-06 18:26:11,454 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:26:11,466 p=7864 u=qupeng |  TASK [node_exporter : deploy node_exporter binary] *************************************************************************************************************************
2018-03-06 18:26:13,629 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:13,643 p=7864 u=qupeng |  TASK [node_exporter : create run script] ***********************************************************************************************************************************
2018-03-06 18:26:15,048 p=7864 u=qupeng |  ok: [pd] => (item=run)
2018-03-06 18:26:15,062 p=7864 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-03-06 18:26:15,100 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/supervise_deployment.yml for pd
2018-03-06 18:26:15,116 p=7864 u=qupeng |  TASK [node_exporter : deploy supervise] ************************************************************************************************************************************
2018-03-06 18:26:15,641 p=7864 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:26:16,357 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/node_exporter)
2018-03-06 18:26:16,370 p=7864 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:26:17,727 p=7864 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 18:26:19,025 p=7864 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 18:26:20,428 p=7864 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 18:26:20,441 p=7864 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:26:21,859 p=7864 u=qupeng |  ok: [pd] => (item=start)
2018-03-06 18:26:23,333 p=7864 u=qupeng |  ok: [pd] => (item=stop)
2018-03-06 18:26:23,346 p=7864 u=qupeng |  TASK [node_exporter : prepare firewalld white list] ************************************************************************************************************************
2018-03-06 18:26:23,409 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:23,424 p=7864 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-03-06 18:26:23,481 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/binary_deployment.yml for pd
2018-03-06 18:26:23,493 p=7864 u=qupeng |  TASK [blackbox_exporter : create deploy directories] ***********************************************************************************************************************
2018-03-06 18:26:24,217 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:26:24,232 p=7864 u=qupeng |  TASK [blackbox_exporter : deploy blackbox_exporter binary] *****************************************************************************************************************
2018-03-06 18:26:26,337 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:26,352 p=7864 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-03-06 18:26:26,391 p=7864 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-03-06 18:26:27,274 p=7864 u=qupeng |  changed: [pd]
2018-03-06 18:26:27,285 p=7864 u=qupeng |  TASK [blackbox_exporter : create run script] *******************************************************************************************************************************
2018-03-06 18:26:28,789 p=7864 u=qupeng |  ok: [pd] => (item=run)
2018-03-06 18:26:28,803 p=7864 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-03-06 18:26:28,854 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/supervise_deployment.yml for pd
2018-03-06 18:26:28,869 p=7864 u=qupeng |  TASK [blackbox_exporter : deploy supervise] ********************************************************************************************************************************
2018-03-06 18:26:29,405 p=7864 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:26:30,190 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/blackbox_exporter)
2018-03-06 18:26:30,200 p=7864 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:26:31,678 p=7864 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 18:26:33,049 p=7864 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 18:26:34,472 p=7864 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 18:26:34,487 p=7864 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:26:35,924 p=7864 u=qupeng |  ok: [pd] => (item=start)
2018-03-06 18:26:37,266 p=7864 u=qupeng |  ok: [pd] => (item=stop)
2018-03-06 18:26:37,281 p=7864 u=qupeng |  TASK [blackbox_exporter : create config file] ******************************************************************************************************************************
2018-03-06 18:26:38,733 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:38,745 p=7864 u=qupeng |  TASK [blackbox_exporter : backup conf file] ********************************************************************************************************************************
2018-03-06 18:26:38,790 p=7864 u=qupeng |  TASK [blackbox_exporter : prepare firewalld white list] ********************************************************************************************************************
2018-03-06 18:26:38,843 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:26:38,852 p=7864 u=qupeng |  PLAY [deploying monitoring server] *****************************************************************************************************************************************
2018-03-06 18:26:38,872 p=7864 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:26:39,614 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-03-06 18:26:40,314 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-03-06 18:26:40,981 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-03-06 18:26:40,994 p=7864 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:26:41,030 p=7864 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:26:41,738 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-03-06 18:26:41,752 p=7864 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:26:41,796 p=7864 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-03-06 18:26:41,841 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/binary_deployment.yml for monitoring
2018-03-06 18:26:41,854 p=7864 u=qupeng |  TASK [pushgateway : create deploy directories] *****************************************************************************************************************************
2018-03-06 18:26:42,565 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:26:42,580 p=7864 u=qupeng |  TASK [pushgateway : deploy pushgateway binary] *****************************************************************************************************************************
2018-03-06 18:26:44,118 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:44,131 p=7864 u=qupeng |  TASK [pushgateway : create run script] *************************************************************************************************************************************
2018-03-06 18:26:45,485 p=7864 u=qupeng |  ok: [monitoring] => (item=run)
2018-03-06 18:26:45,500 p=7864 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-03-06 18:26:45,534 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/supervise_deployment.yml for monitoring
2018-03-06 18:26:45,547 p=7864 u=qupeng |  TASK [pushgateway : deploy supervise] **************************************************************************************************************************************
2018-03-06 18:26:46,112 p=7864 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:26:46,821 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/pushgateway)
2018-03-06 18:26:46,830 p=7864 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:26:48,246 p=7864 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-03-06 18:26:49,710 p=7864 u=qupeng |  ok: [monitoring] => (item=svc)
2018-03-06 18:26:51,077 p=7864 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-03-06 18:26:51,092 p=7864 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:26:52,513 p=7864 u=qupeng |  ok: [monitoring] => (item=start)
2018-03-06 18:26:53,931 p=7864 u=qupeng |  ok: [monitoring] => (item=stop)
2018-03-06 18:26:53,944 p=7864 u=qupeng |  TASK [pushgateway : prepare firewalld white list] **************************************************************************************************************************
2018-03-06 18:26:53,987 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:53,997 p=7864 u=qupeng |  TASK [prometheus : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:26:54,691 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:26:55,351 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-03-06 18:26:56,050 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-03-06 18:26:56,066 p=7864 u=qupeng |  TASK [prometheus : get config file stat] ***********************************************************************************************************************************
2018-03-06 18:26:56,999 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:57,012 p=7864 u=qupeng |  TASK [prometheus : get alert conf stat] ************************************************************************************************************************************
2018-03-06 18:26:57,717 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:57,724 p=7864 u=qupeng |  TASK [prometheus : create configuration file if not exist] *****************************************************************************************************************
2018-03-06 18:26:59,477 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:26:59,491 p=7864 u=qupeng |  TASK [prometheus : copy alert rules file] **********************************************************************************************************************************
2018-03-06 18:27:01,366 p=7864 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-03-06 18:27:02,911 p=7864 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-03-06 18:27:04,537 p=7864 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-03-06 18:27:06,117 p=7864 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-03-06 18:27:07,760 p=7864 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-03-06 18:27:09,396 p=7864 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-03-06 18:27:11,036 p=7864 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-03-06 18:27:11,050 p=7864 u=qupeng |  TASK [prometheus : set alert rules label changes] **************************************************************************************************************************
2018-03-06 18:27:11,874 p=7864 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-03-06 18:27:12,559 p=7864 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-03-06 18:27:13,234 p=7864 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-03-06 18:27:13,930 p=7864 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-03-06 18:27:14,608 p=7864 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-03-06 18:27:15,287 p=7864 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-03-06 18:27:15,996 p=7864 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-03-06 18:27:16,013 p=7864 u=qupeng |  TASK [prometheus : create deploy data directory] ***************************************************************************************************************************
2018-03-06 18:27:16,744 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-03-06 18:27:16,758 p=7864 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-03-06 18:27:16,806 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/binary_deployment.yml for monitoring
2018-03-06 18:27:16,820 p=7864 u=qupeng |  TASK [prometheus : create deploy log directory] ****************************************************************************************************************************
2018-03-06 18:27:17,538 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:27:17,551 p=7864 u=qupeng |  TASK [prometheus : deploy prometheus binary] *******************************************************************************************************************************
2018-03-06 18:27:19,149 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:27:19,163 p=7864 u=qupeng |  TASK [prometheus : create run script] **************************************************************************************************************************************
2018-03-06 18:27:20,594 p=7864 u=qupeng |  ok: [monitoring] => (item=run)
2018-03-06 18:27:20,607 p=7864 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-03-06 18:27:20,647 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/supervise_deployment.yml for monitoring
2018-03-06 18:27:20,658 p=7864 u=qupeng |  TASK [prometheus : deploy supervise] ***************************************************************************************************************************************
2018-03-06 18:27:21,208 p=7864 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:27:21,965 p=7864 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-03-06 18:27:21,980 p=7864 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:27:23,377 p=7864 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-03-06 18:27:24,759 p=7864 u=qupeng |  ok: [monitoring] => (item=svc)
2018-03-06 18:27:26,127 p=7864 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-03-06 18:27:26,143 p=7864 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:27:27,545 p=7864 u=qupeng |  ok: [monitoring] => (item=start)
2018-03-06 18:27:28,927 p=7864 u=qupeng |  ok: [monitoring] => (item=stop)
2018-03-06 18:27:28,939 p=7864 u=qupeng |  TASK [prometheus : prepare firewalld white list] ***************************************************************************************************************************
2018-03-06 18:27:28,986 p=7864 u=qupeng |  ok: [monitoring]
2018-03-06 18:27:28,995 p=7864 u=qupeng |  PLAY [deploying grafana] ***************************************************************************************************************************************************
2018-03-06 18:27:29,011 p=7864 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:27:29,742 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-03-06 18:27:30,487 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-03-06 18:27:31,176 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-03-06 18:27:31,192 p=7864 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:27:31,246 p=7864 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:27:32,027 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-03-06 18:27:32,041 p=7864 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:27:32,090 p=7864 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:27:32,139 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/tasks.yml for 172.16.21.1
2018-03-06 18:27:32,151 p=7864 u=qupeng |  TASK [grafana : create common deploy directories] **************************************************************************************************************************
2018-03-06 18:27:32,904 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:27:33,609 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/data.grafana)
2018-03-06 18:27:33,623 p=7864 u=qupeng |  TASK [grafana : push data source file] *************************************************************************************************************************************
2018-03-06 18:27:35,055 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:27:35,068 p=7864 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:27:35,125 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/binary_deployment.yml for 172.16.21.1
2018-03-06 18:27:35,141 p=7864 u=qupeng |  TASK [grafana : create binary deploy directories (1/2)] ********************************************************************************************************************
2018-03-06 18:27:35,856 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt)
2018-03-06 18:27:35,867 p=7864 u=qupeng |  TASK [grafana : deploy grafana binary] *************************************************************************************************************************************
2018-03-06 18:27:36,329 p=7864 u=qupeng |  TASK [grafana : rename grafana deploy dir] *********************************************************************************************************************************
2018-03-06 18:27:37,031 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:27:37,045 p=7864 u=qupeng |  TASK [grafana : create binary deploy directories (2/2)] ********************************************************************************************************************
2018-03-06 18:27:37,743 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/dashboards)
2018-03-06 18:27:38,421 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/plugins)
2018-03-06 18:27:38,436 p=7864 u=qupeng |  TASK [grafana : create grafana configuration file] *************************************************************************************************************************
2018-03-06 18:27:39,839 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:27:39,853 p=7864 u=qupeng |  TASK [grafana : create run script] *****************************************************************************************************************************************
2018-03-06 18:27:41,260 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=run)
2018-03-06 18:27:41,275 p=7864 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:27:41,318 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/supervise_deployment.yml for 172.16.21.1
2018-03-06 18:27:41,333 p=7864 u=qupeng |  TASK [grafana : deploy supervise] ******************************************************************************************************************************************
2018-03-06 18:27:41,913 p=7864 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:27:42,650 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/grafana)
2018-03-06 18:27:42,670 p=7864 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:27:44,086 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-03-06 18:27:45,459 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-03-06 18:27:46,921 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-03-06 18:27:46,936 p=7864 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:27:48,455 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=start)
2018-03-06 18:27:49,823 p=7864 u=qupeng |  ok: [172.16.21.1] => (item=stop)
2018-03-06 18:27:49,839 p=7864 u=qupeng |  TASK [grafana : prepare firewalld white list] ******************************************************************************************************************************
2018-03-06 18:27:49,879 p=7864 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:27:49,888 p=7864 u=qupeng |  PLAY [deploying PD cluster] ************************************************************************************************************************************************
2018-03-06 18:27:49,906 p=7864 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:27:50,593 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-03-06 18:27:51,264 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:27:51,938 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-03-06 18:27:51,952 p=7864 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:27:52,002 p=7864 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:27:52,747 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-03-06 18:27:52,762 p=7864 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:27:52,809 p=7864 u=qupeng |  TASK [pd : create deploy directories] **************************************************************************************************************************************
2018-03-06 18:27:53,529 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:27:54,209 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:27:54,895 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/data.pd)
2018-03-06 18:27:54,917 p=7864 u=qupeng |  TASK [pd : load customized config] *****************************************************************************************************************************************
2018-03-06 18:27:54,983 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:27:54,998 p=7864 u=qupeng |  TASK [pd : load default config] ********************************************************************************************************************************************
2018-03-06 18:27:55,056 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:27:55,071 p=7864 u=qupeng |  TASK [pd : generate metrics config] ****************************************************************************************************************************************
2018-03-06 18:27:55,137 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:27:55,146 p=7864 u=qupeng |  TASK [pd : generate final config] ******************************************************************************************************************************************
2018-03-06 18:27:55,184 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:27:55,191 p=7864 u=qupeng |  TASK [pd : debug] **********************************************************************************************************************************************************
2018-03-06 18:27:55,228 p=7864 u=qupeng |  ok: [pd] => {
    "pd_conf": {
        "global": {
            "lease": 3, 
            "tso-save-interval": "3s"
        }, 
        "log": {
            "file": {}, 
            "level": "info"
        }, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s"
        }, 
        "replication": {
            "location-labels": [], 
            "max-replicas": 3
        }, 
        "schedule": {
            "leader-schedule-limit": 64, 
            "max-pending-peer-count": 16, 
            "max-snapshot-count": 3, 
            "max-store-down-time": "1h", 
            "region-schedule-limit": 16, 
            "replica-schedule-limit": 24, 
            "tolerant-size-ratio": 2.5
        }, 
        "security": {
            "cacert-path": "", 
            "cert-path": "", 
            "key-path": ""
        }
    }
}
2018-03-06 18:27:55,235 p=7864 u=qupeng |  TASK [pd : create configuration file] **************************************************************************************************************************************
2018-03-06 18:27:56,527 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:27:56,539 p=7864 u=qupeng |  TASK [pd : backup conf file] ***********************************************************************************************************************************************
2018-03-06 18:27:56,570 p=7864 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:27:56,608 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-03-06 18:27:56,620 p=7864 u=qupeng |  TASK [pd : deploy binary] **************************************************************************************************************************************************
2018-03-06 18:27:58,093 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:27:58,101 p=7864 u=qupeng |  TASK [pd : backup bianry file] *********************************************************************************************************************************************
2018-03-06 18:27:58,125 p=7864 u=qupeng |  TASK [pd : create startup script] ******************************************************************************************************************************************
2018-03-06 18:27:59,503 p=7864 u=qupeng |  ok: [pd] => (item=run)
2018-03-06 18:27:59,511 p=7864 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:27:59,546 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-03-06 18:27:59,554 p=7864 u=qupeng |  TASK [pd : deploy supervise] ***********************************************************************************************************************************************
2018-03-06 18:28:00,166 p=7864 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:28:00,895 p=7864 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/pd)
2018-03-06 18:28:00,909 p=7864 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:28:02,383 p=7864 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 18:28:03,792 p=7864 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 18:28:05,193 p=7864 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 18:28:05,210 p=7864 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:28:06,625 p=7864 u=qupeng |  ok: [pd] => (item=start)
2018-03-06 18:28:08,053 p=7864 u=qupeng |  ok: [pd] => (item=stop)
2018-03-06 18:28:08,068 p=7864 u=qupeng |  TASK [pd : prepare firewalld white list] ***********************************************************************************************************************************
2018-03-06 18:28:08,105 p=7864 u=qupeng |  ok: [pd]
2018-03-06 18:28:08,115 p=7864 u=qupeng |  PLAY [deploying TiKV cluster] **********************************************************************************************************************************************
2018-03-06 18:28:08,135 p=7864 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:28:08,761 p=7864 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/scripts)
2018-03-06 18:28:08,794 p=7864 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/scripts)
2018-03-06 18:28:08,801 p=7864 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/scripts)
2018-03-06 18:28:08,806 p=7864 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/scripts)
2018-03-06 18:28:08,820 p=7864 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/scripts)
2018-03-06 18:28:09,334 p=7864 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:28:09,384 p=7864 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-03-06 18:28:09,391 p=7864 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-03-06 18:28:09,405 p=7864 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-03-06 18:28:09,415 p=7864 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-03-06 18:28:09,909 p=7864 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/backup)
2018-03-06 18:28:09,995 p=7864 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/backup)
2018-03-06 18:28:09,999 p=7864 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/backup)
2018-03-06 18:28:10,004 p=7864 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/backup)
2018-03-06 18:28:10,029 p=7864 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/backup)
2018-03-06 18:28:10,037 p=7864 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:28:10,709 p=7864 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status)
2018-03-06 18:28:10,711 p=7864 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status)
2018-03-06 18:28:10,714 p=7864 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status)
2018-03-06 18:28:10,723 p=7864 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status)
2018-03-06 18:28:10,750 p=7864 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status)
2018-03-06 18:28:10,763 p=7864 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:28:11,449 p=7864 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/bin)
2018-03-06 18:28:11,457 p=7864 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/bin)
2018-03-06 18:28:11,462 p=7864 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/bin)
2018-03-06 18:28:11,465 p=7864 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/bin)
2018-03-06 18:28:11,467 p=7864 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/bin)
2018-03-06 18:28:11,476 p=7864 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:28:11,549 p=7864 u=qupeng |  TASK [tikv : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:28:12,179 p=7864 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/log)
2018-03-06 18:28:12,204 p=7864 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/log)
2018-03-06 18:28:12,209 p=7864 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/log)
2018-03-06 18:28:12,212 p=7864 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/log)
2018-03-06 18:28:12,247 p=7864 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/log)
2018-03-06 18:28:12,782 p=7864 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/data)
2018-03-06 18:28:12,823 p=7864 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/data)
2018-03-06 18:28:12,834 p=7864 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/data)
2018-03-06 18:28:12,836 p=7864 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/data)
2018-03-06 18:28:12,848 p=7864 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/data)
2018-03-06 18:28:13,351 p=7864 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:28:13,413 p=7864 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-03-06 18:28:13,453 p=7864 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-03-06 18:28:13,459 p=7864 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-03-06 18:28:13,463 p=7864 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-03-06 18:28:13,473 p=7864 u=qupeng |  TASK [tikv : load customized config] ***************************************************************************************************************************************
2018-03-06 18:28:13,527 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:28:13,532 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:28:13,537 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:28:13,550 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:28:13,588 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:28:13,595 p=7864 u=qupeng |  TASK [tikv : load default config] ******************************************************************************************************************************************
2018-03-06 18:28:13,644 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:28:13,665 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:28:13,671 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:28:13,675 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:28:13,695 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:28:13,703 p=7864 u=qupeng |  TASK [tikv : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:28:13,790 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:28:13,802 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:28:13,816 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:28:13,821 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:28:13,835 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:28:13,842 p=7864 u=qupeng |  TASK [tikv : generate final config] ****************************************************************************************************************************************
2018-03-06 18:28:13,878 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:28:13,908 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:28:13,909 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:28:13,911 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:28:13,923 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:28:13,930 p=7864 u=qupeng |  TASK [tikv : debug] ********************************************************************************************************************************************************
2018-03-06 18:28:13,968 p=7864 u=qupeng |  ok: [tikv1] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:28:13,981 p=7864 u=qupeng |  ok: [tikv2] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:28:13,996 p=7864 u=qupeng |  ok: [tikv4] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:28:14,008 p=7864 u=qupeng |  ok: [tikv3] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:28:14,012 p=7864 u=qupeng |  ok: [tikv5] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:28:14,019 p=7864 u=qupeng |  TASK [tikv : create config file] *******************************************************************************************************************************************
2018-03-06 18:28:15,234 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:28:15,644 p=7864 u=qupeng |  changed: [tikv2]
2018-03-06 18:28:15,668 p=7864 u=qupeng |  changed: [tikv4]
2018-03-06 18:28:15,734 p=7864 u=qupeng |  changed: [tikv3]
2018-03-06 18:28:15,792 p=7864 u=qupeng |  changed: [tikv5]
2018-03-06 18:28:15,807 p=7864 u=qupeng |  TASK [tikv : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:28:16,554 p=7864 u=qupeng |  changed: [tikv2]
2018-03-06 18:28:16,560 p=7864 u=qupeng |  changed: [tikv4]
2018-03-06 18:28:16,570 p=7864 u=qupeng |  changed: [tikv3]
2018-03-06 18:28:16,617 p=7864 u=qupeng |  changed: [tikv5]
2018-03-06 18:28:16,627 p=7864 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:28:16,733 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/binary_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-03-06 18:28:16,746 p=7864 u=qupeng |  TASK [tikv : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:28:18,560 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:28:18,626 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:28:18,628 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:28:18,631 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:28:18,653 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:28:18,663 p=7864 u=qupeng |  TASK [tikv : backup bianry file] *******************************************************************************************************************************************
2018-03-06 18:28:18,730 p=7864 u=qupeng |  TASK [tikv : create run script] ********************************************************************************************************************************************
2018-03-06 18:28:20,064 p=7864 u=qupeng |  ok: [tikv1] => (item=run)
2018-03-06 18:28:20,068 p=7864 u=qupeng |  ok: [tikv3] => (item=run)
2018-03-06 18:28:20,070 p=7864 u=qupeng |  ok: [tikv5] => (item=run)
2018-03-06 18:28:20,073 p=7864 u=qupeng |  ok: [tikv2] => (item=run)
2018-03-06 18:28:20,076 p=7864 u=qupeng |  ok: [tikv4] => (item=run)
2018-03-06 18:28:20,084 p=7864 u=qupeng |  TASK [tikv : backup script file] *******************************************************************************************************************************************
2018-03-06 18:28:20,150 p=7864 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:28:20,265 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/supervise_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-03-06 18:28:20,286 p=7864 u=qupeng |  TASK [tikv : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:28:22,908 p=7864 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:28:23,588 p=7864 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status/tikv)
2018-03-06 18:28:23,649 p=7864 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status/tikv)
2018-03-06 18:28:23,651 p=7864 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status/tikv)
2018-03-06 18:28:23,660 p=7864 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status/tikv)
2018-03-06 18:28:23,671 p=7864 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status/tikv)
2018-03-06 18:28:23,683 p=7864 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:28:24,928 p=7864 u=qupeng |  ok: [tikv1] => (item=supervise)
2018-03-06 18:28:24,995 p=7864 u=qupeng |  ok: [tikv4] => (item=supervise)
2018-03-06 18:28:25,030 p=7864 u=qupeng |  ok: [tikv5] => (item=supervise)
2018-03-06 18:28:25,041 p=7864 u=qupeng |  ok: [tikv3] => (item=supervise)
2018-03-06 18:28:25,054 p=7864 u=qupeng |  ok: [tikv2] => (item=supervise)
2018-03-06 18:28:26,149 p=7864 u=qupeng |  ok: [tikv1] => (item=svc)
2018-03-06 18:28:26,241 p=7864 u=qupeng |  ok: [tikv4] => (item=svc)
2018-03-06 18:28:26,249 p=7864 u=qupeng |  ok: [tikv3] => (item=svc)
2018-03-06 18:28:26,257 p=7864 u=qupeng |  ok: [tikv5] => (item=svc)
2018-03-06 18:28:26,296 p=7864 u=qupeng |  ok: [tikv2] => (item=svc)
2018-03-06 18:28:27,408 p=7864 u=qupeng |  ok: [tikv1] => (item=svstat)
2018-03-06 18:28:27,496 p=7864 u=qupeng |  ok: [tikv5] => (item=svstat)
2018-03-06 18:28:27,501 p=7864 u=qupeng |  ok: [tikv3] => (item=svstat)
2018-03-06 18:28:27,505 p=7864 u=qupeng |  ok: [tikv2] => (item=svstat)
2018-03-06 18:28:27,505 p=7864 u=qupeng |  ok: [tikv4] => (item=svstat)
2018-03-06 18:28:27,515 p=7864 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:28:28,801 p=7864 u=qupeng |  ok: [tikv1] => (item=start)
2018-03-06 18:28:28,817 p=7864 u=qupeng |  ok: [tikv3] => (item=start)
2018-03-06 18:28:28,819 p=7864 u=qupeng |  ok: [tikv2] => (item=start)
2018-03-06 18:28:28,861 p=7864 u=qupeng |  ok: [tikv4] => (item=start)
2018-03-06 18:28:28,869 p=7864 u=qupeng |  ok: [tikv5] => (item=start)
2018-03-06 18:28:30,010 p=7864 u=qupeng |  ok: [tikv3] => (item=stop)
2018-03-06 18:28:30,042 p=7864 u=qupeng |  ok: [tikv2] => (item=stop)
2018-03-06 18:28:30,072 p=7864 u=qupeng |  ok: [tikv5] => (item=stop)
2018-03-06 18:28:30,088 p=7864 u=qupeng |  ok: [tikv4] => (item=stop)
2018-03-06 18:28:30,091 p=7864 u=qupeng |  ok: [tikv1] => (item=stop)
2018-03-06 18:28:30,103 p=7864 u=qupeng |  TASK [tikv : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:28:30,170 p=7864 u=qupeng |  ok: [tikv2]
2018-03-06 18:28:30,171 p=7864 u=qupeng |  ok: [tikv1]
2018-03-06 18:28:30,177 p=7864 u=qupeng |  ok: [tikv3]
2018-03-06 18:28:30,213 p=7864 u=qupeng |  ok: [tikv4]
2018-03-06 18:28:30,228 p=7864 u=qupeng |  ok: [tikv5]
2018-03-06 18:28:30,234 p=7864 u=qupeng |  PLAY [deploying TiDB cluster] **********************************************************************************************************************************************
2018-03-06 18:28:30,247 p=7864 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:28:30,300 p=7864 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:28:30,334 p=7864 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:28:30,373 p=7864 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:28:30,408 p=7864 u=qupeng |  TASK [pump : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:28:30,450 p=7864 u=qupeng |  TASK [pump : include] ******************************************************************************************************************************************************
2018-03-06 18:28:30,476 p=7864 u=qupeng |  TASK [pump : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:28:30,501 p=7864 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:28:31,184 p=7864 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/scripts)
2018-03-06 18:28:31,909 p=7864 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-03-06 18:28:32,594 p=7864 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/backup)
2018-03-06 18:28:32,610 p=7864 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:28:32,662 p=7864 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:28:33,364 p=7864 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/bin)
2018-03-06 18:28:33,376 p=7864 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:28:33,428 p=7864 u=qupeng |  TASK [tidb : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:28:34,172 p=7864 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/log)
2018-03-06 18:28:34,851 p=7864 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-03-06 18:28:34,860 p=7864 u=qupeng |  TASK [tidb : load customized config] ***************************************************************************************************************************************
2018-03-06 18:28:34,920 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:28:34,929 p=7864 u=qupeng |  TASK [tidb : load default config] ******************************************************************************************************************************************
2018-03-06 18:28:35,003 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:28:35,020 p=7864 u=qupeng |  TASK [tidb : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:28:35,105 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:28:35,118 p=7864 u=qupeng |  TASK [tidb : combine final config] *****************************************************************************************************************************************
2018-03-06 18:28:35,190 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:28:35,205 p=7864 u=qupeng |  TASK [tidb : debug] ********************************************************************************************************************************************************
2018-03-06 18:28:35,273 p=7864 u=qupeng |  ok: [tidb] => {
    "tidb_conf": {
        "global": {
            "enable-chunk": true, 
            "host": "0.0.0.0", 
            "lease": "10s", 
            "run-ddl": true, 
            "split-table": true, 
            "store": "tikv"
        }, 
        "log": {
            "disable-timestamp": false, 
            "file": {
                "log-rotate": true
            }, 
            "format": "text", 
            "level": "info", 
            "query-log-max-len": 2048, 
            "slow-threshold": 300
        }, 
        "opentracing": {
            "enable": false, 
            "reporter": {
                "buffer-flush-interval": 0, 
                "local-agent-host-port": "", 
                "log-spans": false, 
                "queue-size": 0
            }, 
            "rpc-metrics": false, 
            "sampler": {
                "max-operations": 0, 
                "param": 1.0, 
                "sampling-refresh-interval": 0, 
                "sampling-server-url": "", 
                "type": "const"
            }
        }, 
        "performance": {
            "cross-join": true, 
            "join-concurrency": 5, 
            "max-procs": 0, 
            "retry-limit": 10, 
            "run-auto-analyze": true, 
            "stats-lease": "3s", 
            "tcp-keep-alive": true
        }, 
        "plan_cache": {
            "capacity": 2560, 
            "enabled": false, 
            "shards": 256
        }, 
        "prepared_plan_cache": {
            "capacity": 100, 
            "enabled": false
        }, 
        "proxy_protocol": {
            "header-timeout": 5, 
            "networks": ""
        }, 
        "security": {
            "cluster-ssl-ca": "", 
            "cluster-ssl-cert": "", 
            "cluster-ssl-key": "", 
            "ssl-ca": "", 
            "ssl-cert": "", 
            "ssl-key": ""
        }, 
        "status": {
            "metrics-addr": "172.16.21.1:60011", 
            "metrics-interval": 15, 
            "report-status": true
        }, 
        "tikv_client": {
            "grpc-connection-count": 16
        }, 
        "xprotocol": {
            "xhost": "0.0.0.0", 
            "xport": 14000, 
            "xserver": false, 
            "xsocket": ""
        }
    }
}
2018-03-06 18:28:35,289 p=7864 u=qupeng |  TASK [tidb : create config file] *******************************************************************************************************************************************
2018-03-06 18:28:36,724 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:28:36,739 p=7864 u=qupeng |  TASK [tidb : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:28:36,773 p=7864 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-03-06 18:28:36,825 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/binary_deployment.yml for tidb
2018-03-06 18:28:36,839 p=7864 u=qupeng |  TASK [tidb : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:28:38,596 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:28:38,609 p=7864 u=qupeng |  TASK [tidb : backup binary file] *******************************************************************************************************************************************
2018-03-06 18:28:38,653 p=7864 u=qupeng |  TASK [tidb : create run script] ********************************************************************************************************************************************
2018-03-06 18:28:40,095 p=7864 u=qupeng |  ok: [tidb] => (item=run)
2018-03-06 18:28:40,104 p=7864 u=qupeng |  TASK [tidb : backup script file] *******************************************************************************************************************************************
2018-03-06 18:28:40,140 p=7864 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-03-06 18:28:40,182 p=7864 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/supervise_deployment.yml for tidb
2018-03-06 18:28:40,191 p=7864 u=qupeng |  TASK [tidb : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:28:41,080 p=7864 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:28:41,852 p=7864 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/status/tidb)
2018-03-06 18:28:41,866 p=7864 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:28:43,264 p=7864 u=qupeng |  ok: [tidb] => (item=supervise)
2018-03-06 18:28:44,704 p=7864 u=qupeng |  ok: [tidb] => (item=svc)
2018-03-06 18:28:46,102 p=7864 u=qupeng |  ok: [tidb] => (item=svstat)
2018-03-06 18:28:46,120 p=7864 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:28:47,684 p=7864 u=qupeng |  ok: [tidb] => (item=start)
2018-03-06 18:28:49,076 p=7864 u=qupeng |  ok: [tidb] => (item=stop)
2018-03-06 18:28:49,088 p=7864 u=qupeng |  TASK [tidb : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:28:49,150 p=7864 u=qupeng |  ok: [tidb]
2018-03-06 18:28:49,160 p=7864 u=qupeng |  PLAY [finalizing deployment target] ****************************************************************************************************************************************
2018-03-06 18:28:49,183 p=7864 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-03-06 18:28:49,343 p=7864 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-03-06 18:28:49,491 p=7864 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-03-06 18:28:49,661 p=7864 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-03-06 18:28:49,802 p=7864 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-03-06 18:28:49,943 p=7864 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-03-06 18:28:50,099 p=7864 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-03-06 18:28:50,306 p=7864 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-03-06 18:28:50,464 p=7864 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:28:50,465 p=7864 u=qupeng |  172.16.21.1                : ok=29   changed=0    unreachable=0    failed=0   
2018-03-06 18:28:50,465 p=7864 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:28:50,465 p=7864 u=qupeng |  monitoring                 : ok=40   changed=2    unreachable=0    failed=0   
2018-03-06 18:28:50,465 p=7864 u=qupeng |  pd                         : ok=52   changed=1    unreachable=0    failed=0   
2018-03-06 18:28:50,465 p=7864 u=qupeng |  tidb                       : ok=30   changed=0    unreachable=0    failed=0   
2018-03-06 18:28:50,465 p=7864 u=qupeng |  tikv1                      : ok=31   changed=0    unreachable=0    failed=0   
2018-03-06 18:28:50,465 p=7864 u=qupeng |  tikv2                      : ok=32   changed=2    unreachable=0    failed=0   
2018-03-06 18:28:50,466 p=7864 u=qupeng |  tikv3                      : ok=32   changed=2    unreachable=0    failed=0   
2018-03-06 18:28:50,466 p=7864 u=qupeng |  tikv4                      : ok=32   changed=2    unreachable=0    failed=0   
2018-03-06 18:28:50,466 p=7864 u=qupeng |  tikv5                      : ok=32   changed=2    unreachable=0    failed=0   
2018-03-06 18:28:50,466 p=7864 u=qupeng |  Congrats! All goes well. :-)
2018-03-06 18:29:08,122 p=26180 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:29:08,137 p=26180 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:29:08,165 p=26180 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:29:08,190 p=26180 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:29:08,208 p=26180 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:29:08,233 p=26180 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:29:08,257 p=26180 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:29:08,323 p=26180 u=qupeng |  ok: [localhost]
2018-03-06 18:29:08,329 p=26180 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:29:08,351 p=26180 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:29:08,510 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:08,529 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:08,546 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:08,560 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:08,561 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:08,651 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:08,657 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:08,670 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:08,679 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:08,686 p=26180 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:29:13,849 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:13,888 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:13,928 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:14,959 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:15,004 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:18,538 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:18,606 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:18,636 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:19,641 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:19,659 p=26180 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:29:20,572 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:20,589 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:20,604 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:20,620 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:20,621 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:21,285 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:21,299 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:21,306 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:21,321 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:21,335 p=26180 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:29:21,466 p=26180 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:29:21,562 p=26180 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:29:21,659 p=26180 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:29:21,701 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:21,715 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:21,726 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:21,738 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:21,749 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:21,750 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:21,752 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:21,764 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:21,775 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:21,782 p=26180 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:29:21,883 p=26180 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:29:21,987 p=26180 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:29:22,121 p=26180 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:29:22,868 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:22,891 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:22,909 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:22,926 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:22,928 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:23,543 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:23,585 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:23,604 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:23,677 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:23,688 p=26180 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:29:24,385 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:24,450 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:24,464 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:24,500 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:24,502 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:25,108 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:25,155 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:25,222 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:25,223 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:25,238 p=26180 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:29:25,362 p=26180 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:29:25,475 p=26180 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:29:26,463 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:26,487 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:26,505 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:26,522 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:26,524 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:27,199 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:27,277 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:27,293 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:27,364 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:27,379 p=26180 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:29:27,502 p=26180 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:29:27,545 p=26180 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:29:27,558 p=26180 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:29:27,570 p=26180 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:29:27,583 p=26180 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:29:27,595 p=26180 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:29:27,596 p=26180 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:29:27,599 p=26180 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:29:27,610 p=26180 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:29:27,628 p=26180 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:29:27,635 p=26180 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:29:28,456 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:28,479 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:28,498 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:28,515 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:28,531 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:29,267 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:29,295 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:29,362 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:29,372 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:29,385 p=26180 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:29:30,238 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:30,277 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:30,313 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:30,357 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:30,364 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:31,027 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:31,033 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:31,152 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:31,160 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:31,174 p=26180 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:29:31,221 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:31,236 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:31,263 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:31,275 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:31,287 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:31,288 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:31,295 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:31,300 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:31,317 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:31,326 p=26180 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:29:31,380 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:31,404 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:31,416 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:31,428 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:31,436 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:31,446 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:31,459 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:31,470 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:31,471 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:31,486 p=26180 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:29:31,552 p=26180 u=qupeng |  ok: [pd]
2018-03-06 18:29:31,566 p=26180 u=qupeng |  ok: [monitoring]
2018-03-06 18:29:31,593 p=26180 u=qupeng |  ok: [tidb]
2018-03-06 18:29:31,605 p=26180 u=qupeng |  ok: [tikv1]
2018-03-06 18:29:31,606 p=26180 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:29:31,607 p=26180 u=qupeng |  ok: [tikv2]
2018-03-06 18:29:31,621 p=26180 u=qupeng |  ok: [tikv3]
2018-03-06 18:29:31,635 p=26180 u=qupeng |  ok: [tikv4]
2018-03-06 18:29:31,643 p=26180 u=qupeng |  ok: [tikv5]
2018-03-06 18:29:31,649 p=26180 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:29:31,656 p=26180 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:29:31,661 p=26180 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:29:31,666 p=26180 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-03-06 18:29:31,672 p=26180 u=qupeng |  PLAY [tikv_servers] ********************************************************************************************************************************************************
2018-03-06 18:29:31,680 p=26180 u=qupeng |  TASK [start TiKV by supervise] *********************************************************************************************************************************************
2018-03-06 18:29:32,407 p=26180 u=qupeng |  changed: [tikv1] => (item=tikv)
2018-03-06 18:29:32,411 p=26180 u=qupeng |  changed: [tikv3] => (item=tikv)
2018-03-06 18:29:32,430 p=26180 u=qupeng |  changed: [tikv4] => (item=tikv)
2018-03-06 18:29:32,448 p=26180 u=qupeng |  changed: [tikv2] => (item=tikv)
2018-03-06 18:29:32,466 p=26180 u=qupeng |  changed: [tikv5] => (item=tikv)
2018-03-06 18:29:32,474 p=26180 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:29:32,532 p=26180 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:29:32,588 p=26180 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:30:04,480 p=26180 u=qupeng |   [ERROR]: User interrupted execution

2018-03-06 18:30:13,608 p=31515 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:30:13,627 p=31515 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:30:13,649 p=31515 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:30:13,671 p=31515 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:30:13,693 p=31515 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:30:13,719 p=31515 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:30:13,742 p=31515 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:30:13,810 p=31515 u=qupeng |  ok: [localhost]
2018-03-06 18:30:13,815 p=31515 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:30:13,833 p=31515 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:30:13,997 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:14,012 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:14,025 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:14,038 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:14,039 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:14,123 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:14,144 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:14,149 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:14,162 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:14,171 p=31515 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:30:19,277 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:19,328 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:19,389 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:19,440 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:19,479 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:24,037 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:24,101 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:25,048 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:25,122 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:25,140 p=31515 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:30:26,051 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:26,069 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:26,086 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:26,104 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:26,105 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:26,762 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:26,766 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:26,776 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:26,813 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:26,821 p=31515 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:30:26,923 p=31515 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:30:27,023 p=31515 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:30:27,125 p=31515 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:30:27,171 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:27,181 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:27,194 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:27,205 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:27,216 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:27,217 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:27,229 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:27,232 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:27,244 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:27,251 p=31515 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:30:27,357 p=31515 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:30:27,462 p=31515 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:30:27,578 p=31515 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:30:28,340 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:28,360 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:28,377 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:28,394 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:28,396 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:29,005 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:29,027 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:29,038 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:29,059 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:29,068 p=31515 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:30:29,803 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:29,816 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:29,838 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:29,851 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:29,863 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:30,487 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:30,506 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:30,508 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:30,547 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:30,558 p=31515 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:30:30,679 p=31515 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:30:30,779 p=31515 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:30:31,740 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:31,762 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:31,775 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:31,816 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:32,513 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:32,517 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:32,537 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:32,597 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:32,750 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:32,764 p=31515 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:30:32,894 p=31515 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:30:32,936 p=31515 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:30:32,946 p=31515 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:30:32,972 p=31515 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:30:32,983 p=31515 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:30:32,984 p=31515 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:30:32,985 p=31515 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:30:33,007 p=31515 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:30:33,011 p=31515 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:30:33,019 p=31515 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:30:33,026 p=31515 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:30:33,821 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:33,846 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:33,860 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:33,878 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:33,880 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:34,630 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:34,635 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:34,639 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:34,682 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:34,690 p=31515 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:30:35,525 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:35,545 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:35,562 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:35,575 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:35,578 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:36,322 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:36,354 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:36,375 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:36,395 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:36,403 p=31515 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:30:36,439 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:36,451 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:36,464 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:36,476 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:36,486 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:36,497 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:36,499 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:36,508 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:36,519 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:36,526 p=31515 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:30:36,576 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:36,587 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:36,601 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:36,612 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:36,613 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:36,617 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:36,629 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:36,640 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:36,653 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:36,662 p=31515 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:30:36,714 p=31515 u=qupeng |  ok: [pd]
2018-03-06 18:30:36,726 p=31515 u=qupeng |  ok: [monitoring]
2018-03-06 18:30:36,740 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:36,753 p=31515 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:30:36,753 p=31515 u=qupeng |  ok: [tikv1]
2018-03-06 18:30:36,757 p=31515 u=qupeng |  ok: [tikv2]
2018-03-06 18:30:36,768 p=31515 u=qupeng |  ok: [tikv3]
2018-03-06 18:30:36,779 p=31515 u=qupeng |  ok: [tikv4]
2018-03-06 18:30:36,792 p=31515 u=qupeng |  ok: [tikv5]
2018-03-06 18:30:36,798 p=31515 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:30:36,804 p=31515 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:30:36,810 p=31515 u=qupeng |  PLAY [tidb_servers] ********************************************************************************************************************************************************
2018-03-06 18:30:36,817 p=31515 u=qupeng |  TASK [stop TiDB by supervise] **********************************************************************************************************************************************
2018-03-06 18:30:37,799 p=31515 u=qupeng |  changed: [tidb] => (item=tidb)
2018-03-06 18:30:37,809 p=31515 u=qupeng |  TASK [stop TiDB by systemd] ************************************************************************************************************************************************
2018-03-06 18:30:37,842 p=31515 u=qupeng |  TASK [stop TiDB by systemd] ************************************************************************************************************************************************
2018-03-06 18:30:37,874 p=31515 u=qupeng |  TASK [wait TiDB down] ******************************************************************************************************************************************************
2018-03-06 18:30:38,695 p=31515 u=qupeng |  ok: [tidb]
2018-03-06 18:30:38,712 p=31515 u=qupeng |  TASK [stop pump by supervise] **********************************************************************************************************************************************
2018-03-06 18:30:38,740 p=31515 u=qupeng |  TASK [stop pump by systemd] ************************************************************************************************************************************************
2018-03-06 18:30:38,762 p=31515 u=qupeng |  TASK [stop pump by systemd] ************************************************************************************************************************************************
2018-03-06 18:30:38,781 p=31515 u=qupeng |  TASK [wait pump down] ******************************************************************************************************************************************************
2018-03-06 18:30:38,805 p=31515 u=qupeng |  PLAY [tikv_servers] ********************************************************************************************************************************************************
2018-03-06 18:30:38,813 p=31515 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-03-06 18:30:38,818 p=31515 u=qupeng |  PLAY [grafana_servers] *****************************************************************************************************************************************************
2018-03-06 18:30:38,821 p=31515 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:30:38,822 p=31515 u=qupeng |  172.16.21.1                : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:30:38,822 p=31515 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:30:38,822 p=31515 u=qupeng |  monitoring                 : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:30:38,822 p=31515 u=qupeng |  pd                         : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:30:38,822 p=31515 u=qupeng |  tidb                       : ok=15   changed=1    unreachable=0    failed=0   
2018-03-06 18:30:38,822 p=31515 u=qupeng |  tikv1                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:30:38,822 p=31515 u=qupeng |  tikv2                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:30:38,822 p=31515 u=qupeng |  tikv3                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:30:38,823 p=31515 u=qupeng |  tikv4                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:30:38,823 p=31515 u=qupeng |  tikv5                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:30:38,823 p=31515 u=qupeng |  Congrats! All goes well. :-)
2018-03-06 18:31:04,462 p=36450 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:31:04,477 p=36450 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:31:04,513 p=36450 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:31:04,542 p=36450 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:31:04,563 p=36450 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:31:04,583 p=36450 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:31:04,606 p=36450 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:31:04,667 p=36450 u=qupeng |  ok: [localhost]
2018-03-06 18:31:04,674 p=36450 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:31:04,697 p=36450 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:31:04,851 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:04,868 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:04,885 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:04,905 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:04,906 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:04,995 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:05,000 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:05,013 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:05,033 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:05,044 p=36450 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:31:10,144 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:10,318 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:10,367 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:10,411 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:10,447 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:14,915 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:15,132 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:15,182 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:15,374 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:15,397 p=36450 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:31:16,255 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:16,269 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:16,283 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:16,298 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:16,300 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:16,932 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:17,032 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:17,040 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:17,056 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:17,064 p=36450 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:31:17,175 p=36450 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:31:17,280 p=36450 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:31:17,385 p=36450 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:31:17,421 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:17,433 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:17,445 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:17,457 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:17,468 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:17,479 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:17,482 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:17,494 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:17,506 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:17,514 p=36450 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:31:17,633 p=36450 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:31:17,735 p=36450 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:31:17,834 p=36450 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:31:18,582 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:18,617 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:18,634 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:18,650 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:18,658 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:19,281 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:19,302 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:19,315 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:19,318 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:19,326 p=36450 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:31:20,070 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:20,098 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:20,116 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:20,131 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:20,132 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:20,705 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:20,815 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:20,818 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:20,863 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:20,877 p=36450 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:31:21,008 p=36450 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:31:21,119 p=36450 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:31:22,102 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:22,128 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:22,144 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:22,160 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:22,189 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:22,890 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:22,891 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:22,955 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:22,978 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:22,986 p=36450 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:31:23,095 p=36450 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:31:23,139 p=36450 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:31:23,151 p=36450 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:31:23,162 p=36450 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:31:23,176 p=36450 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:31:23,189 p=36450 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:31:23,190 p=36450 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:31:23,193 p=36450 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:31:23,204 p=36450 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:31:23,216 p=36450 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:31:23,224 p=36450 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:31:24,046 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:24,091 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:24,104 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:24,119 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:24,120 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:24,878 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:24,893 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:24,923 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:24,926 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:24,940 p=36450 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:31:25,780 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:25,802 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:25,818 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:25,850 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:25,852 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:26,611 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:26,634 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:26,637 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:26,645 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:26,654 p=36450 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:31:26,690 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:26,705 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:26,716 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:26,727 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:26,739 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:26,751 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:26,752 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:26,762 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:26,773 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:26,781 p=36450 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:31:26,845 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:26,859 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:26,871 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:26,884 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:26,885 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:26,887 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:26,899 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:26,910 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:26,922 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:26,930 p=36450 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:31:26,972 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:26,998 p=36450 u=qupeng |  ok: [tidb]
2018-03-06 18:31:27,010 p=36450 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:27,023 p=36450 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:27,024 p=36450 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:27,024 p=36450 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:27,034 p=36450 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:27,050 p=36450 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:27,063 p=36450 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:27,069 p=36450 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:31:27,075 p=36450 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:31:27,081 p=36450 u=qupeng |  PLAY [tidb_servers] ********************************************************************************************************************************************************
2018-03-06 18:31:27,086 p=36450 u=qupeng |  PLAY [tikv_servers] ********************************************************************************************************************************************************
2018-03-06 18:31:27,093 p=36450 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-03-06 18:31:27,100 p=36450 u=qupeng |  TASK [stop PD by supervise] ************************************************************************************************************************************************
2018-03-06 18:31:28,041 p=36450 u=qupeng |  changed: [pd] => (item=pd)
2018-03-06 18:31:28,051 p=36450 u=qupeng |  TASK [stop PD by systemd] **************************************************************************************************************************************************
2018-03-06 18:31:28,076 p=36450 u=qupeng |  TASK [stop PD by systemd] **************************************************************************************************************************************************
2018-03-06 18:31:28,098 p=36450 u=qupeng |  TASK [wait PD down] ********************************************************************************************************************************************************
2018-03-06 18:31:28,831 p=36450 u=qupeng |  ok: [pd]
2018-03-06 18:31:28,840 p=36450 u=qupeng |  PLAY [grafana_servers] *****************************************************************************************************************************************************
2018-03-06 18:31:28,845 p=36450 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:31:28,845 p=36450 u=qupeng |  172.16.21.1                : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:31:28,845 p=36450 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:31:28,845 p=36450 u=qupeng |  monitoring                 : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:31:28,845 p=36450 u=qupeng |  pd                         : ok=15   changed=1    unreachable=0    failed=0   
2018-03-06 18:31:28,846 p=36450 u=qupeng |  tidb                       : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:31:28,846 p=36450 u=qupeng |  tikv1                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:31:28,846 p=36450 u=qupeng |  tikv2                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:31:28,846 p=36450 u=qupeng |  tikv3                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:31:28,846 p=36450 u=qupeng |  tikv4                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:31:28,847 p=36450 u=qupeng |  tikv5                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:31:28,847 p=36450 u=qupeng |  Congrats! All goes well. :-)
2018-03-06 18:31:39,085 p=41012 u=qupeng |  ERROR! You must specify a playbook file to run
2018-03-06 18:31:48,108 p=41225 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:31:48,124 p=41225 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:31:48,148 p=41225 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:31:48,171 p=41225 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:31:48,189 p=41225 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:31:48,212 p=41225 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:31:48,235 p=41225 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:31:48,281 p=41225 u=qupeng |  ok: [localhost]
2018-03-06 18:31:48,289 p=41225 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:31:48,317 p=41225 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:31:48,461 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:31:48,477 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:48,495 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:31:48,509 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:48,510 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:48,580 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:48,596 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:48,607 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:48,619 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:48,627 p=41225 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:31:53,544 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:31:53,593 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:53,638 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:53,685 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:53,801 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:31:58,176 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:58,203 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:58,235 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:58,260 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:58,277 p=41225 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:31:59,148 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:31:59,172 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:31:59,191 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:31:59,208 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:31:59,210 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:31:59,849 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:31:59,851 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:31:59,874 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:31:59,905 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:31:59,912 p=41225 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:32:00,007 p=41225 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:32:00,098 p=41225 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:32:00,201 p=41225 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:32:00,243 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:32:00,254 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:00,264 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:32:00,275 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:00,285 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:00,286 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:00,292 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:00,301 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:00,312 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:00,318 p=41225 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:32:00,411 p=41225 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:32:00,503 p=41225 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:32:00,598 p=41225 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:32:01,315 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:32:01,327 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:01,352 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:32:01,365 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:01,367 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:01,999 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:02,001 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:02,016 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:02,025 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:02,033 p=41225 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:32:02,759 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:02,780 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:32:02,799 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:02,815 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:32:02,819 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:03,452 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:03,456 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:03,509 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:03,527 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:03,539 p=41225 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:32:03,651 p=41225 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:32:03,750 p=41225 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:32:04,714 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:32:04,736 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:04,757 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:32:04,770 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:04,771 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:05,598 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:05,600 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:05,602 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:05,612 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:05,620 p=41225 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:32:05,715 p=41225 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:32:05,752 p=41225 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:05,765 p=41225 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:05,786 p=41225 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:05,797 p=41225 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:05,798 p=41225 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:05,799 p=41225 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:05,802 p=41225 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:05,823 p=41225 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:05,824 p=41225 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:05,830 p=41225 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:32:06,613 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:32:06,652 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:06,671 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:06,706 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:06,745 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:32:07,424 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:07,448 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:07,452 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:07,457 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:07,467 p=41225 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:32:08,321 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:08,337 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:08,353 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:32:08,366 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:08,372 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:32:09,179 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:09,215 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:09,219 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:09,221 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:09,229 p=41225 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:32:09,265 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:32:09,278 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:09,292 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:32:09,305 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:09,318 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:09,330 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:09,332 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:09,345 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:09,357 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:09,365 p=41225 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:32:09,415 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:32:09,427 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:09,439 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:32:09,450 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:09,456 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:09,467 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:09,470 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:09,480 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:09,494 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:09,501 p=41225 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:32:09,552 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:32:09,563 p=41225 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:09,581 p=41225 u=qupeng |  ok: [tidb]
2018-03-06 18:32:09,593 p=41225 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:09,594 p=41225 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:09,595 p=41225 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:09,619 p=41225 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:09,623 p=41225 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:09,631 p=41225 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:09,636 p=41225 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:32:09,642 p=41225 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:32:09,647 p=41225 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:32:09,652 p=41225 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-03-06 18:32:09,659 p=41225 u=qupeng |  TASK [start PD by supervise] ***********************************************************************************************************************************************
2018-03-06 18:32:10,478 p=41225 u=qupeng |  changed: [pd] => (item=pd)
2018-03-06 18:32:10,486 p=41225 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:32:10,510 p=41225 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:32:10,531 p=41225 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:32:14,518 p=41225 u=qupeng |  ok: [pd]
2018-03-06 18:32:14,526 p=41225 u=qupeng |  PLAY [tikv_servers] ********************************************************************************************************************************************************
2018-03-06 18:32:14,539 p=41225 u=qupeng |  PLAY [tidb_servers] ********************************************************************************************************************************************************
2018-03-06 18:32:14,550 p=41225 u=qupeng |  PLAY [grafana_servers] *****************************************************************************************************************************************************
2018-03-06 18:32:14,565 p=41225 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:32:14,589 p=41225 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:32:14,589 p=41225 u=qupeng |  172.16.21.1                : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:32:14,589 p=41225 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:32:14,590 p=41225 u=qupeng |  monitoring                 : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:32:14,590 p=41225 u=qupeng |  pd                         : ok=15   changed=1    unreachable=0    failed=0   
2018-03-06 18:32:14,590 p=41225 u=qupeng |  tidb                       : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:32:14,590 p=41225 u=qupeng |  tikv1                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:32:14,590 p=41225 u=qupeng |  tikv2                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:32:14,591 p=41225 u=qupeng |  tikv3                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:32:14,591 p=41225 u=qupeng |  tikv4                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:32:14,591 p=41225 u=qupeng |  tikv5                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:32:14,591 p=41225 u=qupeng |  Congrats! All goes well. :-)
2018-03-06 18:32:37,380 p=46136 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:32:37,395 p=46136 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:32:37,423 p=46136 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:32:37,447 p=46136 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:32:37,464 p=46136 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:32:37,484 p=46136 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:32:37,505 p=46136 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:32:37,572 p=46136 u=qupeng |  ok: [localhost]
2018-03-06 18:32:37,577 p=46136 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:32:37,592 p=46136 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:32:37,738 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:37,756 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:37,773 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:37,785 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:37,786 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:37,869 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:37,872 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:37,890 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:37,900 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:37,908 p=46136 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:32:42,870 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:42,941 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:43,016 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:43,128 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:43,217 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:47,480 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:47,706 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:47,732 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:47,880 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:47,908 p=46136 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:32:48,785 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:48,805 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:48,822 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:48,840 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:48,841 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:49,460 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:49,483 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:49,516 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:49,546 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:49,559 p=46136 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:32:49,677 p=46136 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:32:49,786 p=46136 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:32:49,884 p=46136 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:32:49,926 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:49,938 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:49,949 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:49,961 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:49,972 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:49,973 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:49,978 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:49,999 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:49,999 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:50,007 p=46136 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:32:50,105 p=46136 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:32:50,204 p=46136 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:32:50,315 p=46136 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:32:51,075 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:51,097 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:51,114 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:51,129 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:51,131 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:51,741 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:51,824 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:51,828 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:51,854 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:51,861 p=46136 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:32:52,532 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:52,581 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:52,608 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:52,626 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:52,628 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:53,217 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:53,232 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:53,318 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:53,352 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:53,361 p=46136 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:32:53,470 p=46136 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:32:53,576 p=46136 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:32:54,513 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:54,529 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:54,545 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:54,561 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:54,579 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:55,275 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:55,354 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:55,379 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:55,418 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:55,431 p=46136 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:32:55,565 p=46136 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:32:55,615 p=46136 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:55,629 p=46136 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:55,642 p=46136 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:55,655 p=46136 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:55,669 p=46136 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:55,670 p=46136 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:55,672 p=46136 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:55,682 p=46136 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:55,696 p=46136 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:32:55,703 p=46136 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:32:56,487 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:56,516 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:56,540 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:56,559 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:56,562 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:57,251 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:57,298 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:57,330 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:57,357 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:57,365 p=46136 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:32:58,232 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:58,253 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:58,274 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:58,291 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:58,293 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:59,030 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:59,080 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:59,103 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:59,114 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:59,128 p=46136 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:32:59,174 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:59,193 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:59,213 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:59,228 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:59,243 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:59,258 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:59,258 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:59,265 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:59,282 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:59,289 p=46136 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:32:59,341 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:59,361 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:59,380 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:59,398 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:59,400 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:59,400 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:59,403 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:59,418 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:59,446 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:59,454 p=46136 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:32:59,505 p=46136 u=qupeng |  ok: [pd]
2018-03-06 18:32:59,517 p=46136 u=qupeng |  ok: [monitoring]
2018-03-06 18:32:59,535 p=46136 u=qupeng |  ok: [tikv1]
2018-03-06 18:32:59,548 p=46136 u=qupeng |  ok: [tidb]
2018-03-06 18:32:59,549 p=46136 u=qupeng |  ok: [tikv2]
2018-03-06 18:32:59,549 p=46136 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:32:59,571 p=46136 u=qupeng |  ok: [tikv4]
2018-03-06 18:32:59,575 p=46136 u=qupeng |  ok: [tikv3]
2018-03-06 18:32:59,586 p=46136 u=qupeng |  ok: [tikv5]
2018-03-06 18:32:59,592 p=46136 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:32:59,598 p=46136 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:32:59,603 p=46136 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:32:59,607 p=46136 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-03-06 18:32:59,612 p=46136 u=qupeng |  PLAY [tikv_servers] ********************************************************************************************************************************************************
2018-03-06 18:32:59,620 p=46136 u=qupeng |  TASK [start TiKV by supervise] *********************************************************************************************************************************************
2018-03-06 18:33:00,389 p=46136 u=qupeng |  changed: [tikv5] => (item=tikv)
2018-03-06 18:33:00,390 p=46136 u=qupeng |  changed: [tikv3] => (item=tikv)
2018-03-06 18:33:00,397 p=46136 u=qupeng |  changed: [tikv2] => (item=tikv)
2018-03-06 18:33:00,406 p=46136 u=qupeng |  changed: [tikv4] => (item=tikv)
2018-03-06 18:33:00,427 p=46136 u=qupeng |  changed: [tikv1] => (item=tikv)
2018-03-06 18:33:00,436 p=46136 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:33:00,498 p=46136 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:33:00,555 p=46136 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:34:46,757 p=46136 u=qupeng |   [ERROR]: User interrupted execution

2018-03-06 18:36:09,294 p=53831 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:36:09,309 p=53831 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:36:09,334 p=53831 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:36:09,361 p=53831 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:36:09,381 p=53831 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:36:09,403 p=53831 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:36:09,427 p=53831 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:36:09,492 p=53831 u=qupeng |  ok: [localhost]
2018-03-06 18:36:09,500 p=53831 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:36:09,528 p=53831 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:36:09,695 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:09,716 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:09,734 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:09,751 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:09,752 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:09,828 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:09,845 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:09,848 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:09,879 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:09,892 p=53831 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:36:14,851 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:14,997 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:15,152 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:16,086 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:16,118 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:19,276 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:19,843 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:20,752 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:20,875 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:20,904 p=53831 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:36:21,796 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:21,813 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:21,828 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:21,842 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:21,843 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:22,450 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:22,536 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:22,542 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:22,572 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:22,584 p=53831 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:36:22,696 p=53831 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:36:22,786 p=53831 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:36:22,878 p=53831 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:36:22,916 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:22,927 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:22,938 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:22,950 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:22,961 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:22,962 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:22,967 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:22,982 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:22,990 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:22,997 p=53831 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:36:23,093 p=53831 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:36:23,187 p=53831 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:36:23,281 p=53831 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:36:23,960 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:23,993 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:24,007 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:24,021 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:24,022 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:24,684 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:24,697 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:24,733 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:24,744 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:24,754 p=53831 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:36:25,503 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:25,521 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:25,537 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:25,553 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:25,555 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:26,193 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:26,206 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:26,258 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:26,333 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:26,362 p=53831 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:36:26,495 p=53831 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:36:26,588 p=53831 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:36:27,575 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:27,593 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:27,609 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:27,621 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:27,622 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:28,477 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:28,487 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:28,489 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:28,491 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:28,502 p=53831 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:36:28,607 p=53831 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:36:28,656 p=53831 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:36:28,668 p=53831 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:36:28,679 p=53831 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:36:28,690 p=53831 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:36:28,691 p=53831 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:36:28,693 p=53831 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:36:28,695 p=53831 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:36:28,716 p=53831 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:36:28,716 p=53831 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:36:28,723 p=53831 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:36:29,544 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:29,559 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:29,573 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:29,585 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:29,587 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:30,288 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:30,356 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:30,405 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:30,413 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:30,426 p=53831 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:36:31,274 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:31,354 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:31,376 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:31,393 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:31,395 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:32,223 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:32,315 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:32,320 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:32,323 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:32,331 p=53831 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:36:32,382 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:32,393 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:32,404 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:32,417 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:32,418 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:32,419 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:32,425 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:32,436 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:32,447 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:32,454 p=53831 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:36:32,508 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:32,519 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:32,549 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:32,562 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:32,562 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:32,563 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:32,563 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:32,599 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:32,601 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:32,608 p=53831 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:36:32,660 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:32,672 p=53831 u=qupeng |  ok: [tidb]
2018-03-06 18:36:32,684 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:32,704 p=53831 u=qupeng |  ok: [tikv2]
2018-03-06 18:36:32,706 p=53831 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:36:32,707 p=53831 u=qupeng |  ok: [tikv1]
2018-03-06 18:36:32,709 p=53831 u=qupeng |  ok: [tikv3]
2018-03-06 18:36:32,728 p=53831 u=qupeng |  ok: [tikv4]
2018-03-06 18:36:32,743 p=53831 u=qupeng |  ok: [tikv5]
2018-03-06 18:36:32,749 p=53831 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:36:32,757 p=53831 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-03-06 18:36:33,633 p=53831 u=qupeng |  changed: [pd] => (item=node_exporter)
2018-03-06 18:36:33,642 p=53831 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:36:33,670 p=53831 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:36:33,696 p=53831 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:36:35,550 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:35,558 p=53831 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:36:35,573 p=53831 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-03-06 18:36:36,490 p=53831 u=qupeng |  changed: [pd] => (item=blackbox_exporter)
2018-03-06 18:36:36,504 p=53831 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:36:36,537 p=53831 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:36:36,568 p=53831 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:36:37,285 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:37,294 p=53831 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:36:37,307 p=53831 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-03-06 18:36:38,269 p=53831 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-03-06 18:36:39,169 p=53831 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-03-06 18:36:39,189 p=53831 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:36:39,238 p=53831 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:36:39,281 p=53831 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-03-06 18:36:39,981 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:39,994 p=53831 u=qupeng |  TASK [wait prometheus up] **************************************************************************************************************************************************
2018-03-06 18:36:40,637 p=53831 u=qupeng |  ok: [monitoring]
2018-03-06 18:36:40,643 p=53831 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-03-06 18:36:40,655 p=53831 u=qupeng |  TASK [start PD by supervise] ***********************************************************************************************************************************************
2018-03-06 18:36:41,473 p=53831 u=qupeng |  changed: [pd] => (item=pd)
2018-03-06 18:36:41,485 p=53831 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:36:41,512 p=53831 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:36:41,539 p=53831 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:36:43,218 p=53831 u=qupeng |  ok: [pd]
2018-03-06 18:36:43,227 p=53831 u=qupeng |  PLAY [tikv_servers] ********************************************************************************************************************************************************
2018-03-06 18:36:43,242 p=53831 u=qupeng |  TASK [start TiKV by supervise] *********************************************************************************************************************************************
2018-03-06 18:36:43,956 p=53831 u=qupeng |  changed: [tikv1] => (item=tikv)
2018-03-06 18:36:44,021 p=53831 u=qupeng |  changed: [tikv3] => (item=tikv)
2018-03-06 18:36:44,046 p=53831 u=qupeng |  changed: [tikv2] => (item=tikv)
2018-03-06 18:36:44,050 p=53831 u=qupeng |  changed: [tikv5] => (item=tikv)
2018-03-06 18:36:44,061 p=53831 u=qupeng |  changed: [tikv4] => (item=tikv)
2018-03-06 18:36:44,068 p=53831 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:36:44,129 p=53831 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:36:44,186 p=53831 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:37:46,082 p=53831 u=qupeng |   [ERROR]: User interrupted execution

2018-03-06 18:38:27,883 p=60699 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:38:27,898 p=60699 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:38:27,926 p=60699 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:38:27,950 p=60699 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:38:27,968 p=60699 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:38:27,989 p=60699 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:38:28,010 p=60699 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:38:28,073 p=60699 u=qupeng |  ok: [localhost]
2018-03-06 18:38:28,080 p=60699 u=qupeng |  PLAY [initializing deployment target] **************************************************************************************************************************************
2018-03-06 18:38:28,103 p=60699 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:38:28,265 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:38:28,282 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:38:28,298 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:38:28,311 p=60699 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:38:28,312 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:38:28,391 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:38:28,406 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:38:28,410 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:38:28,428 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:38:28,439 p=60699 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:38:33,267 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:38:33,329 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:38:33,377 p=60699 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:38:33,430 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:38:33,462 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:38:37,742 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:38:37,921 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:38:37,961 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:38:38,203 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:38:38,219 p=60699 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:38:39,073 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:38:39,087 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:38:39,100 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:38:39,115 p=60699 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:38:39,134 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:38:39,781 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:38:39,820 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:38:39,850 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:38:39,891 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:38:39,906 p=60699 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:38:40,034 p=60699 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:38:40,136 p=60699 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:38:40,238 p=60699 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:38:40,270 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:38:40,306 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:38:40,318 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:38:40,331 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:38:40,332 p=60699 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:38:40,335 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:38:40,338 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:38:40,349 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:38:40,360 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:38:40,366 p=60699 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:38:40,467 p=60699 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:38:40,567 p=60699 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:38:40,666 p=60699 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:38:41,470 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:38:41,491 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:38:41,510 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:38:41,528 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:38:41,529 p=60699 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:38:42,162 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:38:42,202 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:38:42,273 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:38:42,286 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:38:42,296 p=60699 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:38:42,985 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:38:43,034 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:38:43,051 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:38:43,069 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:38:43,070 p=60699 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:38:43,662 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:38:43,782 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:38:43,786 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:38:43,796 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:38:43,804 p=60699 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:38:43,909 p=60699 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:38:44,018 p=60699 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:38:44,769 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:38:44,792 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:38:44,808 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:38:44,821 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:38:44,824 p=60699 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:38:45,338 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:38:45,364 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:38:45,394 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:38:45,395 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:38:45,410 p=60699 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:38:45,537 p=60699 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:38:45,577 p=60699 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:38:45,603 p=60699 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:38:45,614 p=60699 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:38:45,626 p=60699 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:38:45,627 p=60699 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:38:45,635 p=60699 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:38:45,638 p=60699 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:38:45,642 p=60699 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:38:45,663 p=60699 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:38:45,670 p=60699 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:38:46,280 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:38:46,307 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:38:46,320 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:38:46,331 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:38:46,332 p=60699 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:38:46,943 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:38:46,960 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:38:46,966 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:38:46,974 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:38:46,981 p=60699 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:38:47,088 p=60699 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:38:47,131 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:38:47,143 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:38:47,156 p=60699 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:38:47,167 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:38:47,178 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:38:47,180 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:38:47,180 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:38:47,191 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:38:47,203 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:38:47,210 p=60699 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:38:47,351 p=60699 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:38:47,457 p=60699 u=qupeng |  PLAY [deploying monitoring agent] ******************************************************************************************************************************************
2018-03-06 18:38:47,466 p=60699 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:38:48,229 p=60699 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-03-06 18:38:48,893 p=60699 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:38:49,635 p=60699 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-03-06 18:38:49,643 p=60699 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:38:49,677 p=60699 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:38:50,356 p=60699 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-03-06 18:38:50,371 p=60699 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:38:50,404 p=60699 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-03-06 18:38:50,438 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/binary_deployment.yml for pd
2018-03-06 18:38:50,449 p=60699 u=qupeng |  TASK [node_exporter : create deploy directories] ***************************************************************************************************************************
2018-03-06 18:38:51,154 p=60699 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:38:51,169 p=60699 u=qupeng |  TASK [node_exporter : deploy node_exporter binary] *************************************************************************************************************************
2018-03-06 18:38:53,559 p=60699 u=qupeng |  changed: [pd]
2018-03-06 18:38:53,574 p=60699 u=qupeng |  TASK [node_exporter : create run script] ***********************************************************************************************************************************
2018-03-06 18:38:54,931 p=60699 u=qupeng |  changed: [pd] => (item=run)
2018-03-06 18:38:54,946 p=60699 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-03-06 18:38:54,994 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/supervise_deployment.yml for pd
2018-03-06 18:38:55,008 p=60699 u=qupeng |  TASK [node_exporter : deploy supervise] ************************************************************************************************************************************
2018-03-06 18:38:55,580 p=60699 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:38:56,309 p=60699 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/node_exporter)
2018-03-06 18:38:56,325 p=60699 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:38:57,683 p=60699 u=qupeng |  changed: [pd] => (item=supervise)
2018-03-06 18:38:59,087 p=60699 u=qupeng |  changed: [pd] => (item=svc)
2018-03-06 18:39:00,437 p=60699 u=qupeng |  changed: [pd] => (item=svstat)
2018-03-06 18:39:00,453 p=60699 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:39:01,830 p=60699 u=qupeng |  changed: [pd] => (item=start)
2018-03-06 18:39:03,229 p=60699 u=qupeng |  changed: [pd] => (item=stop)
2018-03-06 18:39:03,244 p=60699 u=qupeng |  TASK [node_exporter : prepare firewalld white list] ************************************************************************************************************************
2018-03-06 18:39:03,302 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:39:03,317 p=60699 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-03-06 18:39:03,374 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/binary_deployment.yml for pd
2018-03-06 18:39:03,387 p=60699 u=qupeng |  TASK [blackbox_exporter : create deploy directories] ***********************************************************************************************************************
2018-03-06 18:39:04,140 p=60699 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:39:04,153 p=60699 u=qupeng |  TASK [blackbox_exporter : deploy blackbox_exporter binary] *****************************************************************************************************************
2018-03-06 18:39:06,457 p=60699 u=qupeng |  changed: [pd]
2018-03-06 18:39:06,471 p=60699 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-03-06 18:39:06,515 p=60699 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-03-06 18:39:07,443 p=60699 u=qupeng |  changed: [pd]
2018-03-06 18:39:07,455 p=60699 u=qupeng |  TASK [blackbox_exporter : create run script] *******************************************************************************************************************************
2018-03-06 18:39:08,879 p=60699 u=qupeng |  changed: [pd] => (item=run)
2018-03-06 18:39:08,898 p=60699 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-03-06 18:39:09,012 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/supervise_deployment.yml for pd
2018-03-06 18:39:09,023 p=60699 u=qupeng |  TASK [blackbox_exporter : deploy supervise] ********************************************************************************************************************************
2018-03-06 18:39:09,523 p=60699 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:39:10,279 p=60699 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/blackbox_exporter)
2018-03-06 18:39:10,293 p=60699 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:39:11,709 p=60699 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 18:39:13,184 p=60699 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 18:39:14,531 p=60699 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 18:39:14,545 p=60699 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:39:15,901 p=60699 u=qupeng |  changed: [pd] => (item=start)
2018-03-06 18:39:17,333 p=60699 u=qupeng |  changed: [pd] => (item=stop)
2018-03-06 18:39:17,342 p=60699 u=qupeng |  TASK [blackbox_exporter : create config file] ******************************************************************************************************************************
2018-03-06 18:39:18,662 p=60699 u=qupeng |  changed: [pd]
2018-03-06 18:39:18,676 p=60699 u=qupeng |  TASK [blackbox_exporter : backup conf file] ********************************************************************************************************************************
2018-03-06 18:39:18,718 p=60699 u=qupeng |  TASK [blackbox_exporter : prepare firewalld white list] ********************************************************************************************************************
2018-03-06 18:39:18,767 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:39:18,776 p=60699 u=qupeng |  PLAY [deploying monitoring server] *****************************************************************************************************************************************
2018-03-06 18:39:18,792 p=60699 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:39:19,503 p=60699 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-03-06 18:39:20,203 p=60699 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-03-06 18:39:20,895 p=60699 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-03-06 18:39:20,907 p=60699 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:39:20,954 p=60699 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:39:21,657 p=60699 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-03-06 18:39:21,671 p=60699 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:39:21,719 p=60699 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-03-06 18:39:21,764 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/binary_deployment.yml for monitoring
2018-03-06 18:39:21,777 p=60699 u=qupeng |  TASK [pushgateway : create deploy directories] *****************************************************************************************************************************
2018-03-06 18:39:22,528 p=60699 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:39:22,542 p=60699 u=qupeng |  TASK [pushgateway : deploy pushgateway binary] *****************************************************************************************************************************
2018-03-06 18:39:24,086 p=60699 u=qupeng |  changed: [monitoring]
2018-03-06 18:39:24,098 p=60699 u=qupeng |  TASK [pushgateway : create run script] *************************************************************************************************************************************
2018-03-06 18:39:25,511 p=60699 u=qupeng |  changed: [monitoring] => (item=run)
2018-03-06 18:39:25,526 p=60699 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-03-06 18:39:25,569 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/supervise_deployment.yml for monitoring
2018-03-06 18:39:25,584 p=60699 u=qupeng |  TASK [pushgateway : deploy supervise] **************************************************************************************************************************************
2018-03-06 18:39:26,100 p=60699 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:39:26,836 p=60699 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/pushgateway)
2018-03-06 18:39:26,851 p=60699 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:39:28,272 p=60699 u=qupeng |  changed: [monitoring] => (item=supervise)
2018-03-06 18:39:29,652 p=60699 u=qupeng |  changed: [monitoring] => (item=svc)
2018-03-06 18:39:31,017 p=60699 u=qupeng |  changed: [monitoring] => (item=svstat)
2018-03-06 18:39:31,033 p=60699 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:39:32,465 p=60699 u=qupeng |  changed: [monitoring] => (item=start)
2018-03-06 18:39:33,863 p=60699 u=qupeng |  changed: [monitoring] => (item=stop)
2018-03-06 18:39:33,878 p=60699 u=qupeng |  TASK [pushgateway : prepare firewalld white list] **************************************************************************************************************************
2018-03-06 18:39:33,938 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:39:33,952 p=60699 u=qupeng |  TASK [prometheus : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:39:34,685 p=60699 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:39:35,386 p=60699 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-03-06 18:39:36,037 p=60699 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-03-06 18:39:36,052 p=60699 u=qupeng |  TASK [prometheus : get config file stat] ***********************************************************************************************************************************
2018-03-06 18:39:36,743 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:39:36,756 p=60699 u=qupeng |  TASK [prometheus : get alert conf stat] ************************************************************************************************************************************
2018-03-06 18:39:37,465 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:39:37,478 p=60699 u=qupeng |  TASK [prometheus : create configuration file if not exist] *****************************************************************************************************************
2018-03-06 18:39:39,154 p=60699 u=qupeng |  changed: [monitoring]
2018-03-06 18:39:39,169 p=60699 u=qupeng |  TASK [prometheus : copy alert rules file] **********************************************************************************************************************************
2018-03-06 18:39:40,570 p=60699 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-03-06 18:39:41,945 p=60699 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-03-06 18:39:43,379 p=60699 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-03-06 18:39:44,712 p=60699 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-03-06 18:39:46,084 p=60699 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-03-06 18:39:47,472 p=60699 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-03-06 18:39:48,812 p=60699 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-03-06 18:39:48,827 p=60699 u=qupeng |  TASK [prometheus : set alert rules label changes] **************************************************************************************************************************
2018-03-06 18:39:49,632 p=60699 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-03-06 18:39:50,331 p=60699 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-03-06 18:39:51,021 p=60699 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-03-06 18:39:51,712 p=60699 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-03-06 18:39:52,424 p=60699 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-03-06 18:39:53,110 p=60699 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-03-06 18:39:53,748 p=60699 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-03-06 18:39:53,764 p=60699 u=qupeng |  TASK [prometheus : create deploy data directory] ***************************************************************************************************************************
2018-03-06 18:39:54,455 p=60699 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-03-06 18:39:54,465 p=60699 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-03-06 18:39:54,505 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/binary_deployment.yml for monitoring
2018-03-06 18:39:54,513 p=60699 u=qupeng |  TASK [prometheus : create deploy log directory] ****************************************************************************************************************************
2018-03-06 18:39:55,205 p=60699 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:39:55,219 p=60699 u=qupeng |  TASK [prometheus : deploy prometheus binary] *******************************************************************************************************************************
2018-03-06 18:39:57,240 p=60699 u=qupeng |  changed: [monitoring]
2018-03-06 18:39:57,253 p=60699 u=qupeng |  TASK [prometheus : create run script] **************************************************************************************************************************************
2018-03-06 18:39:58,618 p=60699 u=qupeng |  changed: [monitoring] => (item=run)
2018-03-06 18:39:58,632 p=60699 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-03-06 18:39:58,676 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/supervise_deployment.yml for monitoring
2018-03-06 18:39:58,689 p=60699 u=qupeng |  TASK [prometheus : deploy supervise] ***************************************************************************************************************************************
2018-03-06 18:39:59,242 p=60699 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:39:59,997 p=60699 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-03-06 18:40:00,007 p=60699 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:40:01,439 p=60699 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-03-06 18:40:02,812 p=60699 u=qupeng |  ok: [monitoring] => (item=svc)
2018-03-06 18:40:04,206 p=60699 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-03-06 18:40:04,222 p=60699 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:40:05,654 p=60699 u=qupeng |  changed: [monitoring] => (item=start)
2018-03-06 18:40:07,036 p=60699 u=qupeng |  changed: [monitoring] => (item=stop)
2018-03-06 18:40:07,049 p=60699 u=qupeng |  TASK [prometheus : prepare firewalld white list] ***************************************************************************************************************************
2018-03-06 18:40:07,109 p=60699 u=qupeng |  ok: [monitoring]
2018-03-06 18:40:07,118 p=60699 u=qupeng |  PLAY [deploying grafana] ***************************************************************************************************************************************************
2018-03-06 18:40:07,134 p=60699 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:40:07,872 p=60699 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-03-06 18:40:08,578 p=60699 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-03-06 18:40:09,298 p=60699 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-03-06 18:40:09,313 p=60699 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:40:09,363 p=60699 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:40:10,111 p=60699 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-03-06 18:40:10,118 p=60699 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:40:10,167 p=60699 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:40:10,207 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/tasks.yml for 172.16.21.1
2018-03-06 18:40:10,214 p=60699 u=qupeng |  TASK [grafana : create common deploy directories] **************************************************************************************************************************
2018-03-06 18:40:10,959 p=60699 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:40:11,667 p=60699 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/data.grafana)
2018-03-06 18:40:11,683 p=60699 u=qupeng |  TASK [grafana : push data source file] *************************************************************************************************************************************
2018-03-06 18:40:13,118 p=60699 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:40:13,128 p=60699 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:40:13,166 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/binary_deployment.yml for 172.16.21.1
2018-03-06 18:40:13,174 p=60699 u=qupeng |  TASK [grafana : create binary deploy directories (1/2)] ********************************************************************************************************************
2018-03-06 18:40:13,986 p=60699 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt)
2018-03-06 18:40:14,001 p=60699 u=qupeng |  TASK [grafana : deploy grafana binary] *************************************************************************************************************************************
2018-03-06 18:40:20,939 p=60699 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:40:20,949 p=60699 u=qupeng |  TASK [grafana : rename grafana deploy dir] *********************************************************************************************************************************
2018-03-06 18:40:21,803 p=60699 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:40:21,816 p=60699 u=qupeng |  TASK [grafana : create binary deploy directories (2/2)] ********************************************************************************************************************
2018-03-06 18:40:22,486 p=60699 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/dashboards)
2018-03-06 18:40:23,185 p=60699 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/plugins)
2018-03-06 18:40:23,200 p=60699 u=qupeng |  TASK [grafana : create grafana configuration file] *************************************************************************************************************************
2018-03-06 18:40:24,554 p=60699 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:40:24,567 p=60699 u=qupeng |  TASK [grafana : create run script] *****************************************************************************************************************************************
2018-03-06 18:40:25,968 p=60699 u=qupeng |  changed: [172.16.21.1] => (item=run)
2018-03-06 18:40:25,980 p=60699 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:40:26,026 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/supervise_deployment.yml for 172.16.21.1
2018-03-06 18:40:26,041 p=60699 u=qupeng |  TASK [grafana : deploy supervise] ******************************************************************************************************************************************
2018-03-06 18:40:26,586 p=60699 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:40:27,336 p=60699 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/grafana)
2018-03-06 18:40:27,351 p=60699 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:40:28,767 p=60699 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-03-06 18:40:30,141 p=60699 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-03-06 18:40:31,486 p=60699 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-03-06 18:40:31,500 p=60699 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:40:32,904 p=60699 u=qupeng |  changed: [172.16.21.1] => (item=start)
2018-03-06 18:40:34,274 p=60699 u=qupeng |  changed: [172.16.21.1] => (item=stop)
2018-03-06 18:40:34,289 p=60699 u=qupeng |  TASK [grafana : prepare firewalld white list] ******************************************************************************************************************************
2018-03-06 18:40:34,348 p=60699 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:40:34,357 p=60699 u=qupeng |  PLAY [deploying PD cluster] ************************************************************************************************************************************************
2018-03-06 18:40:34,375 p=60699 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:40:35,115 p=60699 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-03-06 18:40:35,814 p=60699 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:40:36,505 p=60699 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-03-06 18:40:36,519 p=60699 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:40:36,567 p=60699 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:40:37,295 p=60699 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-03-06 18:40:37,310 p=60699 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:40:37,349 p=60699 u=qupeng |  TASK [pd : create deploy directories] **************************************************************************************************************************************
2018-03-06 18:40:38,080 p=60699 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:40:38,792 p=60699 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:40:39,509 p=60699 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/data.pd)
2018-03-06 18:40:39,525 p=60699 u=qupeng |  TASK [pd : load customized config] *****************************************************************************************************************************************
2018-03-06 18:40:39,576 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:40:39,589 p=60699 u=qupeng |  TASK [pd : load default config] ********************************************************************************************************************************************
2018-03-06 18:40:39,636 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:40:39,650 p=60699 u=qupeng |  TASK [pd : generate metrics config] ****************************************************************************************************************************************
2018-03-06 18:40:39,711 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:40:39,724 p=60699 u=qupeng |  TASK [pd : generate final config] ******************************************************************************************************************************************
2018-03-06 18:40:39,760 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:40:39,773 p=60699 u=qupeng |  TASK [pd : debug] **********************************************************************************************************************************************************
2018-03-06 18:40:39,811 p=60699 u=qupeng |  ok: [pd] => {
    "pd_conf": {
        "global": {
            "lease": 3, 
            "tso-save-interval": "3s"
        }, 
        "log": {
            "file": {}, 
            "level": "info"
        }, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s"
        }, 
        "replication": {
            "location-labels": [], 
            "max-replicas": 3
        }, 
        "schedule": {
            "leader-schedule-limit": 64, 
            "max-pending-peer-count": 16, 
            "max-snapshot-count": 3, 
            "max-store-down-time": "1h", 
            "region-schedule-limit": 16, 
            "replica-schedule-limit": 24, 
            "tolerant-size-ratio": 2.5
        }, 
        "security": {
            "cacert-path": "", 
            "cert-path": "", 
            "key-path": ""
        }
    }
}
2018-03-06 18:40:39,823 p=60699 u=qupeng |  TASK [pd : create configuration file] **************************************************************************************************************************************
2018-03-06 18:40:41,228 p=60699 u=qupeng |  changed: [pd]
2018-03-06 18:40:41,243 p=60699 u=qupeng |  TASK [pd : backup conf file] ***********************************************************************************************************************************************
2018-03-06 18:40:41,283 p=60699 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:40:41,333 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-03-06 18:40:41,347 p=60699 u=qupeng |  TASK [pd : deploy binary] **************************************************************************************************************************************************
2018-03-06 18:40:43,113 p=60699 u=qupeng |  changed: [pd]
2018-03-06 18:40:43,128 p=60699 u=qupeng |  TASK [pd : backup bianry file] *********************************************************************************************************************************************
2018-03-06 18:40:43,163 p=60699 u=qupeng |  TASK [pd : create startup script] ******************************************************************************************************************************************
2018-03-06 18:40:44,619 p=60699 u=qupeng |  changed: [pd] => (item=run)
2018-03-06 18:40:44,632 p=60699 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:40:44,681 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-03-06 18:40:44,694 p=60699 u=qupeng |  TASK [pd : deploy supervise] ***********************************************************************************************************************************************
2018-03-06 18:40:45,313 p=60699 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:40:46,060 p=60699 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/pd)
2018-03-06 18:40:46,074 p=60699 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:40:47,526 p=60699 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 18:40:48,948 p=60699 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 18:40:50,361 p=60699 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 18:40:50,375 p=60699 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:40:51,794 p=60699 u=qupeng |  changed: [pd] => (item=start)
2018-03-06 18:40:53,182 p=60699 u=qupeng |  changed: [pd] => (item=stop)
2018-03-06 18:40:53,198 p=60699 u=qupeng |  TASK [pd : prepare firewalld white list] ***********************************************************************************************************************************
2018-03-06 18:40:53,248 p=60699 u=qupeng |  ok: [pd]
2018-03-06 18:40:53,258 p=60699 u=qupeng |  PLAY [deploying TiKV cluster] **********************************************************************************************************************************************
2018-03-06 18:40:53,277 p=60699 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:40:53,900 p=60699 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/scripts)
2018-03-06 18:40:53,956 p=60699 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/scripts)
2018-03-06 18:40:53,971 p=60699 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/scripts)
2018-03-06 18:40:53,982 p=60699 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/scripts)
2018-03-06 18:40:54,025 p=60699 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/scripts)
2018-03-06 18:40:54,487 p=60699 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:40:54,529 p=60699 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-03-06 18:40:54,576 p=60699 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-03-06 18:40:54,593 p=60699 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-03-06 18:40:54,611 p=60699 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-03-06 18:40:55,098 p=60699 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/backup)
2018-03-06 18:40:55,140 p=60699 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/backup)
2018-03-06 18:40:55,212 p=60699 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/backup)
2018-03-06 18:40:55,229 p=60699 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/backup)
2018-03-06 18:40:55,233 p=60699 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/backup)
2018-03-06 18:40:55,247 p=60699 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:40:55,857 p=60699 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status)
2018-03-06 18:40:55,912 p=60699 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status)
2018-03-06 18:40:55,913 p=60699 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status)
2018-03-06 18:40:55,925 p=60699 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status)
2018-03-06 18:40:55,936 p=60699 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status)
2018-03-06 18:40:55,944 p=60699 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:40:56,539 p=60699 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/bin)
2018-03-06 18:40:56,615 p=60699 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/bin)
2018-03-06 18:40:56,619 p=60699 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/bin)
2018-03-06 18:40:56,650 p=60699 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/bin)
2018-03-06 18:40:56,657 p=60699 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/bin)
2018-03-06 18:40:56,664 p=60699 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:40:56,739 p=60699 u=qupeng |  TASK [tikv : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:40:57,331 p=60699 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/log)
2018-03-06 18:40:57,383 p=60699 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/log)
2018-03-06 18:40:57,386 p=60699 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/log)
2018-03-06 18:40:57,393 p=60699 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/log)
2018-03-06 18:40:57,401 p=60699 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/log)
2018-03-06 18:40:57,900 p=60699 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/data)
2018-03-06 18:40:57,980 p=60699 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/data)
2018-03-06 18:40:58,001 p=60699 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/data)
2018-03-06 18:40:58,011 p=60699 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/data)
2018-03-06 18:40:58,034 p=60699 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/data)
2018-03-06 18:40:58,542 p=60699 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:40:58,627 p=60699 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-03-06 18:40:58,633 p=60699 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-03-06 18:40:58,651 p=60699 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-03-06 18:40:58,661 p=60699 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-03-06 18:40:58,669 p=60699 u=qupeng |  TASK [tikv : load customized config] ***************************************************************************************************************************************
2018-03-06 18:40:58,720 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:40:58,723 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:40:58,748 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:40:58,750 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:40:58,759 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:40:58,766 p=60699 u=qupeng |  TASK [tikv : load default config] ******************************************************************************************************************************************
2018-03-06 18:40:58,819 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:40:58,821 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:40:58,841 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:40:58,852 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:40:58,854 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:40:58,867 p=60699 u=qupeng |  TASK [tikv : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:40:58,935 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:40:58,965 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:40:58,980 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:40:59,008 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:40:59,018 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:40:59,024 p=60699 u=qupeng |  TASK [tikv : generate final config] ****************************************************************************************************************************************
2018-03-06 18:40:59,074 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:40:59,089 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:40:59,092 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:40:59,113 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:40:59,126 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:40:59,133 p=60699 u=qupeng |  TASK [tikv : debug] ********************************************************************************************************************************************************
2018-03-06 18:40:59,190 p=60699 u=qupeng |  ok: [tikv1] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:40:59,196 p=60699 u=qupeng |  ok: [tikv2] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:40:59,208 p=60699 u=qupeng |  ok: [tikv4] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:40:59,210 p=60699 u=qupeng |  ok: [tikv3] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:40:59,234 p=60699 u=qupeng |  ok: [tikv5] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": 30, 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:40:59,242 p=60699 u=qupeng |  TASK [tikv : create config file] *******************************************************************************************************************************************
2018-03-06 18:41:00,437 p=60699 u=qupeng |  changed: [tikv2]
2018-03-06 18:41:00,489 p=60699 u=qupeng |  changed: [tikv4]
2018-03-06 18:41:00,497 p=60699 u=qupeng |  changed: [tikv5]
2018-03-06 18:41:00,498 p=60699 u=qupeng |  changed: [tikv3]
2018-03-06 18:41:00,528 p=60699 u=qupeng |  changed: [tikv1]
2018-03-06 18:41:00,535 p=60699 u=qupeng |  TASK [tikv : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:41:00,602 p=60699 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:41:00,695 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/binary_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-03-06 18:41:00,708 p=60699 u=qupeng |  TASK [tikv : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:41:04,392 p=60699 u=qupeng |  changed: [tikv2]
2018-03-06 18:41:04,434 p=60699 u=qupeng |  changed: [tikv3]
2018-03-06 18:41:04,460 p=60699 u=qupeng |  changed: [tikv1]
2018-03-06 18:41:04,463 p=60699 u=qupeng |  changed: [tikv5]
2018-03-06 18:41:04,547 p=60699 u=qupeng |  changed: [tikv4]
2018-03-06 18:41:04,562 p=60699 u=qupeng |  TASK [tikv : backup bianry file] *******************************************************************************************************************************************
2018-03-06 18:41:04,657 p=60699 u=qupeng |  TASK [tikv : create run script] ********************************************************************************************************************************************
2018-03-06 18:41:05,883 p=60699 u=qupeng |  changed: [tikv1] => (item=run)
2018-03-06 18:41:05,976 p=60699 u=qupeng |  changed: [tikv2] => (item=run)
2018-03-06 18:41:05,992 p=60699 u=qupeng |  changed: [tikv5] => (item=run)
2018-03-06 18:41:06,010 p=60699 u=qupeng |  changed: [tikv4] => (item=run)
2018-03-06 18:41:06,015 p=60699 u=qupeng |  changed: [tikv3] => (item=run)
2018-03-06 18:41:06,029 p=60699 u=qupeng |  TASK [tikv : backup script file] *******************************************************************************************************************************************
2018-03-06 18:41:06,118 p=60699 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:41:06,215 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/supervise_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-03-06 18:41:06,227 p=60699 u=qupeng |  TASK [tikv : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:41:08,650 p=60699 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:41:09,384 p=60699 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status/tikv)
2018-03-06 18:41:09,386 p=60699 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status/tikv)
2018-03-06 18:41:09,388 p=60699 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status/tikv)
2018-03-06 18:41:09,388 p=60699 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status/tikv)
2018-03-06 18:41:09,390 p=60699 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status/tikv)
2018-03-06 18:41:09,398 p=60699 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:41:10,588 p=60699 u=qupeng |  changed: [tikv1] => (item=supervise)
2018-03-06 18:41:10,663 p=60699 u=qupeng |  changed: [tikv3] => (item=supervise)
2018-03-06 18:41:10,670 p=60699 u=qupeng |  changed: [tikv4] => (item=supervise)
2018-03-06 18:41:10,675 p=60699 u=qupeng |  changed: [tikv2] => (item=supervise)
2018-03-06 18:41:10,678 p=60699 u=qupeng |  changed: [tikv5] => (item=supervise)
2018-03-06 18:41:11,917 p=60699 u=qupeng |  changed: [tikv1] => (item=svc)
2018-03-06 18:41:11,999 p=60699 u=qupeng |  changed: [tikv3] => (item=svc)
2018-03-06 18:41:12,007 p=60699 u=qupeng |  changed: [tikv2] => (item=svc)
2018-03-06 18:41:12,021 p=60699 u=qupeng |  changed: [tikv5] => (item=svc)
2018-03-06 18:41:12,027 p=60699 u=qupeng |  changed: [tikv4] => (item=svc)
2018-03-06 18:41:13,208 p=60699 u=qupeng |  changed: [tikv1] => (item=svstat)
2018-03-06 18:41:13,289 p=60699 u=qupeng |  changed: [tikv5] => (item=svstat)
2018-03-06 18:41:13,292 p=60699 u=qupeng |  changed: [tikv2] => (item=svstat)
2018-03-06 18:41:13,298 p=60699 u=qupeng |  changed: [tikv3] => (item=svstat)
2018-03-06 18:41:13,334 p=60699 u=qupeng |  changed: [tikv4] => (item=svstat)
2018-03-06 18:41:13,342 p=60699 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:41:14,626 p=60699 u=qupeng |  changed: [tikv1] => (item=start)
2018-03-06 18:41:14,701 p=60699 u=qupeng |  changed: [tikv2] => (item=start)
2018-03-06 18:41:14,725 p=60699 u=qupeng |  changed: [tikv5] => (item=start)
2018-03-06 18:41:14,727 p=60699 u=qupeng |  changed: [tikv3] => (item=start)
2018-03-06 18:41:14,745 p=60699 u=qupeng |  changed: [tikv4] => (item=start)
2018-03-06 18:41:15,934 p=60699 u=qupeng |  changed: [tikv1] => (item=stop)
2018-03-06 18:41:16,022 p=60699 u=qupeng |  changed: [tikv5] => (item=stop)
2018-03-06 18:41:16,031 p=60699 u=qupeng |  changed: [tikv3] => (item=stop)
2018-03-06 18:41:16,041 p=60699 u=qupeng |  changed: [tikv2] => (item=stop)
2018-03-06 18:41:16,065 p=60699 u=qupeng |  changed: [tikv4] => (item=stop)
2018-03-06 18:41:16,074 p=60699 u=qupeng |  TASK [tikv : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:41:16,126 p=60699 u=qupeng |  ok: [tikv1]
2018-03-06 18:41:16,141 p=60699 u=qupeng |  ok: [tikv2]
2018-03-06 18:41:16,159 p=60699 u=qupeng |  ok: [tikv4]
2018-03-06 18:41:16,161 p=60699 u=qupeng |  ok: [tikv3]
2018-03-06 18:41:16,173 p=60699 u=qupeng |  ok: [tikv5]
2018-03-06 18:41:16,180 p=60699 u=qupeng |  PLAY [deploying TiDB cluster] **********************************************************************************************************************************************
2018-03-06 18:41:16,191 p=60699 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:41:16,226 p=60699 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:41:16,253 p=60699 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:41:16,278 p=60699 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:41:16,308 p=60699 u=qupeng |  TASK [pump : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:41:16,342 p=60699 u=qupeng |  TASK [pump : include] ******************************************************************************************************************************************************
2018-03-06 18:41:16,364 p=60699 u=qupeng |  TASK [pump : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:41:16,384 p=60699 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:41:17,135 p=60699 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/scripts)
2018-03-06 18:41:17,819 p=60699 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-03-06 18:41:18,514 p=60699 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/backup)
2018-03-06 18:41:18,526 p=60699 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:41:18,579 p=60699 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:41:19,327 p=60699 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/bin)
2018-03-06 18:41:19,341 p=60699 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:41:19,394 p=60699 u=qupeng |  TASK [tidb : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:41:20,130 p=60699 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/log)
2018-03-06 18:41:20,862 p=60699 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-03-06 18:41:20,875 p=60699 u=qupeng |  TASK [tidb : load customized config] ***************************************************************************************************************************************
2018-03-06 18:41:20,936 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:41:20,950 p=60699 u=qupeng |  TASK [tidb : load default config] ******************************************************************************************************************************************
2018-03-06 18:41:21,013 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:41:21,030 p=60699 u=qupeng |  TASK [tidb : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:41:21,103 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:41:21,116 p=60699 u=qupeng |  TASK [tidb : combine final config] *****************************************************************************************************************************************
2018-03-06 18:41:21,159 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:41:21,171 p=60699 u=qupeng |  TASK [tidb : debug] ********************************************************************************************************************************************************
2018-03-06 18:41:21,215 p=60699 u=qupeng |  ok: [tidb] => {
    "tidb_conf": {
        "global": {
            "enable-chunk": true, 
            "host": "0.0.0.0", 
            "lease": "10s", 
            "run-ddl": true, 
            "split-table": true, 
            "store": "tikv"
        }, 
        "log": {
            "disable-timestamp": false, 
            "file": {
                "log-rotate": true
            }, 
            "format": "text", 
            "level": "info", 
            "query-log-max-len": 2048, 
            "slow-threshold": 300
        }, 
        "opentracing": {
            "enable": false, 
            "reporter": {
                "buffer-flush-interval": 0, 
                "local-agent-host-port": "", 
                "log-spans": false, 
                "queue-size": 0
            }, 
            "rpc-metrics": false, 
            "sampler": {
                "max-operations": 0, 
                "param": 1.0, 
                "sampling-refresh-interval": 0, 
                "sampling-server-url": "", 
                "type": "const"
            }
        }, 
        "performance": {
            "cross-join": true, 
            "join-concurrency": 5, 
            "max-procs": 0, 
            "retry-limit": 10, 
            "run-auto-analyze": true, 
            "stats-lease": "3s", 
            "tcp-keep-alive": true
        }, 
        "plan_cache": {
            "capacity": 2560, 
            "enabled": false, 
            "shards": 256
        }, 
        "prepared_plan_cache": {
            "capacity": 100, 
            "enabled": false
        }, 
        "proxy_protocol": {
            "header-timeout": 5, 
            "networks": ""
        }, 
        "security": {
            "cluster-ssl-ca": "", 
            "cluster-ssl-cert": "", 
            "cluster-ssl-key": "", 
            "ssl-ca": "", 
            "ssl-cert": "", 
            "ssl-key": ""
        }, 
        "status": {
            "metrics-addr": "172.16.21.1:60011", 
            "metrics-interval": 15, 
            "report-status": true
        }, 
        "tikv_client": {
            "grpc-connection-count": 16
        }, 
        "xprotocol": {
            "xhost": "0.0.0.0", 
            "xport": 14000, 
            "xserver": false, 
            "xsocket": ""
        }
    }
}
2018-03-06 18:41:21,228 p=60699 u=qupeng |  TASK [tidb : create config file] *******************************************************************************************************************************************
2018-03-06 18:41:22,669 p=60699 u=qupeng |  changed: [tidb]
2018-03-06 18:41:22,683 p=60699 u=qupeng |  TASK [tidb : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:41:22,726 p=60699 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-03-06 18:41:22,776 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/binary_deployment.yml for tidb
2018-03-06 18:41:22,790 p=60699 u=qupeng |  TASK [tidb : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:41:24,631 p=60699 u=qupeng |  changed: [tidb]
2018-03-06 18:41:24,642 p=60699 u=qupeng |  TASK [tidb : backup binary file] *******************************************************************************************************************************************
2018-03-06 18:41:24,681 p=60699 u=qupeng |  TASK [tidb : create run script] ********************************************************************************************************************************************
2018-03-06 18:41:26,272 p=60699 u=qupeng |  changed: [tidb] => (item=run)
2018-03-06 18:41:26,287 p=60699 u=qupeng |  TASK [tidb : backup script file] *******************************************************************************************************************************************
2018-03-06 18:41:26,330 p=60699 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-03-06 18:41:26,380 p=60699 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/supervise_deployment.yml for tidb
2018-03-06 18:41:26,394 p=60699 u=qupeng |  TASK [tidb : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:41:27,168 p=60699 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:41:27,915 p=60699 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/status/tidb)
2018-03-06 18:41:27,925 p=60699 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:41:29,369 p=60699 u=qupeng |  changed: [tidb] => (item=supervise)
2018-03-06 18:41:30,839 p=60699 u=qupeng |  changed: [tidb] => (item=svc)
2018-03-06 18:41:32,255 p=60699 u=qupeng |  changed: [tidb] => (item=svstat)
2018-03-06 18:41:32,269 p=60699 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:41:33,662 p=60699 u=qupeng |  changed: [tidb] => (item=start)
2018-03-06 18:41:35,135 p=60699 u=qupeng |  changed: [tidb] => (item=stop)
2018-03-06 18:41:35,149 p=60699 u=qupeng |  TASK [tidb : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:41:35,187 p=60699 u=qupeng |  ok: [tidb]
2018-03-06 18:41:35,193 p=60699 u=qupeng |  PLAY [finalizing deployment target] ****************************************************************************************************************************************
2018-03-06 18:41:35,204 p=60699 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-03-06 18:41:35,329 p=60699 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-03-06 18:41:35,456 p=60699 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-03-06 18:41:35,602 p=60699 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-03-06 18:41:35,731 p=60699 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-03-06 18:41:35,861 p=60699 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-03-06 18:41:35,989 p=60699 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-03-06 18:41:36,138 p=60699 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-03-06 18:41:36,266 p=60699 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:41:36,266 p=60699 u=qupeng |  172.16.21.1                : ok=27   changed=10   unreachable=0    failed=0   
2018-03-06 18:41:36,266 p=60699 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:41:36,266 p=60699 u=qupeng |  monitoring                 : ok=37   changed=15   unreachable=0    failed=0   
2018-03-06 18:41:36,266 p=60699 u=qupeng |  pd                         : ok=49   changed=20   unreachable=0    failed=0   
2018-03-06 18:41:36,266 p=60699 u=qupeng |  tidb                       : ok=27   changed=9    unreachable=0    failed=0   
2018-03-06 18:41:36,267 p=60699 u=qupeng |  tikv1                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:41:36,267 p=60699 u=qupeng |  tikv2                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:41:36,267 p=60699 u=qupeng |  tikv3                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:41:36,267 p=60699 u=qupeng |  tikv4                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:41:36,267 p=60699 u=qupeng |  tikv5                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:41:36,267 p=60699 u=qupeng |  Congrats! All goes well. :-)
2018-03-06 18:41:42,859 p=77304 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:41:42,874 p=77304 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:41:42,902 p=77304 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:41:42,924 p=77304 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:41:42,945 p=77304 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:41:42,965 p=77304 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:41:42,987 p=77304 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:41:43,030 p=77304 u=qupeng |  ok: [localhost]
2018-03-06 18:41:43,034 p=77304 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:41:43,050 p=77304 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:41:43,187 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:41:43,215 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:41:43,233 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:41:43,246 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:41:43,247 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:41:43,310 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:41:43,353 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:41:43,364 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:41:43,382 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:41:43,390 p=77304 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:41:48,241 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:41:48,301 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:41:48,389 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:41:49,525 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:41:49,617 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:41:52,715 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:41:52,845 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:41:52,916 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:41:55,314 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:41:55,344 p=77304 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:41:56,273 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:41:56,289 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:41:56,307 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:41:56,324 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:41:56,325 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:41:56,924 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:41:56,951 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:41:57,035 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:41:57,044 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:41:57,056 p=77304 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:41:57,175 p=77304 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:41:57,269 p=77304 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:41:57,370 p=77304 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:41:57,411 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:41:57,423 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:41:57,446 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:41:57,458 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:41:57,459 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:41:57,462 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:41:57,471 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:41:57,476 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:41:57,504 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:41:57,511 p=77304 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:41:57,613 p=77304 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:41:57,723 p=77304 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:41:57,830 p=77304 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:41:58,563 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:41:58,586 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:41:58,620 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:41:58,634 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:41:58,642 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:41:59,242 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:41:59,343 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:41:59,346 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:41:59,365 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:41:59,379 p=77304 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:42:00,054 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:42:00,095 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:42:00,113 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:42:00,125 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:42:00,132 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:42:00,725 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:42:00,822 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:42:00,847 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:42:00,866 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:42:00,873 p=77304 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:42:00,975 p=77304 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:42:01,073 p=77304 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:42:02,037 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:42:02,085 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:42:02,111 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:42:02,125 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:42:02,129 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:42:02,808 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:42:02,876 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:42:02,902 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:42:02,938 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:42:02,951 p=77304 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:42:03,071 p=77304 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:42:03,103 p=77304 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:42:03,115 p=77304 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:42:03,137 p=77304 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:42:03,149 p=77304 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:42:03,162 p=77304 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:42:03,163 p=77304 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:42:03,165 p=77304 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:42:03,181 p=77304 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:42:03,190 p=77304 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:42:03,197 p=77304 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:42:04,023 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:42:04,072 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:42:04,090 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:42:04,106 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:42:04,121 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:42:04,827 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:42:04,836 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:42:04,944 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:42:04,955 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:42:04,963 p=77304 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:42:05,822 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:42:05,843 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:42:05,858 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:42:05,872 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:42:05,873 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:42:06,564 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:42:06,652 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:42:06,693 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:42:06,723 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:42:06,731 p=77304 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:42:06,765 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:42:06,786 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:42:06,798 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:42:06,808 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:42:06,820 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:42:06,821 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:42:06,822 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:42:06,840 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:42:06,842 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:42:06,850 p=77304 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:42:06,899 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:42:06,914 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:42:06,926 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:42:06,937 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:42:06,939 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:42:06,946 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:42:06,952 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:42:06,965 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:42:06,977 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:42:06,987 p=77304 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:42:07,042 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:42:07,060 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:42:07,075 p=77304 u=qupeng |  ok: [tidb]
2018-03-06 18:42:07,088 p=77304 u=qupeng |  ok: [tikv2]
2018-03-06 18:42:07,088 p=77304 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:42:07,096 p=77304 u=qupeng |  ok: [tikv1]
2018-03-06 18:42:07,100 p=77304 u=qupeng |  ok: [tikv3]
2018-03-06 18:42:07,122 p=77304 u=qupeng |  ok: [tikv5]
2018-03-06 18:42:07,133 p=77304 u=qupeng |  ok: [tikv4]
2018-03-06 18:42:07,141 p=77304 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:42:07,149 p=77304 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-03-06 18:42:08,051 p=77304 u=qupeng |  changed: [pd] => (item=node_exporter)
2018-03-06 18:42:08,065 p=77304 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:42:08,101 p=77304 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:42:08,136 p=77304 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:42:09,978 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:42:09,986 p=77304 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:42:10,000 p=77304 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-03-06 18:42:10,924 p=77304 u=qupeng |  changed: [pd] => (item=blackbox_exporter)
2018-03-06 18:42:10,937 p=77304 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:42:10,971 p=77304 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:42:11,000 p=77304 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:42:11,720 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:42:11,725 p=77304 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:42:11,732 p=77304 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-03-06 18:42:12,664 p=77304 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-03-06 18:42:13,570 p=77304 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-03-06 18:42:13,579 p=77304 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:42:13,618 p=77304 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:42:13,651 p=77304 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-03-06 18:42:14,327 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:42:14,339 p=77304 u=qupeng |  TASK [wait prometheus up] **************************************************************************************************************************************************
2018-03-06 18:42:15,035 p=77304 u=qupeng |  ok: [monitoring]
2018-03-06 18:42:15,043 p=77304 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-03-06 18:42:15,057 p=77304 u=qupeng |  TASK [start PD by supervise] ***********************************************************************************************************************************************
2018-03-06 18:42:15,877 p=77304 u=qupeng |  changed: [pd] => (item=pd)
2018-03-06 18:42:15,891 p=77304 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:42:15,922 p=77304 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:42:15,950 p=77304 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:42:17,658 p=77304 u=qupeng |  ok: [pd]
2018-03-06 18:42:17,667 p=77304 u=qupeng |  PLAY [tikv_servers] ********************************************************************************************************************************************************
2018-03-06 18:42:17,682 p=77304 u=qupeng |  TASK [start TiKV by supervise] *********************************************************************************************************************************************
2018-03-06 18:42:18,469 p=77304 u=qupeng |  changed: [tikv4] => (item=tikv)
2018-03-06 18:42:18,472 p=77304 u=qupeng |  changed: [tikv2] => (item=tikv)
2018-03-06 18:42:18,481 p=77304 u=qupeng |  changed: [tikv1] => (item=tikv)
2018-03-06 18:42:18,483 p=77304 u=qupeng |  changed: [tikv5] => (item=tikv)
2018-03-06 18:42:18,490 p=77304 u=qupeng |  changed: [tikv3] => (item=tikv)
2018-03-06 18:42:18,498 p=77304 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:42:18,555 p=77304 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:42:18,611 p=77304 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:44:16,433 p=77304 u=qupeng |   [ERROR]: User interrupted execution

2018-03-06 18:44:46,294 p=85448 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:44:46,308 p=85448 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:44:46,332 p=85448 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:44:46,359 p=85448 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:44:46,376 p=85448 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:44:46,398 p=85448 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:44:46,423 p=85448 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:44:46,493 p=85448 u=qupeng |  ok: [localhost]
2018-03-06 18:44:46,499 p=85448 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:44:46,522 p=85448 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:44:46,671 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:44:46,691 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:44:46,708 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:44:46,724 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:44:46,725 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:44:46,794 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:44:46,828 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:44:46,829 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:44:46,849 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:44:46,862 p=85448 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:44:51,863 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:44:51,910 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:44:51,955 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:44:51,997 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:44:53,036 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:44:56,554 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:44:56,588 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:44:56,614 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:44:56,641 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:44:56,657 p=85448 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:44:57,539 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:44:57,559 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:44:57,574 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:44:57,590 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:44:57,591 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:44:58,200 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:44:58,242 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:44:58,282 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:44:58,313 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:44:58,321 p=85448 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:44:58,420 p=85448 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:44:58,516 p=85448 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:44:58,606 p=85448 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:44:58,645 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:44:58,654 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:44:58,674 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:44:58,686 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:44:58,687 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:44:58,687 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:44:58,693 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:44:58,709 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:44:58,713 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:44:58,728 p=85448 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:44:58,837 p=85448 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:44:58,931 p=85448 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:44:59,029 p=85448 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:44:59,767 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:44:59,799 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:44:59,815 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:44:59,827 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:44:59,828 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:45:00,447 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:45:00,493 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:45:00,499 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:45:00,520 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:45:00,528 p=85448 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:45:01,188 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:45:01,253 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:45:01,271 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:45:01,300 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:45:01,302 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:45:01,924 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:45:02,002 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:45:02,032 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:45:02,047 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:45:02,058 p=85448 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:45:02,159 p=85448 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:45:02,268 p=85448 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:45:03,249 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:45:03,270 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:45:03,286 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:45:03,300 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:45:03,302 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:45:04,076 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:45:04,085 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:45:04,088 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:45:04,096 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:45:04,104 p=85448 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:45:04,210 p=85448 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:45:04,251 p=85448 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:45:04,268 p=85448 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:45:04,283 p=85448 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:45:04,303 p=85448 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:45:04,319 p=85448 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:45:04,320 p=85448 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:45:04,321 p=85448 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:45:04,328 p=85448 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:45:04,353 p=85448 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:45:04,367 p=85448 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:45:05,153 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:45:05,225 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:45:05,241 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:45:05,254 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:45:05,255 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:45:05,970 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:45:06,022 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:45:06,036 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:45:06,056 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:45:06,065 p=85448 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:45:06,936 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:45:06,953 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:45:06,969 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:45:06,983 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:45:06,985 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:45:07,789 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:45:07,802 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:45:07,878 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:45:07,905 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:45:07,916 p=85448 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:45:07,951 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:45:07,964 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:45:07,983 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:45:07,995 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:45:08,004 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:45:08,015 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:45:08,018 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:45:08,027 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:45:08,038 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:45:08,045 p=85448 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:45:08,092 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:45:08,105 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:45:08,114 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:45:08,126 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:45:08,127 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:45:08,131 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:45:08,143 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:45:08,153 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:45:08,166 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:45:08,173 p=85448 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:45:08,220 p=85448 u=qupeng |  ok: [pd]
2018-03-06 18:45:08,234 p=85448 u=qupeng |  ok: [monitoring]
2018-03-06 18:45:08,246 p=85448 u=qupeng |  ok: [tidb]
2018-03-06 18:45:08,257 p=85448 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:45:08,258 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:45:08,272 p=85448 u=qupeng |  ok: [tikv3]
2018-03-06 18:45:08,277 p=85448 u=qupeng |  ok: [tikv2]
2018-03-06 18:45:08,283 p=85448 u=qupeng |  ok: [tikv4]
2018-03-06 18:45:08,298 p=85448 u=qupeng |  ok: [tikv5]
2018-03-06 18:45:08,304 p=85448 u=qupeng |  PLAY [rolling update PD cluster] *******************************************************************************************************************************************
2018-03-06 18:45:08,315 p=85448 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:45:08,348 p=85448 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-03-06 18:45:08,357 p=85448 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:45:08,382 p=85448 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-03-06 18:45:08,387 p=85448 u=qupeng |  PLAY [rolling update TiKV cluster] *****************************************************************************************************************************************
2018-03-06 18:45:08,398 p=85448 u=qupeng |  TASK [set_fact] ************************************************************************************************************************************************************
2018-03-06 18:45:08,474 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:45:08,481 p=85448 u=qupeng |  TASK [set_fact] ************************************************************************************************************************************************************
2018-03-06 18:45:08,512 p=85448 u=qupeng |  ok: [tikv1]
2018-03-06 18:45:08,517 p=85448 u=qupeng |  TASK [debug] ***************************************************************************************************************************************************************
2018-03-06 18:45:08,564 p=85448 u=qupeng |  ok: [tikv1] => {
    "pd_addr": "172.16.21.1:60001"
}
2018-03-06 18:45:08,570 p=85448 u=qupeng |  TASK [debug] ***************************************************************************************************************************************************************
2018-03-06 18:45:08,606 p=85448 u=qupeng |  ok: [tikv1] => {
    "tikv_addr": "172.16.21.1:60005"
}
2018-03-06 18:45:08,611 p=85448 u=qupeng |  TASK [get store info from PD] **********************************************************************************************************************************************
2018-03-06 18:45:09,472 p=85448 u=qupeng |  fatal: [tikv1]: FAILED! => {"changed": false, "connection": "close", "content": "\"TiKV cluster is not bootstrapped, please start TiKV first\"\n", "content_length": "60", "content_type": "application/json; charset=UTF-8", "date": "Tue, 06 Mar 2018 10:45:09 GMT", "json": "TiKV cluster is not bootstrapped, please start TiKV first", "msg": "Status code was not [200]: HTTP Error 500: Internal Server Error", "redirected": false, "status": 500, "url": "http://172.16.21.1:60001/pd/api/v1/stores"}
2018-03-06 18:45:09,474 fail [tikv1]: Ansible FAILED! => playbook: rolling_update.yml; TASK: get store info from PD; message: {"changed": false, "connection": "close", "content": "\"TiKV cluster is not bootstrapped, please start TiKV first\"\n", "content_length": "60", "content_type": "application/json; charset=UTF-8", "date": "Tue, 06 Mar 2018 10:45:09 GMT", "json": "TiKV cluster is not bootstrapped, please start TiKV first", "msg": "Status code was not [200]: HTTP Error 500: Internal Server Error", "redirected": false, "status": 500, "url": "http://172.16.21.1:60001/pd/api/v1/stores"}
2018-03-06 18:45:09,474 p=85448 u=qupeng |  NO MORE HOSTS LEFT *********************************************************************************************************************************************************
2018-03-06 18:45:09,475 p=85448 u=qupeng |  	to retry, use: --limit @/home/qupeng/ansible/tidb-ansible/retry_files/rolling_update.retry

2018-03-06 18:45:09,476 p=85448 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:45:09,476 p=85448 u=qupeng |  172.16.21.1                : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:45:09,476 p=85448 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:45:09,476 p=85448 u=qupeng |  monitoring                 : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:45:09,476 p=85448 u=qupeng |  pd                         : ok=15   changed=0    unreachable=0    failed=0   
2018-03-06 18:45:09,477 p=85448 u=qupeng |  tidb                       : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:45:09,477 p=85448 u=qupeng |  tikv1                      : ok=17   changed=0    unreachable=0    failed=1   
2018-03-06 18:45:09,477 p=85448 u=qupeng |  tikv2                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:45:09,477 p=85448 u=qupeng |  tikv3                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:45:09,477 p=85448 u=qupeng |  tikv4                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:45:09,477 p=85448 u=qupeng |  tikv5                      : ok=13   changed=0    unreachable=0    failed=0   
2018-03-06 18:45:09,478 p=85448 u=qupeng |  ERROR MESSAGE SUMMARY ******************************************************************************************************************************************************
2018-03-06 18:45:09,478 p=85448 u=qupeng |  [tikv1]: Ansible FAILED! => playbook: rolling_update.yml; TASK: get store info from PD; message: {"changed": false, "connection": "close", "content": "\"TiKV cluster is not bootstrapped, please start TiKV first\"\n", "content_length": "60", "content_type": "application/json; charset=UTF-8", "date": "Tue, 06 Mar 2018 10:45:09 GMT", "json": "TiKV cluster is not bootstrapped, please start TiKV first", "msg": "Status code was not [200]: HTTP Error 500: Internal Server Error", "redirected": false, "status": 500, "url": "http://172.16.21.1:60001/pd/api/v1/stores"}

2018-03-06 18:45:09,478 p=85448 u=qupeng |  Ask for help:
2018-03-06 18:45:09,479 p=85448 u=qupeng |  Contact us: sre@pingcap.com
2018-03-06 18:45:09,479 p=85448 u=qupeng |  It seems that you encounter some problems. You can send an email to the above email address, attached with the tidb-ansible/inventory.ini and tidb-ansible/log/ansible.log files and the error message, or new issue on https://github.com/pingcap/tidb-ansible/issues. We'll try our best to help you deploy a TiDB cluster. Thanks. :-)
2018-03-06 18:46:01,824 p=90857 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:46:01,839 p=90857 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:46:01,866 p=90857 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:46:01,890 p=90857 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:46:01,906 p=90857 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:46:01,924 p=90857 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:46:01,942 p=90857 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:46:02,000 p=90857 u=qupeng |  ok: [localhost]
2018-03-06 18:46:02,006 p=90857 u=qupeng |  PLAY [initializing deployment target] **************************************************************************************************************************************
2018-03-06 18:46:02,020 p=90857 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:46:02,178 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:02,206 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:02,226 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:02,244 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:02,246 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:02,320 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:02,323 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:02,336 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:02,358 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:02,368 p=90857 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:46:07,294 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:07,341 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:07,394 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:07,485 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:07,607 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:12,011 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:12,038 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:12,065 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:12,101 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:12,117 p=90857 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:46:12,996 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:13,010 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:13,025 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:13,039 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:13,040 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:13,694 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:13,711 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:13,714 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:13,729 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:13,737 p=90857 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:46:13,847 p=90857 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:46:13,943 p=90857 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:46:14,048 p=90857 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:46:14,090 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:14,102 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:14,112 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:14,123 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:14,134 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:14,134 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:14,138 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:14,152 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:14,163 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:14,170 p=90857 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:46:14,275 p=90857 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:46:14,371 p=90857 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:46:14,468 p=90857 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:46:15,210 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:15,227 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:15,245 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:15,262 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:15,263 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:15,875 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:15,887 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:15,985 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:16,024 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:16,035 p=90857 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:46:16,713 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:16,775 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:16,796 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:16,813 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:16,815 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:17,421 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:17,436 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:17,474 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:17,539 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:17,551 p=90857 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:46:17,672 p=90857 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:46:17,774 p=90857 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:46:18,710 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:18,746 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:18,765 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:18,783 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:18,784 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:19,519 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:19,546 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:19,558 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:19,581 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:19,592 p=90857 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:46:19,697 p=90857 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:46:19,738 p=90857 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:46:19,750 p=90857 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:46:19,760 p=90857 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:46:19,773 p=90857 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:46:19,784 p=90857 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:46:19,785 p=90857 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:46:19,788 p=90857 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:46:19,801 p=90857 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:46:19,812 p=90857 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:46:19,819 p=90857 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:46:20,661 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:20,680 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:20,694 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:20,707 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:20,708 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:21,406 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:21,509 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:21,526 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:21,529 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:21,537 p=90857 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:46:22,314 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:22,333 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:22,357 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:22,377 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:22,394 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:23,152 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:23,160 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:23,165 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:23,217 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:23,225 p=90857 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:46:23,258 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:23,268 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:23,290 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:23,301 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:23,313 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:23,314 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:23,321 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:23,330 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:23,335 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:23,342 p=90857 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:46:23,396 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:23,409 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:23,427 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:23,442 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:23,442 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:23,443 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:23,450 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:23,467 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:23,479 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:23,486 p=90857 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:46:23,529 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:23,543 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:23,578 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:46:23,592 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:46:23,593 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:46:23,593 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:46:23,619 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:46:23,620 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:46:23,634 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:46:23,641 p=90857 u=qupeng |  PLAY [deploying monitoring agent] ******************************************************************************************************************************************
2018-03-06 18:46:23,651 p=90857 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:46:24,449 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-03-06 18:46:25,123 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:46:25,802 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-03-06 18:46:25,810 p=90857 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:46:25,839 p=90857 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:46:26,483 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-03-06 18:46:26,492 p=90857 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:46:26,540 p=90857 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-03-06 18:46:26,578 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/binary_deployment.yml for pd
2018-03-06 18:46:26,590 p=90857 u=qupeng |  TASK [node_exporter : create deploy directories] ***************************************************************************************************************************
2018-03-06 18:46:27,238 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:46:27,254 p=90857 u=qupeng |  TASK [node_exporter : deploy node_exporter binary] *************************************************************************************************************************
2018-03-06 18:46:29,303 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:29,317 p=90857 u=qupeng |  TASK [node_exporter : create run script] ***********************************************************************************************************************************
2018-03-06 18:46:30,617 p=90857 u=qupeng |  ok: [pd] => (item=run)
2018-03-06 18:46:30,632 p=90857 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-03-06 18:46:30,671 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/supervise_deployment.yml for pd
2018-03-06 18:46:30,684 p=90857 u=qupeng |  TASK [node_exporter : deploy supervise] ************************************************************************************************************************************
2018-03-06 18:46:31,220 p=90857 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:46:31,883 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/node_exporter)
2018-03-06 18:46:31,899 p=90857 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:46:33,265 p=90857 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 18:46:34,569 p=90857 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 18:46:35,857 p=90857 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 18:46:35,873 p=90857 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:46:37,140 p=90857 u=qupeng |  ok: [pd] => (item=start)
2018-03-06 18:46:38,368 p=90857 u=qupeng |  ok: [pd] => (item=stop)
2018-03-06 18:46:38,385 p=90857 u=qupeng |  TASK [node_exporter : prepare firewalld white list] ************************************************************************************************************************
2018-03-06 18:46:38,444 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:38,454 p=90857 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-03-06 18:46:38,498 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/binary_deployment.yml for pd
2018-03-06 18:46:38,506 p=90857 u=qupeng |  TASK [blackbox_exporter : create deploy directories] ***********************************************************************************************************************
2018-03-06 18:46:39,182 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:46:39,196 p=90857 u=qupeng |  TASK [blackbox_exporter : deploy blackbox_exporter binary] *****************************************************************************************************************
2018-03-06 18:46:41,257 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:41,270 p=90857 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-03-06 18:46:41,315 p=90857 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-03-06 18:46:42,175 p=90857 u=qupeng |  changed: [pd]
2018-03-06 18:46:42,182 p=90857 u=qupeng |  TASK [blackbox_exporter : create run script] *******************************************************************************************************************************
2018-03-06 18:46:43,527 p=90857 u=qupeng |  ok: [pd] => (item=run)
2018-03-06 18:46:43,542 p=90857 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-03-06 18:46:43,593 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/supervise_deployment.yml for pd
2018-03-06 18:46:43,605 p=90857 u=qupeng |  TASK [blackbox_exporter : deploy supervise] ********************************************************************************************************************************
2018-03-06 18:46:44,124 p=90857 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:46:44,837 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/blackbox_exporter)
2018-03-06 18:46:44,848 p=90857 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:46:46,185 p=90857 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 18:46:47,567 p=90857 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 18:46:48,840 p=90857 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 18:46:48,851 p=90857 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:46:50,161 p=90857 u=qupeng |  ok: [pd] => (item=start)
2018-03-06 18:46:51,492 p=90857 u=qupeng |  ok: [pd] => (item=stop)
2018-03-06 18:46:51,508 p=90857 u=qupeng |  TASK [blackbox_exporter : create config file] ******************************************************************************************************************************
2018-03-06 18:46:52,934 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:52,942 p=90857 u=qupeng |  TASK [blackbox_exporter : backup conf file] ********************************************************************************************************************************
2018-03-06 18:46:52,976 p=90857 u=qupeng |  TASK [blackbox_exporter : prepare firewalld white list] ********************************************************************************************************************
2018-03-06 18:46:53,024 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:46:53,031 p=90857 u=qupeng |  PLAY [deploying monitoring server] *****************************************************************************************************************************************
2018-03-06 18:46:53,045 p=90857 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:46:53,752 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-03-06 18:46:54,421 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-03-06 18:46:55,133 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-03-06 18:46:55,148 p=90857 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:46:55,192 p=90857 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:46:55,911 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-03-06 18:46:55,925 p=90857 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:46:55,957 p=90857 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-03-06 18:46:55,994 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/binary_deployment.yml for monitoring
2018-03-06 18:46:56,005 p=90857 u=qupeng |  TASK [pushgateway : create deploy directories] *****************************************************************************************************************************
2018-03-06 18:46:56,682 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:46:56,696 p=90857 u=qupeng |  TASK [pushgateway : deploy pushgateway binary] *****************************************************************************************************************************
2018-03-06 18:46:58,030 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:46:58,042 p=90857 u=qupeng |  TASK [pushgateway : create run script] *************************************************************************************************************************************
2018-03-06 18:46:59,352 p=90857 u=qupeng |  ok: [monitoring] => (item=run)
2018-03-06 18:46:59,366 p=90857 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-03-06 18:46:59,404 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/supervise_deployment.yml for monitoring
2018-03-06 18:46:59,416 p=90857 u=qupeng |  TASK [pushgateway : deploy supervise] **************************************************************************************************************************************
2018-03-06 18:46:59,979 p=90857 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:47:00,702 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/pushgateway)
2018-03-06 18:47:00,716 p=90857 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:47:02,113 p=90857 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-03-06 18:47:03,434 p=90857 u=qupeng |  ok: [monitoring] => (item=svc)
2018-03-06 18:47:04,815 p=90857 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-03-06 18:47:04,832 p=90857 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:47:06,163 p=90857 u=qupeng |  ok: [monitoring] => (item=start)
2018-03-06 18:47:07,425 p=90857 u=qupeng |  ok: [monitoring] => (item=stop)
2018-03-06 18:47:07,440 p=90857 u=qupeng |  TASK [pushgateway : prepare firewalld white list] **************************************************************************************************************************
2018-03-06 18:47:07,495 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:47:07,510 p=90857 u=qupeng |  TASK [prometheus : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:47:08,154 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:47:08,788 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-03-06 18:47:09,421 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-03-06 18:47:09,437 p=90857 u=qupeng |  TASK [prometheus : get config file stat] ***********************************************************************************************************************************
2018-03-06 18:47:10,402 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:47:10,410 p=90857 u=qupeng |  TASK [prometheus : get alert conf stat] ************************************************************************************************************************************
2018-03-06 18:47:11,098 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:47:11,105 p=90857 u=qupeng |  TASK [prometheus : create configuration file if not exist] *****************************************************************************************************************
2018-03-06 18:47:12,752 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:47:12,765 p=90857 u=qupeng |  TASK [prometheus : copy alert rules file] **********************************************************************************************************************************
2018-03-06 18:47:14,595 p=90857 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-03-06 18:47:16,091 p=90857 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-03-06 18:47:17,632 p=90857 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-03-06 18:47:19,193 p=90857 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-03-06 18:47:20,669 p=90857 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-03-06 18:47:22,140 p=90857 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-03-06 18:47:23,612 p=90857 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-03-06 18:47:23,629 p=90857 u=qupeng |  TASK [prometheus : set alert rules label changes] **************************************************************************************************************************
2018-03-06 18:47:24,368 p=90857 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-03-06 18:47:25,005 p=90857 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-03-06 18:47:25,694 p=90857 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-03-06 18:47:26,367 p=90857 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-03-06 18:47:27,048 p=90857 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-03-06 18:47:27,781 p=90857 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-03-06 18:47:28,481 p=90857 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-03-06 18:47:28,497 p=90857 u=qupeng |  TASK [prometheus : create deploy data directory] ***************************************************************************************************************************
2018-03-06 18:47:29,185 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-03-06 18:47:29,199 p=90857 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-03-06 18:47:29,238 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/binary_deployment.yml for monitoring
2018-03-06 18:47:29,249 p=90857 u=qupeng |  TASK [prometheus : create deploy log directory] ****************************************************************************************************************************
2018-03-06 18:47:29,920 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:47:29,934 p=90857 u=qupeng |  TASK [prometheus : deploy prometheus binary] *******************************************************************************************************************************
2018-03-06 18:47:31,487 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:47:31,501 p=90857 u=qupeng |  TASK [prometheus : create run script] **************************************************************************************************************************************
2018-03-06 18:47:32,886 p=90857 u=qupeng |  ok: [monitoring] => (item=run)
2018-03-06 18:47:32,902 p=90857 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-03-06 18:47:32,948 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/supervise_deployment.yml for monitoring
2018-03-06 18:47:32,962 p=90857 u=qupeng |  TASK [prometheus : deploy supervise] ***************************************************************************************************************************************
2018-03-06 18:47:33,536 p=90857 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:47:34,265 p=90857 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-03-06 18:47:34,280 p=90857 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:47:35,627 p=90857 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-03-06 18:47:36,938 p=90857 u=qupeng |  ok: [monitoring] => (item=svc)
2018-03-06 18:47:38,304 p=90857 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-03-06 18:47:38,329 p=90857 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:47:39,631 p=90857 u=qupeng |  ok: [monitoring] => (item=start)
2018-03-06 18:47:41,005 p=90857 u=qupeng |  ok: [monitoring] => (item=stop)
2018-03-06 18:47:41,021 p=90857 u=qupeng |  TASK [prometheus : prepare firewalld white list] ***************************************************************************************************************************
2018-03-06 18:47:41,058 p=90857 u=qupeng |  ok: [monitoring]
2018-03-06 18:47:41,067 p=90857 u=qupeng |  PLAY [deploying grafana] ***************************************************************************************************************************************************
2018-03-06 18:47:41,082 p=90857 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:47:41,761 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-03-06 18:47:42,424 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-03-06 18:47:43,183 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-03-06 18:47:43,197 p=90857 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:47:43,244 p=90857 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:47:43,938 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-03-06 18:47:43,946 p=90857 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:47:43,986 p=90857 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:47:44,021 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/tasks.yml for 172.16.21.1
2018-03-06 18:47:44,029 p=90857 u=qupeng |  TASK [grafana : create common deploy directories] **************************************************************************************************************************
2018-03-06 18:47:44,755 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:47:45,488 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/data.grafana)
2018-03-06 18:47:45,502 p=90857 u=qupeng |  TASK [grafana : push data source file] *************************************************************************************************************************************
2018-03-06 18:47:47,000 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:47:47,015 p=90857 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:47:47,076 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/binary_deployment.yml for 172.16.21.1
2018-03-06 18:47:47,089 p=90857 u=qupeng |  TASK [grafana : create binary deploy directories (1/2)] ********************************************************************************************************************
2018-03-06 18:47:47,858 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt)
2018-03-06 18:47:47,873 p=90857 u=qupeng |  TASK [grafana : deploy grafana binary] *************************************************************************************************************************************
2018-03-06 18:47:48,415 p=90857 u=qupeng |  TASK [grafana : rename grafana deploy dir] *********************************************************************************************************************************
2018-03-06 18:47:49,158 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:47:49,165 p=90857 u=qupeng |  TASK [grafana : create binary deploy directories (2/2)] ********************************************************************************************************************
2018-03-06 18:47:49,857 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/dashboards)
2018-03-06 18:47:50,501 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/plugins)
2018-03-06 18:47:50,510 p=90857 u=qupeng |  TASK [grafana : create grafana configuration file] *************************************************************************************************************************
2018-03-06 18:47:51,853 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:47:51,868 p=90857 u=qupeng |  TASK [grafana : create run script] *****************************************************************************************************************************************
2018-03-06 18:47:53,275 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=run)
2018-03-06 18:47:53,286 p=90857 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:47:53,326 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/supervise_deployment.yml for 172.16.21.1
2018-03-06 18:47:53,339 p=90857 u=qupeng |  TASK [grafana : deploy supervise] ******************************************************************************************************************************************
2018-03-06 18:47:53,879 p=90857 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:47:54,589 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/grafana)
2018-03-06 18:47:54,603 p=90857 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:47:55,908 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-03-06 18:47:57,215 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-03-06 18:47:58,516 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-03-06 18:47:58,532 p=90857 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:47:59,958 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=start)
2018-03-06 18:48:01,315 p=90857 u=qupeng |  ok: [172.16.21.1] => (item=stop)
2018-03-06 18:48:01,330 p=90857 u=qupeng |  TASK [grafana : prepare firewalld white list] ******************************************************************************************************************************
2018-03-06 18:48:01,398 p=90857 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:48:01,407 p=90857 u=qupeng |  PLAY [deploying PD cluster] ************************************************************************************************************************************************
2018-03-06 18:48:01,425 p=90857 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:48:02,175 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-03-06 18:48:02,817 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:48:03,488 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-03-06 18:48:03,505 p=90857 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:48:03,552 p=90857 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:48:04,239 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-03-06 18:48:04,252 p=90857 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:48:04,299 p=90857 u=qupeng |  TASK [pd : create deploy directories] **************************************************************************************************************************************
2018-03-06 18:48:05,006 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:48:05,631 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:48:06,301 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/data.pd)
2018-03-06 18:48:06,317 p=90857 u=qupeng |  TASK [pd : load customized config] *****************************************************************************************************************************************
2018-03-06 18:48:06,356 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:48:06,370 p=90857 u=qupeng |  TASK [pd : load default config] ********************************************************************************************************************************************
2018-03-06 18:48:06,406 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:48:06,419 p=90857 u=qupeng |  TASK [pd : generate metrics config] ****************************************************************************************************************************************
2018-03-06 18:48:06,477 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:48:06,491 p=90857 u=qupeng |  TASK [pd : generate final config] ******************************************************************************************************************************************
2018-03-06 18:48:06,553 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:48:06,569 p=90857 u=qupeng |  TASK [pd : debug] **********************************************************************************************************************************************************
2018-03-06 18:48:06,627 p=90857 u=qupeng |  ok: [pd] => {
    "pd_conf": {
        "global": {
            "lease": 3, 
            "tso-save-interval": "3s"
        }, 
        "log": {
            "file": {}, 
            "level": "info"
        }, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s"
        }, 
        "replication": {
            "location-labels": [], 
            "max-replicas": 3
        }, 
        "schedule": {
            "leader-schedule-limit": 64, 
            "max-pending-peer-count": 16, 
            "max-snapshot-count": 3, 
            "max-store-down-time": "1h", 
            "region-schedule-limit": 16, 
            "replica-schedule-limit": 24, 
            "tolerant-size-ratio": 2.5
        }, 
        "security": {
            "cacert-path": "", 
            "cert-path": "", 
            "key-path": ""
        }
    }
}
2018-03-06 18:48:06,637 p=90857 u=qupeng |  TASK [pd : create configuration file] **************************************************************************************************************************************
2018-03-06 18:48:08,004 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:48:08,016 p=90857 u=qupeng |  TASK [pd : backup conf file] ***********************************************************************************************************************************************
2018-03-06 18:48:08,051 p=90857 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:48:08,096 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-03-06 18:48:08,109 p=90857 u=qupeng |  TASK [pd : deploy binary] **************************************************************************************************************************************************
2018-03-06 18:48:09,605 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:48:09,619 p=90857 u=qupeng |  TASK [pd : backup bianry file] *********************************************************************************************************************************************
2018-03-06 18:48:09,650 p=90857 u=qupeng |  TASK [pd : create startup script] ******************************************************************************************************************************************
2018-03-06 18:48:11,043 p=90857 u=qupeng |  ok: [pd] => (item=run)
2018-03-06 18:48:11,057 p=90857 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:48:11,097 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-03-06 18:48:11,109 p=90857 u=qupeng |  TASK [pd : deploy supervise] ***********************************************************************************************************************************************
2018-03-06 18:48:11,808 p=90857 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:48:12,532 p=90857 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/pd)
2018-03-06 18:48:12,547 p=90857 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:48:13,894 p=90857 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 18:48:15,358 p=90857 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 18:48:16,700 p=90857 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 18:48:16,717 p=90857 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:48:18,052 p=90857 u=qupeng |  ok: [pd] => (item=start)
2018-03-06 18:48:19,400 p=90857 u=qupeng |  ok: [pd] => (item=stop)
2018-03-06 18:48:19,416 p=90857 u=qupeng |  TASK [pd : prepare firewalld white list] ***********************************************************************************************************************************
2018-03-06 18:48:19,471 p=90857 u=qupeng |  ok: [pd]
2018-03-06 18:48:19,480 p=90857 u=qupeng |  PLAY [deploying TiKV cluster] **********************************************************************************************************************************************
2018-03-06 18:48:19,500 p=90857 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:48:20,158 p=90857 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/scripts)
2018-03-06 18:48:20,173 p=90857 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/scripts)
2018-03-06 18:48:20,175 p=90857 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/scripts)
2018-03-06 18:48:20,176 p=90857 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/scripts)
2018-03-06 18:48:20,186 p=90857 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/scripts)
2018-03-06 18:48:20,782 p=90857 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-03-06 18:48:20,785 p=90857 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-03-06 18:48:20,797 p=90857 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-03-06 18:48:20,804 p=90857 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:48:20,829 p=90857 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-03-06 18:48:21,487 p=90857 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/backup)
2018-03-06 18:48:21,490 p=90857 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/backup)
2018-03-06 18:48:21,492 p=90857 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/backup)
2018-03-06 18:48:21,499 p=90857 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/backup)
2018-03-06 18:48:21,506 p=90857 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/backup)
2018-03-06 18:48:21,514 p=90857 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:48:22,160 p=90857 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status)
2018-03-06 18:48:22,176 p=90857 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status)
2018-03-06 18:48:22,178 p=90857 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status)
2018-03-06 18:48:22,188 p=90857 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status)
2018-03-06 18:48:22,194 p=90857 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status)
2018-03-06 18:48:22,202 p=90857 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:48:22,827 p=90857 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/bin)
2018-03-06 18:48:22,834 p=90857 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/bin)
2018-03-06 18:48:22,857 p=90857 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/bin)
2018-03-06 18:48:22,868 p=90857 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/bin)
2018-03-06 18:48:22,899 p=90857 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/bin)
2018-03-06 18:48:22,913 p=90857 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:48:23,019 p=90857 u=qupeng |  TASK [tikv : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:48:23,702 p=90857 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/log)
2018-03-06 18:48:23,726 p=90857 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/log)
2018-03-06 18:48:23,741 p=90857 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/log)
2018-03-06 18:48:23,749 p=90857 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/log)
2018-03-06 18:48:23,834 p=90857 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/log)
2018-03-06 18:48:24,262 p=90857 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/data)
2018-03-06 18:48:24,314 p=90857 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/data)
2018-03-06 18:48:24,326 p=90857 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/data)
2018-03-06 18:48:24,345 p=90857 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/data)
2018-03-06 18:48:24,428 p=90857 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/data)
2018-03-06 18:48:24,826 p=90857 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:48:24,883 p=90857 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-03-06 18:48:24,903 p=90857 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-03-06 18:48:24,934 p=90857 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-03-06 18:48:25,017 p=90857 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-03-06 18:48:25,026 p=90857 u=qupeng |  TASK [tikv : load customized config] ***************************************************************************************************************************************
2018-03-06 18:48:25,149 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:48:25,169 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:48:25,183 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:48:25,186 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:48:25,209 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:48:25,217 p=90857 u=qupeng |  TASK [tikv : load default config] ******************************************************************************************************************************************
2018-03-06 18:48:25,418 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:48:25,421 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:48:25,424 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:48:25,426 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:48:25,429 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:48:25,441 p=90857 u=qupeng |  TASK [tikv : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:48:25,538 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:48:25,553 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:48:25,568 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:48:25,582 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:48:25,599 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:48:25,608 p=90857 u=qupeng |  TASK [tikv : generate final config] ****************************************************************************************************************************************
2018-03-06 18:48:25,667 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:48:25,678 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:48:25,682 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:48:25,690 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:48:25,711 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:48:25,717 p=90857 u=qupeng |  TASK [tikv : debug] ********************************************************************************************************************************************************
2018-03-06 18:48:25,760 p=90857 u=qupeng |  ok: [tikv1] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": "30s", 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:48:25,776 p=90857 u=qupeng |  ok: [tikv2] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": "30s", 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:48:25,790 p=90857 u=qupeng |  ok: [tikv4] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": "30s", 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:48:25,793 p=90857 u=qupeng |  ok: [tikv3] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": "30s", 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:48:25,825 p=90857 u=qupeng |  ok: [tikv5] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": "30s", 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:48:25,833 p=90857 u=qupeng |  TASK [tikv : create config file] *******************************************************************************************************************************************
2018-03-06 18:48:27,529 p=90857 u=qupeng |  changed: [tikv3]
2018-03-06 18:48:27,533 p=90857 u=qupeng |  changed: [tikv5]
2018-03-06 18:48:27,557 p=90857 u=qupeng |  changed: [tikv2]
2018-03-06 18:48:27,560 p=90857 u=qupeng |  changed: [tikv1]
2018-03-06 18:48:27,571 p=90857 u=qupeng |  changed: [tikv4]
2018-03-06 18:48:27,579 p=90857 u=qupeng |  TASK [tikv : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:48:28,303 p=90857 u=qupeng |  changed: [tikv1]
2018-03-06 18:48:28,339 p=90857 u=qupeng |  changed: [tikv2]
2018-03-06 18:48:28,358 p=90857 u=qupeng |  changed: [tikv5]
2018-03-06 18:48:28,376 p=90857 u=qupeng |  changed: [tikv3]
2018-03-06 18:48:28,387 p=90857 u=qupeng |  changed: [tikv4]
2018-03-06 18:48:28,396 p=90857 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:48:28,508 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/binary_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-03-06 18:48:28,524 p=90857 u=qupeng |  TASK [tikv : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:48:30,378 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:48:30,400 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:48:30,401 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:48:30,403 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:48:30,468 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:48:30,483 p=90857 u=qupeng |  TASK [tikv : backup bianry file] *******************************************************************************************************************************************
2018-03-06 18:48:30,561 p=90857 u=qupeng |  TASK [tikv : create run script] ********************************************************************************************************************************************
2018-03-06 18:48:31,894 p=90857 u=qupeng |  ok: [tikv1] => (item=run)
2018-03-06 18:48:31,896 p=90857 u=qupeng |  ok: [tikv2] => (item=run)
2018-03-06 18:48:31,931 p=90857 u=qupeng |  ok: [tikv3] => (item=run)
2018-03-06 18:48:31,999 p=90857 u=qupeng |  ok: [tikv5] => (item=run)
2018-03-06 18:48:32,029 p=90857 u=qupeng |  ok: [tikv4] => (item=run)
2018-03-06 18:48:32,043 p=90857 u=qupeng |  TASK [tikv : backup script file] *******************************************************************************************************************************************
2018-03-06 18:48:32,143 p=90857 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:48:32,250 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/supervise_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-03-06 18:48:32,264 p=90857 u=qupeng |  TASK [tikv : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:48:34,941 p=90857 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:48:35,640 p=90857 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status/tikv)
2018-03-06 18:48:35,643 p=90857 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status/tikv)
2018-03-06 18:48:35,647 p=90857 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status/tikv)
2018-03-06 18:48:35,671 p=90857 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status/tikv)
2018-03-06 18:48:35,673 p=90857 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status/tikv)
2018-03-06 18:48:35,682 p=90857 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:48:36,881 p=90857 u=qupeng |  ok: [tikv1] => (item=supervise)
2018-03-06 18:48:36,969 p=90857 u=qupeng |  ok: [tikv2] => (item=supervise)
2018-03-06 18:48:36,982 p=90857 u=qupeng |  ok: [tikv4] => (item=supervise)
2018-03-06 18:48:36,993 p=90857 u=qupeng |  ok: [tikv5] => (item=supervise)
2018-03-06 18:48:37,059 p=90857 u=qupeng |  ok: [tikv3] => (item=supervise)
2018-03-06 18:48:38,158 p=90857 u=qupeng |  ok: [tikv1] => (item=svc)
2018-03-06 18:48:38,239 p=90857 u=qupeng |  ok: [tikv5] => (item=svc)
2018-03-06 18:48:38,262 p=90857 u=qupeng |  ok: [tikv2] => (item=svc)
2018-03-06 18:48:38,276 p=90857 u=qupeng |  ok: [tikv4] => (item=svc)
2018-03-06 18:48:38,353 p=90857 u=qupeng |  ok: [tikv3] => (item=svc)
2018-03-06 18:48:39,461 p=90857 u=qupeng |  ok: [tikv1] => (item=svstat)
2018-03-06 18:48:39,511 p=90857 u=qupeng |  ok: [tikv5] => (item=svstat)
2018-03-06 18:48:39,569 p=90857 u=qupeng |  ok: [tikv2] => (item=svstat)
2018-03-06 18:48:39,571 p=90857 u=qupeng |  ok: [tikv4] => (item=svstat)
2018-03-06 18:48:39,599 p=90857 u=qupeng |  ok: [tikv3] => (item=svstat)
2018-03-06 18:48:39,616 p=90857 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:48:40,925 p=90857 u=qupeng |  ok: [tikv1] => (item=start)
2018-03-06 18:48:41,050 p=90857 u=qupeng |  ok: [tikv5] => (item=start)
2018-03-06 18:48:41,065 p=90857 u=qupeng |  ok: [tikv2] => (item=start)
2018-03-06 18:48:41,074 p=90857 u=qupeng |  ok: [tikv4] => (item=start)
2018-03-06 18:48:41,082 p=90857 u=qupeng |  ok: [tikv3] => (item=start)
2018-03-06 18:48:42,244 p=90857 u=qupeng |  ok: [tikv1] => (item=stop)
2018-03-06 18:48:42,348 p=90857 u=qupeng |  ok: [tikv3] => (item=stop)
2018-03-06 18:48:42,353 p=90857 u=qupeng |  ok: [tikv5] => (item=stop)
2018-03-06 18:48:42,356 p=90857 u=qupeng |  ok: [tikv2] => (item=stop)
2018-03-06 18:48:42,371 p=90857 u=qupeng |  ok: [tikv4] => (item=stop)
2018-03-06 18:48:42,388 p=90857 u=qupeng |  TASK [tikv : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:48:42,453 p=90857 u=qupeng |  ok: [tikv1]
2018-03-06 18:48:42,473 p=90857 u=qupeng |  ok: [tikv2]
2018-03-06 18:48:42,474 p=90857 u=qupeng |  ok: [tikv3]
2018-03-06 18:48:42,493 p=90857 u=qupeng |  ok: [tikv4]
2018-03-06 18:48:42,521 p=90857 u=qupeng |  ok: [tikv5]
2018-03-06 18:48:42,533 p=90857 u=qupeng |  PLAY [deploying TiDB cluster] **********************************************************************************************************************************************
2018-03-06 18:48:42,555 p=90857 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:48:42,613 p=90857 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:48:42,654 p=90857 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:48:42,691 p=90857 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:48:42,728 p=90857 u=qupeng |  TASK [pump : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:48:42,774 p=90857 u=qupeng |  TASK [pump : include] ******************************************************************************************************************************************************
2018-03-06 18:48:42,804 p=90857 u=qupeng |  TASK [pump : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:48:42,831 p=90857 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:48:43,521 p=90857 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/scripts)
2018-03-06 18:48:44,204 p=90857 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-03-06 18:48:44,914 p=90857 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/backup)
2018-03-06 18:48:44,930 p=90857 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:48:44,981 p=90857 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:48:45,707 p=90857 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/bin)
2018-03-06 18:48:45,722 p=90857 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:48:45,760 p=90857 u=qupeng |  TASK [tidb : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:48:46,495 p=90857 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/log)
2018-03-06 18:48:47,226 p=90857 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-03-06 18:48:47,239 p=90857 u=qupeng |  TASK [tidb : load customized config] ***************************************************************************************************************************************
2018-03-06 18:48:47,296 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:48:47,309 p=90857 u=qupeng |  TASK [tidb : load default config] ******************************************************************************************************************************************
2018-03-06 18:48:47,362 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:48:47,377 p=90857 u=qupeng |  TASK [tidb : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:48:47,438 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:48:47,451 p=90857 u=qupeng |  TASK [tidb : combine final config] *****************************************************************************************************************************************
2018-03-06 18:48:47,491 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:48:47,504 p=90857 u=qupeng |  TASK [tidb : debug] ********************************************************************************************************************************************************
2018-03-06 18:48:47,544 p=90857 u=qupeng |  ok: [tidb] => {
    "tidb_conf": {
        "global": {
            "enable-chunk": true, 
            "host": "0.0.0.0", 
            "lease": "10s", 
            "run-ddl": true, 
            "split-table": true, 
            "store": "tikv"
        }, 
        "log": {
            "disable-timestamp": false, 
            "file": {
                "log-rotate": true
            }, 
            "format": "text", 
            "level": "info", 
            "query-log-max-len": 2048, 
            "slow-threshold": 300
        }, 
        "opentracing": {
            "enable": false, 
            "reporter": {
                "buffer-flush-interval": 0, 
                "local-agent-host-port": "", 
                "log-spans": false, 
                "queue-size": 0
            }, 
            "rpc-metrics": false, 
            "sampler": {
                "max-operations": 0, 
                "param": 1.0, 
                "sampling-refresh-interval": 0, 
                "sampling-server-url": "", 
                "type": "const"
            }
        }, 
        "performance": {
            "cross-join": true, 
            "join-concurrency": 5, 
            "max-procs": 0, 
            "retry-limit": 10, 
            "run-auto-analyze": true, 
            "stats-lease": "3s", 
            "tcp-keep-alive": true
        }, 
        "plan_cache": {
            "capacity": 2560, 
            "enabled": false, 
            "shards": 256
        }, 
        "prepared_plan_cache": {
            "capacity": 100, 
            "enabled": false
        }, 
        "proxy_protocol": {
            "header-timeout": 5, 
            "networks": ""
        }, 
        "security": {
            "cluster-ssl-ca": "", 
            "cluster-ssl-cert": "", 
            "cluster-ssl-key": "", 
            "ssl-ca": "", 
            "ssl-cert": "", 
            "ssl-key": ""
        }, 
        "status": {
            "metrics-addr": "172.16.21.1:60011", 
            "metrics-interval": 15, 
            "report-status": true
        }, 
        "tikv_client": {
            "grpc-connection-count": 16
        }, 
        "xprotocol": {
            "xhost": "0.0.0.0", 
            "xport": 14000, 
            "xserver": false, 
            "xsocket": ""
        }
    }
}
2018-03-06 18:48:47,557 p=90857 u=qupeng |  TASK [tidb : create config file] *******************************************************************************************************************************************
2018-03-06 18:48:49,007 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:48:49,020 p=90857 u=qupeng |  TASK [tidb : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:48:49,057 p=90857 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-03-06 18:48:49,114 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/binary_deployment.yml for tidb
2018-03-06 18:48:49,128 p=90857 u=qupeng |  TASK [tidb : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:48:50,735 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:48:50,746 p=90857 u=qupeng |  TASK [tidb : backup binary file] *******************************************************************************************************************************************
2018-03-06 18:48:50,778 p=90857 u=qupeng |  TASK [tidb : create run script] ********************************************************************************************************************************************
2018-03-06 18:48:52,260 p=90857 u=qupeng |  ok: [tidb] => (item=run)
2018-03-06 18:48:52,273 p=90857 u=qupeng |  TASK [tidb : backup script file] *******************************************************************************************************************************************
2018-03-06 18:48:52,312 p=90857 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-03-06 18:48:52,351 p=90857 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/supervise_deployment.yml for tidb
2018-03-06 18:48:52,363 p=90857 u=qupeng |  TASK [tidb : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:48:53,079 p=90857 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:48:53,883 p=90857 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/status/tidb)
2018-03-06 18:48:53,898 p=90857 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:48:55,321 p=90857 u=qupeng |  ok: [tidb] => (item=supervise)
2018-03-06 18:48:56,760 p=90857 u=qupeng |  ok: [tidb] => (item=svc)
2018-03-06 18:48:58,139 p=90857 u=qupeng |  ok: [tidb] => (item=svstat)
2018-03-06 18:48:58,155 p=90857 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:48:59,664 p=90857 u=qupeng |  ok: [tidb] => (item=start)
2018-03-06 18:49:01,032 p=90857 u=qupeng |  ok: [tidb] => (item=stop)
2018-03-06 18:49:01,047 p=90857 u=qupeng |  TASK [tidb : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:49:01,112 p=90857 u=qupeng |  ok: [tidb]
2018-03-06 18:49:01,121 p=90857 u=qupeng |  PLAY [finalizing deployment target] ****************************************************************************************************************************************
2018-03-06 18:49:01,144 p=90857 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-03-06 18:49:01,310 p=90857 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-03-06 18:49:01,457 p=90857 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-03-06 18:49:01,640 p=90857 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-03-06 18:49:01,802 p=90857 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-03-06 18:49:01,952 p=90857 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-03-06 18:49:02,102 p=90857 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-03-06 18:49:02,271 p=90857 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-03-06 18:49:02,409 p=90857 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:49:02,409 p=90857 u=qupeng |  172.16.21.1                : ok=29   changed=0    unreachable=0    failed=0   
2018-03-06 18:49:02,409 p=90857 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:49:02,409 p=90857 u=qupeng |  monitoring                 : ok=40   changed=2    unreachable=0    failed=0   
2018-03-06 18:49:02,409 p=90857 u=qupeng |  pd                         : ok=52   changed=1    unreachable=0    failed=0   
2018-03-06 18:49:02,409 p=90857 u=qupeng |  tidb                       : ok=30   changed=0    unreachable=0    failed=0   
2018-03-06 18:49:02,409 p=90857 u=qupeng |  tikv1                      : ok=32   changed=2    unreachable=0    failed=0   
2018-03-06 18:49:02,410 p=90857 u=qupeng |  tikv2                      : ok=32   changed=2    unreachable=0    failed=0   
2018-03-06 18:49:02,410 p=90857 u=qupeng |  tikv3                      : ok=32   changed=2    unreachable=0    failed=0   
2018-03-06 18:49:02,410 p=90857 u=qupeng |  tikv4                      : ok=32   changed=2    unreachable=0    failed=0   
2018-03-06 18:49:02,410 p=90857 u=qupeng |  tikv5                      : ok=32   changed=2    unreachable=0    failed=0   
2018-03-06 18:49:02,410 p=90857 u=qupeng |  Congrats! All goes well. :-)
2018-03-06 18:49:30,937 p=111466 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:49:30,952 p=111466 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:49:30,980 p=111466 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:49:31,004 p=111466 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:49:31,022 p=111466 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:49:31,046 p=111466 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:49:31,070 p=111466 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:49:31,118 p=111466 u=qupeng |  ok: [localhost]
2018-03-06 18:49:31,127 p=111466 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:49:31,155 p=111466 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:49:31,323 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:31,339 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:31,359 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:31,378 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:31,379 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:31,458 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:31,465 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:31,479 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:31,490 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:31,501 p=111466 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:49:36,291 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:36,466 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:36,527 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:36,573 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:36,604 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:40,926 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:41,160 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:41,203 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:41,334 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:41,361 p=111466 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:49:42,282 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:42,308 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:42,319 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:42,331 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:42,335 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:42,942 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:43,012 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:43,063 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:43,067 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:43,080 p=111466 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:49:43,202 p=111466 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:49:43,302 p=111466 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:49:43,414 p=111466 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:49:43,455 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:43,466 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:43,489 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:43,501 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:43,502 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:43,503 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:43,517 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:43,530 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:43,532 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:43,541 p=111466 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:49:43,642 p=111466 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:49:43,742 p=111466 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:49:43,834 p=111466 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:49:44,594 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:44,607 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:44,619 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:44,633 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:44,651 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:45,384 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:45,400 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:45,408 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:45,416 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:45,427 p=111466 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:49:46,222 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:46,240 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:46,252 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:46,267 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:46,270 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:46,992 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:47,023 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:47,030 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:47,039 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:47,047 p=111466 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:49:47,158 p=111466 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:49:47,297 p=111466 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:49:48,288 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:48,302 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:48,316 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:48,329 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:48,354 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:49,143 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:49,163 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:49,183 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:49,193 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:49,205 p=111466 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:49:49,325 p=111466 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:49:49,376 p=111466 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:49:49,387 p=111466 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:49:49,399 p=111466 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:49:49,412 p=111466 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:49:49,413 p=111466 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:49:49,417 p=111466 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:49:49,417 p=111466 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:49:49,446 p=111466 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:49:49,447 p=111466 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:49:49,454 p=111466 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:49:50,234 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:50,301 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:50,361 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:50,379 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:50,979 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:51,083 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:51,158 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:51,189 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:51,305 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:51,318 p=111466 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:49:52,134 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:52,155 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:52,185 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:52,215 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:52,247 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:52,929 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:52,967 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:52,998 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:53,113 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:53,129 p=111466 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:49:53,163 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:53,178 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:53,192 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:53,205 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:53,218 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:53,241 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:53,244 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:53,253 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:53,277 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:53,284 p=111466 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:49:53,338 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:53,352 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:53,380 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:53,400 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:53,401 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:53,402 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:53,403 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:53,425 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:53,468 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:53,483 p=111466 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:49:53,529 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:53,547 p=111466 u=qupeng |  ok: [monitoring]
2018-03-06 18:49:53,573 p=111466 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:49:53,585 p=111466 u=qupeng |  ok: [tidb]
2018-03-06 18:49:53,596 p=111466 u=qupeng |  ok: [tikv1]
2018-03-06 18:49:53,612 p=111466 u=qupeng |  ok: [tikv3]
2018-03-06 18:49:53,617 p=111466 u=qupeng |  ok: [tikv2]
2018-03-06 18:49:53,623 p=111466 u=qupeng |  ok: [tikv4]
2018-03-06 18:49:53,635 p=111466 u=qupeng |  ok: [tikv5]
2018-03-06 18:49:53,641 p=111466 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:49:53,649 p=111466 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-03-06 18:49:54,513 p=111466 u=qupeng |  changed: [pd] => (item=node_exporter)
2018-03-06 18:49:54,527 p=111466 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:49:54,562 p=111466 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:49:54,594 p=111466 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:49:56,399 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:56,408 p=111466 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:49:56,422 p=111466 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-03-06 18:49:57,311 p=111466 u=qupeng |  changed: [pd] => (item=blackbox_exporter)
2018-03-06 18:49:57,325 p=111466 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:49:57,350 p=111466 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:49:57,376 p=111466 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:49:58,047 p=111466 u=qupeng |  ok: [pd]
2018-03-06 18:49:58,055 p=111466 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:49:58,069 p=111466 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-03-06 18:49:59,017 p=111466 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-03-06 18:49:59,916 p=111466 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-03-06 18:49:59,926 p=111466 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:49:59,955 p=111466 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:49:59,980 p=111466 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-03-06 18:50:22,683 p=111466 u=qupeng |   [ERROR]: User interrupted execution

2018-03-06 18:51:28,662 p=116622 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:51:28,677 p=116622 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:51:28,705 p=116622 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:51:28,729 p=116622 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:51:28,747 p=116622 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:51:28,768 p=116622 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:51:28,790 p=116622 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:51:28,853 p=116622 u=qupeng |  ok: [localhost]
2018-03-06 18:51:28,859 p=116622 u=qupeng |  PLAY [initializing deployment target] **************************************************************************************************************************************
2018-03-06 18:51:28,878 p=116622 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:51:29,040 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:51:29,058 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:51:29,080 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:51:29,098 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:51:29,099 p=116622 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:51:29,183 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:51:29,188 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:51:29,205 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:51:29,227 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:51:29,241 p=116622 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:51:34,308 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:51:34,365 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:51:34,410 p=116622 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:51:35,414 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:51:35,486 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:51:38,867 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:51:39,337 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:51:40,102 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:51:40,321 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:51:40,350 p=116622 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:51:41,270 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:51:41,291 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:51:41,307 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:51:41,325 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:51:41,326 p=116622 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:51:42,053 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:51:42,060 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:51:42,063 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:51:42,076 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:51:42,083 p=116622 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:51:42,176 p=116622 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:51:42,271 p=116622 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:51:42,359 p=116622 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:51:42,397 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:51:42,407 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:51:42,417 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:51:42,428 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:51:42,440 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:51:42,441 p=116622 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:51:42,446 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:51:42,456 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:51:42,469 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:51:42,475 p=116622 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:51:42,568 p=116622 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:51:42,658 p=116622 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:51:42,746 p=116622 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:51:43,494 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:51:43,513 p=116622 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:51:43,536 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:51:43,552 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:51:43,554 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:51:44,172 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:51:44,245 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:51:44,254 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:51:44,276 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:51:44,283 p=116622 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:51:44,971 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:51:44,989 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:51:45,001 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:51:45,014 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:51:45,015 p=116622 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:51:45,719 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:51:45,733 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:51:45,762 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:51:45,775 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:51:45,788 p=116622 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:51:45,908 p=116622 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:51:46,003 p=116622 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:51:46,773 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:51:46,791 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:51:46,808 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:51:46,822 p=116622 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:51:46,823 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:51:47,342 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:51:47,391 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:51:47,412 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:51:47,415 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:51:47,423 p=116622 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:51:47,521 p=116622 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:51:47,560 p=116622 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:51:47,570 p=116622 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:51:47,602 p=116622 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:51:47,613 p=116622 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:51:47,614 p=116622 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:51:47,614 p=116622 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:51:47,622 p=116622 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:51:47,640 p=116622 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:51:47,650 p=116622 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:51:47,656 p=116622 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:51:48,276 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:51:48,315 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:51:48,326 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:51:48,336 p=116622 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:51:48,337 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:51:48,833 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:51:48,890 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:51:48,906 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:51:48,917 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:51:48,928 p=116622 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:51:49,042 p=116622 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:51:49,070 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:51:49,090 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:51:49,101 p=116622 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:51:49,113 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:51:49,123 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:51:49,125 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:51:49,126 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:51:49,136 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:51:49,153 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:51:49,159 p=116622 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:51:49,259 p=116622 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:51:49,361 p=116622 u=qupeng |  PLAY [deploying monitoring agent] ******************************************************************************************************************************************
2018-03-06 18:51:49,370 p=116622 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:51:50,163 p=116622 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-03-06 18:51:50,849 p=116622 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:51:51,565 p=116622 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-03-06 18:51:51,580 p=116622 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:51:51,630 p=116622 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:51:52,331 p=116622 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-03-06 18:51:52,345 p=116622 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:51:52,394 p=116622 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-03-06 18:51:52,446 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/binary_deployment.yml for pd
2018-03-06 18:51:52,458 p=116622 u=qupeng |  TASK [node_exporter : create deploy directories] ***************************************************************************************************************************
2018-03-06 18:51:53,173 p=116622 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:51:53,189 p=116622 u=qupeng |  TASK [node_exporter : deploy node_exporter binary] *************************************************************************************************************************
2018-03-06 18:51:55,650 p=116622 u=qupeng |  changed: [pd]
2018-03-06 18:51:55,664 p=116622 u=qupeng |  TASK [node_exporter : create run script] ***********************************************************************************************************************************
2018-03-06 18:51:57,020 p=116622 u=qupeng |  changed: [pd] => (item=run)
2018-03-06 18:51:57,034 p=116622 u=qupeng |  TASK [node_exporter : include] *********************************************************************************************************************************************
2018-03-06 18:51:57,084 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/node_exporter/tasks/supervise_deployment.yml for pd
2018-03-06 18:51:57,099 p=116622 u=qupeng |  TASK [node_exporter : deploy supervise] ************************************************************************************************************************************
2018-03-06 18:51:57,637 p=116622 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:51:58,385 p=116622 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/node_exporter)
2018-03-06 18:51:58,397 p=116622 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:51:59,789 p=116622 u=qupeng |  changed: [pd] => (item=supervise)
2018-03-06 18:52:01,139 p=116622 u=qupeng |  changed: [pd] => (item=svc)
2018-03-06 18:52:02,450 p=116622 u=qupeng |  changed: [pd] => (item=svstat)
2018-03-06 18:52:02,465 p=116622 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:52:03,810 p=116622 u=qupeng |  changed: [pd] => (item=start)
2018-03-06 18:52:05,221 p=116622 u=qupeng |  changed: [pd] => (item=stop)
2018-03-06 18:52:05,237 p=116622 u=qupeng |  TASK [node_exporter : prepare firewalld white list] ************************************************************************************************************************
2018-03-06 18:52:05,299 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:52:05,308 p=116622 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-03-06 18:52:05,358 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/binary_deployment.yml for pd
2018-03-06 18:52:05,370 p=116622 u=qupeng |  TASK [blackbox_exporter : create deploy directories] ***********************************************************************************************************************
2018-03-06 18:52:06,116 p=116622 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:52:06,131 p=116622 u=qupeng |  TASK [blackbox_exporter : deploy blackbox_exporter binary] *****************************************************************************************************************
2018-03-06 18:52:08,428 p=116622 u=qupeng |  changed: [pd]
2018-03-06 18:52:08,442 p=116622 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-03-06 18:52:08,480 p=116622 u=qupeng |  TASK [blackbox_exporter : blackbox_exporter binary add CAP_NET_RAW capability] *********************************************************************************************
2018-03-06 18:52:09,400 p=116622 u=qupeng |  changed: [pd]
2018-03-06 18:52:09,413 p=116622 u=qupeng |  TASK [blackbox_exporter : create run script] *******************************************************************************************************************************
2018-03-06 18:52:10,819 p=116622 u=qupeng |  changed: [pd] => (item=run)
2018-03-06 18:52:10,829 p=116622 u=qupeng |  TASK [blackbox_exporter : include] *****************************************************************************************************************************************
2018-03-06 18:52:10,877 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/blackbox_exporter/tasks/supervise_deployment.yml for pd
2018-03-06 18:52:10,891 p=116622 u=qupeng |  TASK [blackbox_exporter : deploy supervise] ********************************************************************************************************************************
2018-03-06 18:52:11,349 p=116622 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:52:12,123 p=116622 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/blackbox_exporter)
2018-03-06 18:52:12,137 p=116622 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:52:13,573 p=116622 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 18:52:15,030 p=116622 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 18:52:16,439 p=116622 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 18:52:16,453 p=116622 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:52:17,891 p=116622 u=qupeng |  changed: [pd] => (item=start)
2018-03-06 18:52:19,270 p=116622 u=qupeng |  changed: [pd] => (item=stop)
2018-03-06 18:52:19,286 p=116622 u=qupeng |  TASK [blackbox_exporter : create config file] ******************************************************************************************************************************
2018-03-06 18:52:20,675 p=116622 u=qupeng |  changed: [pd]
2018-03-06 18:52:20,686 p=116622 u=qupeng |  TASK [blackbox_exporter : backup conf file] ********************************************************************************************************************************
2018-03-06 18:52:20,729 p=116622 u=qupeng |  TASK [blackbox_exporter : prepare firewalld white list] ********************************************************************************************************************
2018-03-06 18:52:20,781 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:52:20,790 p=116622 u=qupeng |  PLAY [deploying monitoring server] *****************************************************************************************************************************************
2018-03-06 18:52:20,809 p=116622 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:52:21,512 p=116622 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-03-06 18:52:22,208 p=116622 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-03-06 18:52:22,913 p=116622 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-03-06 18:52:22,921 p=116622 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:52:22,957 p=116622 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:52:23,679 p=116622 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-03-06 18:52:23,694 p=116622 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:52:23,737 p=116622 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-03-06 18:52:23,784 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/binary_deployment.yml for monitoring
2018-03-06 18:52:23,797 p=116622 u=qupeng |  TASK [pushgateway : create deploy directories] *****************************************************************************************************************************
2018-03-06 18:52:24,524 p=116622 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:52:24,537 p=116622 u=qupeng |  TASK [pushgateway : deploy pushgateway binary] *****************************************************************************************************************************
2018-03-06 18:52:26,091 p=116622 u=qupeng |  changed: [monitoring]
2018-03-06 18:52:26,098 p=116622 u=qupeng |  TASK [pushgateway : create run script] *************************************************************************************************************************************
2018-03-06 18:52:27,473 p=116622 u=qupeng |  changed: [monitoring] => (item=run)
2018-03-06 18:52:27,486 p=116622 u=qupeng |  TASK [pushgateway : include] ***********************************************************************************************************************************************
2018-03-06 18:52:27,528 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pushgateway/tasks/supervise_deployment.yml for monitoring
2018-03-06 18:52:27,541 p=116622 u=qupeng |  TASK [pushgateway : deploy supervise] **************************************************************************************************************************************
2018-03-06 18:52:28,030 p=116622 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:52:28,794 p=116622 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/pushgateway)
2018-03-06 18:52:28,807 p=116622 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:52:30,195 p=116622 u=qupeng |  changed: [monitoring] => (item=supervise)
2018-03-06 18:52:31,527 p=116622 u=qupeng |  changed: [monitoring] => (item=svc)
2018-03-06 18:52:32,874 p=116622 u=qupeng |  changed: [monitoring] => (item=svstat)
2018-03-06 18:52:32,882 p=116622 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:52:34,311 p=116622 u=qupeng |  changed: [monitoring] => (item=start)
2018-03-06 18:52:35,688 p=116622 u=qupeng |  changed: [monitoring] => (item=stop)
2018-03-06 18:52:35,699 p=116622 u=qupeng |  TASK [pushgateway : prepare firewalld white list] **************************************************************************************************************************
2018-03-06 18:52:35,760 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:52:35,774 p=116622 u=qupeng |  TASK [prometheus : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:52:36,483 p=116622 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:52:37,176 p=116622 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-03-06 18:52:37,862 p=116622 u=qupeng |  changed: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-03-06 18:52:37,877 p=116622 u=qupeng |  TASK [prometheus : get config file stat] ***********************************************************************************************************************************
2018-03-06 18:52:38,571 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:52:38,585 p=116622 u=qupeng |  TASK [prometheus : get alert conf stat] ************************************************************************************************************************************
2018-03-06 18:52:39,320 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:52:39,333 p=116622 u=qupeng |  TASK [prometheus : create configuration file if not exist] *****************************************************************************************************************
2018-03-06 18:52:40,996 p=116622 u=qupeng |  changed: [monitoring]
2018-03-06 18:52:41,011 p=116622 u=qupeng |  TASK [prometheus : copy alert rules file] **********************************************************************************************************************************
2018-03-06 18:52:42,420 p=116622 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-03-06 18:52:43,765 p=116622 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-03-06 18:52:45,155 p=116622 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-03-06 18:52:46,526 p=116622 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-03-06 18:52:47,887 p=116622 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-03-06 18:52:49,215 p=116622 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-03-06 18:52:50,510 p=116622 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-03-06 18:52:50,525 p=116622 u=qupeng |  TASK [prometheus : set alert rules label changes] **************************************************************************************************************************
2018-03-06 18:52:51,324 p=116622 u=qupeng |  changed: [monitoring] => (item=node.rules.yml)
2018-03-06 18:52:52,018 p=116622 u=qupeng |  changed: [monitoring] => (item=bypass.rules.yml)
2018-03-06 18:52:52,739 p=116622 u=qupeng |  changed: [monitoring] => (item=pd.rules.yml)
2018-03-06 18:52:53,430 p=116622 u=qupeng |  changed: [monitoring] => (item=tidb.rules.yml)
2018-03-06 18:52:54,104 p=116622 u=qupeng |  changed: [monitoring] => (item=tikv.rules.yml)
2018-03-06 18:52:54,829 p=116622 u=qupeng |  changed: [monitoring] => (item=binlog.rules.yml)
2018-03-06 18:52:55,541 p=116622 u=qupeng |  changed: [monitoring] => (item=blacker.rules.yml)
2018-03-06 18:52:55,563 p=116622 u=qupeng |  TASK [prometheus : create deploy data directory] ***************************************************************************************************************************
2018-03-06 18:52:56,299 p=116622 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/prometheus2.0.0.data.metrics)
2018-03-06 18:52:56,310 p=116622 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-03-06 18:52:56,360 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/binary_deployment.yml for monitoring
2018-03-06 18:52:56,373 p=116622 u=qupeng |  TASK [prometheus : create deploy log directory] ****************************************************************************************************************************
2018-03-06 18:52:57,104 p=116622 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:52:57,115 p=116622 u=qupeng |  TASK [prometheus : deploy prometheus binary] *******************************************************************************************************************************
2018-03-06 18:52:59,193 p=116622 u=qupeng |  changed: [monitoring]
2018-03-06 18:52:59,206 p=116622 u=qupeng |  TASK [prometheus : create run script] **************************************************************************************************************************************
2018-03-06 18:53:00,584 p=116622 u=qupeng |  changed: [monitoring] => (item=run)
2018-03-06 18:53:00,599 p=116622 u=qupeng |  TASK [prometheus : include] ************************************************************************************************************************************************
2018-03-06 18:53:00,642 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/prometheus/tasks/supervise_deployment.yml for monitoring
2018-03-06 18:53:00,653 p=116622 u=qupeng |  TASK [prometheus : deploy supervise] ***************************************************************************************************************************************
2018-03-06 18:53:01,179 p=116622 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:53:01,910 p=116622 u=qupeng |  ok: [monitoring] => (item=/data3/qupeng/raftstore-learner/monitor/status/prometheus)
2018-03-06 18:53:01,925 p=116622 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:53:03,328 p=116622 u=qupeng |  ok: [monitoring] => (item=supervise)
2018-03-06 18:53:04,745 p=116622 u=qupeng |  ok: [monitoring] => (item=svc)
2018-03-06 18:53:06,116 p=116622 u=qupeng |  ok: [monitoring] => (item=svstat)
2018-03-06 18:53:06,131 p=116622 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:53:07,519 p=116622 u=qupeng |  changed: [monitoring] => (item=start)
2018-03-06 18:53:08,891 p=116622 u=qupeng |  changed: [monitoring] => (item=stop)
2018-03-06 18:53:08,907 p=116622 u=qupeng |  TASK [prometheus : prepare firewalld white list] ***************************************************************************************************************************
2018-03-06 18:53:08,946 p=116622 u=qupeng |  ok: [monitoring]
2018-03-06 18:53:08,951 p=116622 u=qupeng |  PLAY [deploying grafana] ***************************************************************************************************************************************************
2018-03-06 18:53:08,959 p=116622 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:53:09,670 p=116622 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/scripts)
2018-03-06 18:53:10,387 p=116622 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/conf)
2018-03-06 18:53:11,078 p=116622 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/backup)
2018-03-06 18:53:11,093 p=116622 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:53:11,134 p=116622 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:53:11,868 p=116622 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/bin)
2018-03-06 18:53:11,875 p=116622 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:53:11,917 p=116622 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:53:11,952 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/tasks.yml for 172.16.21.1
2018-03-06 18:53:11,959 p=116622 u=qupeng |  TASK [grafana : create common deploy directories] **************************************************************************************************************************
2018-03-06 18:53:12,646 p=116622 u=qupeng |  ok: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/log)
2018-03-06 18:53:13,365 p=116622 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/data.grafana)
2018-03-06 18:53:13,379 p=116622 u=qupeng |  TASK [grafana : push data source file] *************************************************************************************************************************************
2018-03-06 18:53:14,785 p=116622 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:53:14,792 p=116622 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:53:14,838 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/binary_deployment.yml for 172.16.21.1
2018-03-06 18:53:14,846 p=116622 u=qupeng |  TASK [grafana : create binary deploy directories (1/2)] ********************************************************************************************************************
2018-03-06 18:53:15,637 p=116622 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt)
2018-03-06 18:53:15,649 p=116622 u=qupeng |  TASK [grafana : deploy grafana binary] *************************************************************************************************************************************
2018-03-06 18:53:22,349 p=116622 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:53:22,364 p=116622 u=qupeng |  TASK [grafana : rename grafana deploy dir] *********************************************************************************************************************************
2018-03-06 18:53:23,216 p=116622 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:53:23,228 p=116622 u=qupeng |  TASK [grafana : create binary deploy directories (2/2)] ********************************************************************************************************************
2018-03-06 18:53:23,933 p=116622 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/dashboards)
2018-03-06 18:53:24,617 p=116622 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/opt/grafana/plugins)
2018-03-06 18:53:24,631 p=116622 u=qupeng |  TASK [grafana : create grafana configuration file] *************************************************************************************************************************
2018-03-06 18:53:26,021 p=116622 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:53:26,036 p=116622 u=qupeng |  TASK [grafana : create run script] *****************************************************************************************************************************************
2018-03-06 18:53:27,432 p=116622 u=qupeng |  changed: [172.16.21.1] => (item=run)
2018-03-06 18:53:27,444 p=116622 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:53:27,494 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/grafana/tasks/supervise_deployment.yml for 172.16.21.1
2018-03-06 18:53:27,509 p=116622 u=qupeng |  TASK [grafana : deploy supervise] ******************************************************************************************************************************************
2018-03-06 18:53:28,080 p=116622 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:53:28,865 p=116622 u=qupeng |  changed: [172.16.21.1] => (item=/data3/qupeng/raftstore-learner/monitor/status/grafana)
2018-03-06 18:53:28,879 p=116622 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:53:30,292 p=116622 u=qupeng |  ok: [172.16.21.1] => (item=supervise)
2018-03-06 18:53:31,701 p=116622 u=qupeng |  ok: [172.16.21.1] => (item=svc)
2018-03-06 18:53:33,100 p=116622 u=qupeng |  ok: [172.16.21.1] => (item=svstat)
2018-03-06 18:53:33,116 p=116622 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:53:34,491 p=116622 u=qupeng |  changed: [172.16.21.1] => (item=start)
2018-03-06 18:53:35,880 p=116622 u=qupeng |  changed: [172.16.21.1] => (item=stop)
2018-03-06 18:53:35,892 p=116622 u=qupeng |  TASK [grafana : prepare firewalld white list] ******************************************************************************************************************************
2018-03-06 18:53:35,951 p=116622 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:53:35,960 p=116622 u=qupeng |  PLAY [deploying PD cluster] ************************************************************************************************************************************************
2018-03-06 18:53:35,978 p=116622 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:53:36,711 p=116622 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/scripts)
2018-03-06 18:53:37,426 p=116622 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:53:38,113 p=116622 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/backup)
2018-03-06 18:53:38,127 p=116622 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:53:38,162 p=116622 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:53:38,848 p=116622 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/bin)
2018-03-06 18:53:38,863 p=116622 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:53:38,904 p=116622 u=qupeng |  TASK [pd : create deploy directories] **************************************************************************************************************************************
2018-03-06 18:53:39,628 p=116622 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/log)
2018-03-06 18:53:40,337 p=116622 u=qupeng |  ok: [pd] => (item=/data3/qupeng/raftstore-learner/pd/conf)
2018-03-06 18:53:41,029 p=116622 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/data.pd)
2018-03-06 18:53:41,045 p=116622 u=qupeng |  TASK [pd : load customized config] *****************************************************************************************************************************************
2018-03-06 18:53:41,106 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:53:41,120 p=116622 u=qupeng |  TASK [pd : load default config] ********************************************************************************************************************************************
2018-03-06 18:53:41,175 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:53:41,189 p=116622 u=qupeng |  TASK [pd : generate metrics config] ****************************************************************************************************************************************
2018-03-06 18:53:41,281 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:53:41,294 p=116622 u=qupeng |  TASK [pd : generate final config] ******************************************************************************************************************************************
2018-03-06 18:53:41,334 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:53:41,348 p=116622 u=qupeng |  TASK [pd : debug] **********************************************************************************************************************************************************
2018-03-06 18:53:41,386 p=116622 u=qupeng |  ok: [pd] => {
    "pd_conf": {
        "global": {
            "lease": 3, 
            "tso-save-interval": "3s"
        }, 
        "log": {
            "file": {}, 
            "level": "info"
        }, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s"
        }, 
        "replication": {
            "location-labels": [], 
            "max-replicas": 3
        }, 
        "schedule": {
            "leader-schedule-limit": 64, 
            "max-pending-peer-count": 16, 
            "max-snapshot-count": 3, 
            "max-store-down-time": "1h", 
            "region-schedule-limit": 16, 
            "replica-schedule-limit": 24, 
            "tolerant-size-ratio": 2.5
        }, 
        "security": {
            "cacert-path": "", 
            "cert-path": "", 
            "key-path": ""
        }
    }
}
2018-03-06 18:53:41,399 p=116622 u=qupeng |  TASK [pd : create configuration file] **************************************************************************************************************************************
2018-03-06 18:53:42,779 p=116622 u=qupeng |  changed: [pd]
2018-03-06 18:53:42,793 p=116622 u=qupeng |  TASK [pd : backup conf file] ***********************************************************************************************************************************************
2018-03-06 18:53:42,824 p=116622 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:53:42,867 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/binary_deployment.yml for pd
2018-03-06 18:53:42,879 p=116622 u=qupeng |  TASK [pd : deploy binary] **************************************************************************************************************************************************
2018-03-06 18:53:44,602 p=116622 u=qupeng |  changed: [pd]
2018-03-06 18:53:44,615 p=116622 u=qupeng |  TASK [pd : backup bianry file] *********************************************************************************************************************************************
2018-03-06 18:53:44,654 p=116622 u=qupeng |  TASK [pd : create startup script] ******************************************************************************************************************************************
2018-03-06 18:53:46,124 p=116622 u=qupeng |  changed: [pd] => (item=run)
2018-03-06 18:53:46,139 p=116622 u=qupeng |  TASK [pd : include] ********************************************************************************************************************************************************
2018-03-06 18:53:46,186 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/pd/tasks/supervise_deployment.yml for pd
2018-03-06 18:53:46,199 p=116622 u=qupeng |  TASK [pd : deploy supervise] ***********************************************************************************************************************************************
2018-03-06 18:53:46,807 p=116622 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:53:47,531 p=116622 u=qupeng |  changed: [pd] => (item=/data3/qupeng/raftstore-learner/pd/status/pd)
2018-03-06 18:53:47,549 p=116622 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:53:49,013 p=116622 u=qupeng |  ok: [pd] => (item=supervise)
2018-03-06 18:53:50,411 p=116622 u=qupeng |  ok: [pd] => (item=svc)
2018-03-06 18:53:51,822 p=116622 u=qupeng |  ok: [pd] => (item=svstat)
2018-03-06 18:53:51,841 p=116622 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:53:53,257 p=116622 u=qupeng |  changed: [pd] => (item=start)
2018-03-06 18:53:54,612 p=116622 u=qupeng |  changed: [pd] => (item=stop)
2018-03-06 18:53:54,626 p=116622 u=qupeng |  TASK [pd : prepare firewalld white list] ***********************************************************************************************************************************
2018-03-06 18:53:54,685 p=116622 u=qupeng |  ok: [pd]
2018-03-06 18:53:54,695 p=116622 u=qupeng |  PLAY [deploying TiKV cluster] **********************************************************************************************************************************************
2018-03-06 18:53:54,715 p=116622 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:53:55,376 p=116622 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/scripts)
2018-03-06 18:53:55,388 p=116622 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/scripts)
2018-03-06 18:53:55,407 p=116622 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/scripts)
2018-03-06 18:53:55,408 p=116622 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/scripts)
2018-03-06 18:53:55,414 p=116622 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/scripts)
2018-03-06 18:53:56,057 p=116622 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:53:56,072 p=116622 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-03-06 18:53:56,081 p=116622 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-03-06 18:53:56,086 p=116622 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-03-06 18:53:56,093 p=116622 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-03-06 18:53:56,704 p=116622 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/backup)
2018-03-06 18:53:56,709 p=116622 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/backup)
2018-03-06 18:53:56,725 p=116622 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/backup)
2018-03-06 18:53:56,740 p=116622 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/backup)
2018-03-06 18:53:56,743 p=116622 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/backup)
2018-03-06 18:53:56,751 p=116622 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:53:57,394 p=116622 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status)
2018-03-06 18:53:57,396 p=116622 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status)
2018-03-06 18:53:57,410 p=116622 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status)
2018-03-06 18:53:57,416 p=116622 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status)
2018-03-06 18:53:57,427 p=116622 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status)
2018-03-06 18:53:57,438 p=116622 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:53:58,049 p=116622 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/bin)
2018-03-06 18:53:58,055 p=116622 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/bin)
2018-03-06 18:53:58,081 p=116622 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/bin)
2018-03-06 18:53:58,098 p=116622 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/bin)
2018-03-06 18:53:58,128 p=116622 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/bin)
2018-03-06 18:53:58,141 p=116622 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:53:58,231 p=116622 u=qupeng |  TASK [tikv : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:53:58,820 p=116622 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/log)
2018-03-06 18:53:58,825 p=116622 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/log)
2018-03-06 18:53:58,882 p=116622 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/log)
2018-03-06 18:53:58,892 p=116622 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/log)
2018-03-06 18:53:58,912 p=116622 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/log)
2018-03-06 18:53:59,423 p=116622 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/data)
2018-03-06 18:53:59,428 p=116622 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/data)
2018-03-06 18:53:59,518 p=116622 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/data)
2018-03-06 18:53:59,522 p=116622 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/data)
2018-03-06 18:53:59,528 p=116622 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/data)
2018-03-06 18:54:00,034 p=116622 u=qupeng |  ok: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/conf)
2018-03-06 18:54:00,035 p=116622 u=qupeng |  ok: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/conf)
2018-03-06 18:54:00,121 p=116622 u=qupeng |  ok: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/conf)
2018-03-06 18:54:00,136 p=116622 u=qupeng |  ok: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/conf)
2018-03-06 18:54:00,157 p=116622 u=qupeng |  ok: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/conf)
2018-03-06 18:54:00,165 p=116622 u=qupeng |  TASK [tikv : load customized config] ***************************************************************************************************************************************
2018-03-06 18:54:00,222 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:54:00,231 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:54:00,235 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:54:00,246 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:54:00,263 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:54:00,269 p=116622 u=qupeng |  TASK [tikv : load default config] ******************************************************************************************************************************************
2018-03-06 18:54:00,317 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:54:00,334 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:54:00,335 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:54:00,337 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:54:00,353 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:54:00,359 p=116622 u=qupeng |  TASK [tikv : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:54:00,416 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:54:00,439 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:54:00,440 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:54:00,477 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:54:00,483 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:54:00,489 p=116622 u=qupeng |  TASK [tikv : generate final config] ****************************************************************************************************************************************
2018-03-06 18:54:00,543 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:54:00,546 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:54:00,557 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:54:00,560 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:54:00,574 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:54:00,583 p=116622 u=qupeng |  TASK [tikv : debug] ********************************************************************************************************************************************************
2018-03-06 18:54:00,629 p=116622 u=qupeng |  ok: [tikv2] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": "30s", 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:54:00,639 p=116622 u=qupeng |  ok: [tikv1] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": "30s", 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:54:00,659 p=116622 u=qupeng |  ok: [tikv3] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": "30s", 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:54:00,665 p=116622 u=qupeng |  ok: [tikv4] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": "30s", 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:54:00,678 p=116622 u=qupeng |  ok: [tikv5] => {
    "tikv_conf": {
        "coprocessor": {}, 
        "global": {}, 
        "metric": {
            "address": "172.16.21.1:60011", 
            "interval": "15s", 
            "job": "tikv"
        }, 
        "pd": {}, 
        "raftdb": {
            "defaultcf": {}
        }, 
        "raftstore": {
            "consistency-check-interval": "30s", 
            "raftdb-path": "", 
            "sync-log": true
        }, 
        "rocksdb": {
            "defaultcf": {}, 
            "lockcf": {}, 
            "wal-dir": "", 
            "writecf": {}
        }, 
        "security": {}, 
        "server": {
            "labels": {}
        }, 
        "storage": {}
    }
}
2018-03-06 18:54:00,684 p=116622 u=qupeng |  TASK [tikv : create config file] *******************************************************************************************************************************************
2018-03-06 18:54:01,962 p=116622 u=qupeng |  changed: [tikv5]
2018-03-06 18:54:01,973 p=116622 u=qupeng |  changed: [tikv4]
2018-03-06 18:54:01,989 p=116622 u=qupeng |  changed: [tikv1]
2018-03-06 18:54:01,990 p=116622 u=qupeng |  changed: [tikv3]
2018-03-06 18:54:02,005 p=116622 u=qupeng |  changed: [tikv2]
2018-03-06 18:54:02,012 p=116622 u=qupeng |  TASK [tikv : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:54:02,082 p=116622 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:54:02,176 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/binary_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-03-06 18:54:02,188 p=116622 u=qupeng |  TASK [tikv : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:54:05,819 p=116622 u=qupeng |  changed: [tikv3]
2018-03-06 18:54:05,821 p=116622 u=qupeng |  changed: [tikv2]
2018-03-06 18:54:05,840 p=116622 u=qupeng |  changed: [tikv4]
2018-03-06 18:54:05,865 p=116622 u=qupeng |  changed: [tikv1]
2018-03-06 18:54:05,868 p=116622 u=qupeng |  changed: [tikv5]
2018-03-06 18:54:05,879 p=116622 u=qupeng |  TASK [tikv : backup bianry file] *******************************************************************************************************************************************
2018-03-06 18:54:05,958 p=116622 u=qupeng |  TASK [tikv : create run script] ********************************************************************************************************************************************
2018-03-06 18:54:07,203 p=116622 u=qupeng |  changed: [tikv2] => (item=run)
2018-03-06 18:54:07,213 p=116622 u=qupeng |  changed: [tikv3] => (item=run)
2018-03-06 18:54:07,219 p=116622 u=qupeng |  changed: [tikv1] => (item=run)
2018-03-06 18:54:07,304 p=116622 u=qupeng |  changed: [tikv4] => (item=run)
2018-03-06 18:54:07,310 p=116622 u=qupeng |  changed: [tikv5] => (item=run)
2018-03-06 18:54:07,326 p=116622 u=qupeng |  TASK [tikv : backup script file] *******************************************************************************************************************************************
2018-03-06 18:54:07,416 p=116622 u=qupeng |  TASK [tikv : include] ******************************************************************************************************************************************************
2018-03-06 18:54:07,512 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tikv/tasks/supervise_deployment.yml for tikv1, tikv2, tikv3, tikv4, tikv5
2018-03-06 18:54:07,525 p=116622 u=qupeng |  TASK [tikv : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:54:09,972 p=116622 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:54:10,698 p=116622 u=qupeng |  changed: [tikv2] => (item=/data3/qupeng/raftstore-learner/tikv2/status/tikv)
2018-03-06 18:54:10,700 p=116622 u=qupeng |  changed: [tikv1] => (item=/data3/qupeng/raftstore-learner/tikv1/status/tikv)
2018-03-06 18:54:10,702 p=116622 u=qupeng |  changed: [tikv3] => (item=/data3/qupeng/raftstore-learner/tikv3/status/tikv)
2018-03-06 18:54:10,703 p=116622 u=qupeng |  changed: [tikv4] => (item=/data3/qupeng/raftstore-learner/tikv4/status/tikv)
2018-03-06 18:54:10,721 p=116622 u=qupeng |  changed: [tikv5] => (item=/data3/qupeng/raftstore-learner/tikv5/status/tikv)
2018-03-06 18:54:10,731 p=116622 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:54:12,102 p=116622 u=qupeng |  changed: [tikv4] => (item=supervise)
2018-03-06 18:54:12,105 p=116622 u=qupeng |  changed: [tikv1] => (item=supervise)
2018-03-06 18:54:12,106 p=116622 u=qupeng |  changed: [tikv3] => (item=supervise)
2018-03-06 18:54:12,115 p=116622 u=qupeng |  changed: [tikv2] => (item=supervise)
2018-03-06 18:54:12,116 p=116622 u=qupeng |  changed: [tikv5] => (item=supervise)
2018-03-06 18:54:13,309 p=116622 u=qupeng |  changed: [tikv1] => (item=svc)
2018-03-06 18:54:13,409 p=116622 u=qupeng |  changed: [tikv3] => (item=svc)
2018-03-06 18:54:13,415 p=116622 u=qupeng |  changed: [tikv2] => (item=svc)
2018-03-06 18:54:13,423 p=116622 u=qupeng |  changed: [tikv4] => (item=svc)
2018-03-06 18:54:13,438 p=116622 u=qupeng |  changed: [tikv5] => (item=svc)
2018-03-06 18:54:14,580 p=116622 u=qupeng |  changed: [tikv1] => (item=svstat)
2018-03-06 18:54:14,693 p=116622 u=qupeng |  changed: [tikv3] => (item=svstat)
2018-03-06 18:54:14,700 p=116622 u=qupeng |  changed: [tikv4] => (item=svstat)
2018-03-06 18:54:14,725 p=116622 u=qupeng |  changed: [tikv5] => (item=svstat)
2018-03-06 18:54:14,727 p=116622 u=qupeng |  changed: [tikv2] => (item=svstat)
2018-03-06 18:54:14,736 p=116622 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:54:16,079 p=116622 u=qupeng |  changed: [tikv5] => (item=start)
2018-03-06 18:54:16,083 p=116622 u=qupeng |  changed: [tikv2] => (item=start)
2018-03-06 18:54:16,094 p=116622 u=qupeng |  changed: [tikv1] => (item=start)
2018-03-06 18:54:16,100 p=116622 u=qupeng |  changed: [tikv4] => (item=start)
2018-03-06 18:54:16,101 p=116622 u=qupeng |  changed: [tikv3] => (item=start)
2018-03-06 18:54:17,253 p=116622 u=qupeng |  changed: [tikv5] => (item=stop)
2018-03-06 18:54:17,302 p=116622 u=qupeng |  changed: [tikv3] => (item=stop)
2018-03-06 18:54:17,310 p=116622 u=qupeng |  changed: [tikv1] => (item=stop)
2018-03-06 18:54:17,310 p=116622 u=qupeng |  changed: [tikv2] => (item=stop)
2018-03-06 18:54:17,341 p=116622 u=qupeng |  changed: [tikv4] => (item=stop)
2018-03-06 18:54:17,350 p=116622 u=qupeng |  TASK [tikv : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:54:17,393 p=116622 u=qupeng |  ok: [tikv1]
2018-03-06 18:54:17,426 p=116622 u=qupeng |  ok: [tikv2]
2018-03-06 18:54:17,435 p=116622 u=qupeng |  ok: [tikv3]
2018-03-06 18:54:17,442 p=116622 u=qupeng |  ok: [tikv5]
2018-03-06 18:54:17,450 p=116622 u=qupeng |  ok: [tikv4]
2018-03-06 18:54:17,456 p=116622 u=qupeng |  PLAY [deploying TiDB cluster] **********************************************************************************************************************************************
2018-03-06 18:54:17,469 p=116622 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:54:17,501 p=116622 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:54:17,526 p=116622 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:54:17,551 p=116622 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:54:17,575 p=116622 u=qupeng |  TASK [pump : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:54:17,607 p=116622 u=qupeng |  TASK [pump : include] ******************************************************************************************************************************************************
2018-03-06 18:54:17,626 p=116622 u=qupeng |  TASK [pump : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:54:17,645 p=116622 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:54:18,301 p=116622 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/scripts)
2018-03-06 18:54:18,983 p=116622 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-03-06 18:54:19,715 p=116622 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/backup)
2018-03-06 18:54:19,725 p=116622 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:54:19,768 p=116622 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:54:20,496 p=116622 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/bin)
2018-03-06 18:54:20,509 p=116622 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:54:20,558 p=116622 u=qupeng |  TASK [tidb : create deploy directories] ************************************************************************************************************************************
2018-03-06 18:54:21,257 p=116622 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/log)
2018-03-06 18:54:21,922 p=116622 u=qupeng |  ok: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/conf)
2018-03-06 18:54:21,936 p=116622 u=qupeng |  TASK [tidb : load customized config] ***************************************************************************************************************************************
2018-03-06 18:54:21,982 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:54:21,994 p=116622 u=qupeng |  TASK [tidb : load default config] ******************************************************************************************************************************************
2018-03-06 18:54:22,040 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:54:22,054 p=116622 u=qupeng |  TASK [tidb : generate metrics config] **************************************************************************************************************************************
2018-03-06 18:54:22,118 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:54:22,130 p=116622 u=qupeng |  TASK [tidb : combine final config] *****************************************************************************************************************************************
2018-03-06 18:54:22,197 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:54:22,212 p=116622 u=qupeng |  TASK [tidb : debug] ********************************************************************************************************************************************************
2018-03-06 18:54:22,277 p=116622 u=qupeng |  ok: [tidb] => {
    "tidb_conf": {
        "global": {
            "enable-chunk": true, 
            "host": "0.0.0.0", 
            "lease": "10s", 
            "run-ddl": true, 
            "split-table": true, 
            "store": "tikv"
        }, 
        "log": {
            "disable-timestamp": false, 
            "file": {
                "log-rotate": true
            }, 
            "format": "text", 
            "level": "info", 
            "query-log-max-len": 2048, 
            "slow-threshold": 300
        }, 
        "opentracing": {
            "enable": false, 
            "reporter": {
                "buffer-flush-interval": 0, 
                "local-agent-host-port": "", 
                "log-spans": false, 
                "queue-size": 0
            }, 
            "rpc-metrics": false, 
            "sampler": {
                "max-operations": 0, 
                "param": 1.0, 
                "sampling-refresh-interval": 0, 
                "sampling-server-url": "", 
                "type": "const"
            }
        }, 
        "performance": {
            "cross-join": true, 
            "join-concurrency": 5, 
            "max-procs": 0, 
            "retry-limit": 10, 
            "run-auto-analyze": true, 
            "stats-lease": "3s", 
            "tcp-keep-alive": true
        }, 
        "plan_cache": {
            "capacity": 2560, 
            "enabled": false, 
            "shards": 256
        }, 
        "prepared_plan_cache": {
            "capacity": 100, 
            "enabled": false
        }, 
        "proxy_protocol": {
            "header-timeout": 5, 
            "networks": ""
        }, 
        "security": {
            "cluster-ssl-ca": "", 
            "cluster-ssl-cert": "", 
            "cluster-ssl-key": "", 
            "ssl-ca": "", 
            "ssl-cert": "", 
            "ssl-key": ""
        }, 
        "status": {
            "metrics-addr": "172.16.21.1:60011", 
            "metrics-interval": 15, 
            "report-status": true
        }, 
        "tikv_client": {
            "grpc-connection-count": 16
        }, 
        "xprotocol": {
            "xhost": "0.0.0.0", 
            "xport": 14000, 
            "xserver": false, 
            "xsocket": ""
        }
    }
}
2018-03-06 18:54:22,290 p=116622 u=qupeng |  TASK [tidb : create config file] *******************************************************************************************************************************************
2018-03-06 18:54:23,714 p=116622 u=qupeng |  changed: [tidb]
2018-03-06 18:54:23,728 p=116622 u=qupeng |  TASK [tidb : backup conf file] *********************************************************************************************************************************************
2018-03-06 18:54:23,769 p=116622 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-03-06 18:54:23,824 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/binary_deployment.yml for tidb
2018-03-06 18:54:23,839 p=116622 u=qupeng |  TASK [tidb : deploy binary] ************************************************************************************************************************************************
2018-03-06 18:54:25,712 p=116622 u=qupeng |  changed: [tidb]
2018-03-06 18:54:25,726 p=116622 u=qupeng |  TASK [tidb : backup binary file] *******************************************************************************************************************************************
2018-03-06 18:54:25,770 p=116622 u=qupeng |  TASK [tidb : create run script] ********************************************************************************************************************************************
2018-03-06 18:54:27,292 p=116622 u=qupeng |  changed: [tidb] => (item=run)
2018-03-06 18:54:27,307 p=116622 u=qupeng |  TASK [tidb : backup script file] *******************************************************************************************************************************************
2018-03-06 18:54:27,338 p=116622 u=qupeng |  TASK [tidb : include] ******************************************************************************************************************************************************
2018-03-06 18:54:27,377 p=116622 u=qupeng |  included: /home/qupeng/ansible/tidb-ansible/roles/tidb/tasks/supervise_deployment.yml for tidb
2018-03-06 18:54:27,389 p=116622 u=qupeng |  TASK [tidb : deploy supervise] *********************************************************************************************************************************************
2018-03-06 18:54:28,121 p=116622 u=qupeng |  TASK [supervise : create supervise status directory] ***********************************************************************************************************************
2018-03-06 18:54:28,902 p=116622 u=qupeng |  changed: [tidb] => (item=/data3/qupeng/raftstore-learner/tidb/status/tidb)
2018-03-06 18:54:28,917 p=116622 u=qupeng |  TASK [supervise : deploy supervise binary] *********************************************************************************************************************************
2018-03-06 18:54:30,338 p=116622 u=qupeng |  changed: [tidb] => (item=supervise)
2018-03-06 18:54:31,800 p=116622 u=qupeng |  changed: [tidb] => (item=svc)
2018-03-06 18:54:33,203 p=116622 u=qupeng |  changed: [tidb] => (item=svstat)
2018-03-06 18:54:33,217 p=116622 u=qupeng |  TASK [supervise : create startup script - common start/stop] ***************************************************************************************************************
2018-03-06 18:54:34,717 p=116622 u=qupeng |  changed: [tidb] => (item=start)
2018-03-06 18:54:36,111 p=116622 u=qupeng |  changed: [tidb] => (item=stop)
2018-03-06 18:54:36,126 p=116622 u=qupeng |  TASK [tidb : prepare firewalld white list] *********************************************************************************************************************************
2018-03-06 18:54:36,163 p=116622 u=qupeng |  ok: [tidb]
2018-03-06 18:54:36,172 p=116622 u=qupeng |  PLAY [finalizing deployment target] ****************************************************************************************************************************************
2018-03-06 18:54:36,193 p=116622 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-03-06 18:54:36,335 p=116622 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-03-06 18:54:36,455 p=116622 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-03-06 18:54:36,590 p=116622 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-03-06 18:54:36,712 p=116622 u=qupeng |  TASK [firewalld : All enabled ports] ***************************************************************************************************************************************
2018-03-06 18:54:36,838 p=116622 u=qupeng |  TASK [firewalld : determine if firewalld is running] ***********************************************************************************************************************
2018-03-06 18:54:36,968 p=116622 u=qupeng |  TASK [firewalld : enable firewalld ports] **********************************************************************************************************************************
2018-03-06 18:54:37,111 p=116622 u=qupeng |  TASK [firewalld : reload firewalld] ****************************************************************************************************************************************
2018-03-06 18:54:37,238 p=116622 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:54:37,238 p=116622 u=qupeng |  172.16.21.1                : ok=27   changed=10   unreachable=0    failed=0   
2018-03-06 18:54:37,239 p=116622 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:54:37,239 p=116622 u=qupeng |  monitoring                 : ok=37   changed=15   unreachable=0    failed=0   
2018-03-06 18:54:37,239 p=116622 u=qupeng |  pd                         : ok=49   changed=20   unreachable=0    failed=0   
2018-03-06 18:54:37,239 p=116622 u=qupeng |  tidb                       : ok=27   changed=9    unreachable=0    failed=0   
2018-03-06 18:54:37,239 p=116622 u=qupeng |  tikv1                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:54:37,240 p=116622 u=qupeng |  tikv2                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:54:37,240 p=116622 u=qupeng |  tikv3                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:54:37,240 p=116622 u=qupeng |  tikv4                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:54:37,240 p=116622 u=qupeng |  tikv5                      : ok=28   changed=10   unreachable=0    failed=0   
2018-03-06 18:54:37,241 p=116622 u=qupeng |  Congrats! All goes well. :-)
2018-03-06 18:55:15,281 p=133302 u=qupeng |  PLAY [check config locally] ************************************************************************************************************************************************
2018-03-06 18:55:15,295 p=133302 u=qupeng |  TASK [check_config_static : Ensure only one monitoring host exists] ********************************************************************************************************
2018-03-06 18:55:15,322 p=133302 u=qupeng |  TASK [check_config_static : Warn if TiDB host not exists] ******************************************************************************************************************
2018-03-06 18:55:15,344 p=133302 u=qupeng |  TASK [check_config_static : Ensure zookeeper address of kafka cluster is set when enable_binlog] ***************************************************************************
2018-03-06 18:55:15,364 p=133302 u=qupeng |  TASK [check_config_static : Ensure PD host exists] *************************************************************************************************************************
2018-03-06 18:55:15,388 p=133302 u=qupeng |  TASK [check_config_static : Ensure TiKV host exists] ***********************************************************************************************************************
2018-03-06 18:55:15,412 p=133302 u=qupeng |  TASK [check_config_static : Close old control master] **********************************************************************************************************************
2018-03-06 18:55:15,477 p=133302 u=qupeng |  ok: [localhost]
2018-03-06 18:55:15,485 p=133302 u=qupeng |  PLAY [gather all facts, and check dest] ************************************************************************************************************************************
2018-03-06 18:55:15,512 p=133302 u=qupeng |  TASK [check_config_dynamic : Disk space check - Fail task when disk is full] ***********************************************************************************************
2018-03-06 18:55:15,672 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:15,693 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:15,712 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:15,729 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:15,730 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:15,800 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:15,826 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:15,832 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:15,845 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:15,858 p=133302 u=qupeng |  TASK [check_config_dynamic : get facts] ************************************************************************************************************************************
2018-03-06 18:55:20,764 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:20,908 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:20,957 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:21,014 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:21,054 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:25,279 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:25,476 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:25,633 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:26,587 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:26,604 p=133302 u=qupeng |  TASK [check_config_dynamic : Preflight check - Set NTP service status] *****************************************************************************************************
2018-03-06 18:55:27,516 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:27,532 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:27,547 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:27,561 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:27,562 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:28,264 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:28,305 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:28,320 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:28,325 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:28,333 p=133302 u=qupeng |  TASK [check_config_dynamic : Preflight check - NTP service] ****************************************************************************************************************
2018-03-06 18:55:28,441 p=133302 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set default] **************************************************************************************************************
2018-03-06 18:55:28,546 p=133302 u=qupeng |  TASK [check_config_dynamic : Set enable_binlog - set inverse] **************************************************************************************************************
2018-03-06 18:55:28,646 p=133302 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - set ansible_user as default] **********************************************************************************************
2018-03-06 18:55:28,682 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:28,703 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:28,714 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:28,725 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:28,726 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:28,732 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:28,742 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:28,742 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:28,752 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:28,759 p=133302 u=qupeng |  TASK [check_config_dynamic : Guess deploy_user - use become_user under root] ***********************************************************************************************
2018-03-06 18:55:28,856 p=133302 u=qupeng |  TASK [check_config_dynamic : Set deploy dir if not presented] **************************************************************************************************************
2018-03-06 18:55:28,947 p=133302 u=qupeng |  TASK [check_config_dynamic : Preflight check - Deploy user] ****************************************************************************************************************
2018-03-06 18:55:29,040 p=133302 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get umask] ******************************************************************************************************************
2018-03-06 18:55:29,838 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:29,871 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:29,895 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:29,912 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:29,914 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:30,544 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:30,559 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:30,599 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:30,652 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:30,667 p=133302 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get Hard Max FD limit] ******************************************************************************************************
2018-03-06 18:55:31,384 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:31,431 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:31,453 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:31,472 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:31,474 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:32,066 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:32,099 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:32,135 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:32,140 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:32,149 p=133302 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does the system have a standard umask?] *************************************************************************************
2018-03-06 18:55:32,257 p=133302 u=qupeng |  TASK [check_config_dynamic : Preflight check - ulimit -n] ******************************************************************************************************************
2018-03-06 18:55:32,360 p=133302 u=qupeng |  TASK [check_config_dynamic : Preflight check - Get deploy dir permissions] *************************************************************************************************
2018-03-06 18:55:33,341 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:33,356 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:33,372 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:33,386 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:33,395 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:34,220 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:34,224 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:34,250 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:34,256 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:34,264 p=133302 u=qupeng |  TASK [check_config_dynamic : Preflight check - Does deploy dir have appropriate permissions?] ******************************************************************************
2018-03-06 18:55:34,365 p=133302 u=qupeng |  TASK [check_config_dynamic : Check swap] ***********************************************************************************************************************************
2018-03-06 18:55:34,402 p=133302 u=qupeng |  ok: [pd] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:55:34,416 p=133302 u=qupeng |  ok: [monitoring] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:55:34,438 p=133302 u=qupeng |  ok: [tikv1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:55:34,449 p=133302 u=qupeng |  ok: [172.16.21.1] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:55:34,450 p=133302 u=qupeng |  ok: [tidb] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:55:34,450 p=133302 u=qupeng |  ok: [tikv2] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:55:34,457 p=133302 u=qupeng |  ok: [tikv3] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:55:34,467 p=133302 u=qupeng |  ok: [tikv4] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:55:34,486 p=133302 u=qupeng |  ok: [tikv5] => {
    "msg": "Swap is on, for best performance, turn swap off"
}
2018-03-06 18:55:34,493 p=133302 u=qupeng |  TASK [check_config_dynamic : environment check (deploy dir)] ***************************************************************************************************************
2018-03-06 18:55:35,335 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:35,351 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:35,381 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:35,396 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:35,406 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:36,101 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:36,109 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:36,243 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:36,280 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:36,290 p=133302 u=qupeng |  TASK [check_config_dynamic : environment check (supervise)] ****************************************************************************************************************
2018-03-06 18:55:37,228 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:37,253 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:37,273 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:37,291 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:37,293 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:38,025 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:38,053 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:38,069 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:38,091 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:38,100 p=133302 u=qupeng |  TASK [check_config_dynamic : config skip variables (default)] **************************************************************************************************************
2018-03-06 18:55:38,129 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:38,151 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:38,161 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:38,172 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:38,182 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:38,183 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:38,184 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:38,194 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:38,204 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:38,210 p=133302 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:55:38,258 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:38,268 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:38,279 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:38,301 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:38,302 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:38,303 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:38,308 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:38,320 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:38,365 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:38,376 p=133302 u=qupeng |  TASK [check_config_dynamic : config skip variables] ************************************************************************************************************************
2018-03-06 18:55:38,439 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:38,450 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:38,461 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:38,481 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:38,482 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:55:38,490 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:38,497 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:38,499 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:38,517 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:38,525 p=133302 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:55:38,533 p=133302 u=qupeng |  TASK [start node_exporter by supervise] ************************************************************************************************************************************
2018-03-06 18:55:39,454 p=133302 u=qupeng |  changed: [pd] => (item=node_exporter)
2018-03-06 18:55:39,467 p=133302 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:55:39,501 p=133302 u=qupeng |  TASK [start node_exporter by systemd] **************************************************************************************************************************************
2018-03-06 18:55:39,530 p=133302 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:55:41,383 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:41,392 p=133302 u=qupeng |  PLAY [monitored_servers] ***************************************************************************************************************************************************
2018-03-06 18:55:41,407 p=133302 u=qupeng |  TASK [start blackbox_exporter by supervise] ********************************************************************************************************************************
2018-03-06 18:55:42,322 p=133302 u=qupeng |  changed: [pd] => (item=blackbox_exporter)
2018-03-06 18:55:42,335 p=133302 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:55:42,368 p=133302 u=qupeng |  TASK [start blackbox_exporter by systemd] **********************************************************************************************************************************
2018-03-06 18:55:42,404 p=133302 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:55:43,110 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:43,117 p=133302 u=qupeng |  PLAY [monitoring_servers] **************************************************************************************************************************************************
2018-03-06 18:55:43,129 p=133302 u=qupeng |  TASK [start monitoring modules by supervise] *******************************************************************************************************************************
2018-03-06 18:55:44,059 p=133302 u=qupeng |  changed: [monitoring] => (item=pushgateway)
2018-03-06 18:55:44,945 p=133302 u=qupeng |  changed: [monitoring] => (item=prometheus)
2018-03-06 18:55:44,958 p=133302 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:55:44,994 p=133302 u=qupeng |  TASK [start monitoring modules by systemd] *********************************************************************************************************************************
2018-03-06 18:55:45,024 p=133302 u=qupeng |  TASK [wait pushgateway up] *************************************************************************************************************************************************
2018-03-06 18:55:45,695 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:45,707 p=133302 u=qupeng |  TASK [wait prometheus up] **************************************************************************************************************************************************
2018-03-06 18:55:46,421 p=133302 u=qupeng |  ok: [monitoring]
2018-03-06 18:55:46,430 p=133302 u=qupeng |  PLAY [pd_servers] **********************************************************************************************************************************************************
2018-03-06 18:55:46,445 p=133302 u=qupeng |  TASK [start PD by supervise] ***********************************************************************************************************************************************
2018-03-06 18:55:47,307 p=133302 u=qupeng |  changed: [pd] => (item=pd)
2018-03-06 18:55:47,319 p=133302 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:55:47,347 p=133302 u=qupeng |  TASK [start PD by systemd] *************************************************************************************************************************************************
2018-03-06 18:55:47,374 p=133302 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:55:49,056 p=133302 u=qupeng |  ok: [pd]
2018-03-06 18:55:49,065 p=133302 u=qupeng |  PLAY [tikv_servers] ********************************************************************************************************************************************************
2018-03-06 18:55:49,081 p=133302 u=qupeng |  TASK [start TiKV by supervise] *********************************************************************************************************************************************
2018-03-06 18:55:49,854 p=133302 u=qupeng |  changed: [tikv1] => (item=tikv)
2018-03-06 18:55:49,882 p=133302 u=qupeng |  changed: [tikv4] => (item=tikv)
2018-03-06 18:55:49,884 p=133302 u=qupeng |  changed: [tikv3] => (item=tikv)
2018-03-06 18:55:49,919 p=133302 u=qupeng |  changed: [tikv2] => (item=tikv)
2018-03-06 18:55:49,922 p=133302 u=qupeng |  changed: [tikv5] => (item=tikv)
2018-03-06 18:55:49,930 p=133302 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:55:49,984 p=133302 u=qupeng |  TASK [start TiKV by systemd] ***********************************************************************************************************************************************
2018-03-06 18:55:50,038 p=133302 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:55:51,828 p=133302 u=qupeng |  ok: [tikv2]
2018-03-06 18:55:51,835 p=133302 u=qupeng |  ok: [tikv3]
2018-03-06 18:55:51,858 p=133302 u=qupeng |  ok: [tikv4]
2018-03-06 18:55:51,861 p=133302 u=qupeng |  ok: [tikv5]
2018-03-06 18:55:51,871 p=133302 u=qupeng |  ok: [tikv1]
2018-03-06 18:55:51,878 p=133302 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:55:51,940 p=133302 u=qupeng |  TASK [command] *************************************************************************************************************************************************************
2018-03-06 18:55:52,730 p=133302 u=qupeng |  changed: [tikv3]
2018-03-06 18:55:52,740 p=133302 u=qupeng |  changed: [tikv2]
2018-03-06 18:55:52,749 p=133302 u=qupeng |  changed: [tikv1]
2018-03-06 18:55:52,773 p=133302 u=qupeng |  changed: [tikv4]
2018-03-06 18:55:53,741 p=133302 u=qupeng |  changed: [tikv5]
2018-03-06 18:55:53,755 p=133302 u=qupeng |  TASK [display new tikv pid] ************************************************************************************************************************************************
2018-03-06 18:55:53,802 p=133302 u=qupeng |  ok: [tikv1] => {
    "msg": "tikv binary or docker pid: 137919"
}
2018-03-06 18:55:53,818 p=133302 u=qupeng |  ok: [tikv2] => {
    "msg": "tikv binary or docker pid: 137960"
}
2018-03-06 18:55:53,828 p=133302 u=qupeng |  ok: [tikv3] => {
    "msg": "tikv binary or docker pid: 137938"
}
2018-03-06 18:55:53,832 p=133302 u=qupeng |  ok: [tikv4] => {
    "msg": "tikv binary or docker pid: 137940"
}
2018-03-06 18:55:53,888 p=133302 u=qupeng |  ok: [tikv5] => {
    "msg": "tikv binary or docker pid: 137964"
}
2018-03-06 18:55:53,895 p=133302 u=qupeng |  PLAY [tidb_servers] ********************************************************************************************************************************************************
2018-03-06 18:55:53,903 p=133302 u=qupeng |  TASK [clean pump .node file] ***********************************************************************************************************************************************
2018-03-06 18:55:53,928 p=133302 u=qupeng |  TASK [start pump by supervise] *********************************************************************************************************************************************
2018-03-06 18:55:53,956 p=133302 u=qupeng |  TASK [start pump by systemd] ***********************************************************************************************************************************************
2018-03-06 18:55:53,981 p=133302 u=qupeng |  TASK [start pump by systemd] ***********************************************************************************************************************************************
2018-03-06 18:55:54,005 p=133302 u=qupeng |  TASK [wait pump up] ********************************************************************************************************************************************************
2018-03-06 18:55:54,024 p=133302 u=qupeng |  TASK [start TiDB by supervise] *********************************************************************************************************************************************
2018-03-06 18:55:54,884 p=133302 u=qupeng |  changed: [tidb] => (item=tidb)
2018-03-06 18:55:54,902 p=133302 u=qupeng |  TASK [start TiDB by systemd] ***********************************************************************************************************************************************
2018-03-06 18:55:54,934 p=133302 u=qupeng |  TASK [start TiDB by systemd] ***********************************************************************************************************************************************
2018-03-06 18:55:54,963 p=133302 u=qupeng |  TASK [wait up] *************************************************************************************************************************************************************
2018-03-06 18:55:58,639 p=133302 u=qupeng |  ok: [tidb]
2018-03-06 18:55:58,648 p=133302 u=qupeng |  PLAY [grafana_servers] *****************************************************************************************************************************************************
2018-03-06 18:55:58,665 p=133302 u=qupeng |  TASK [common_dir : create deploy directories] ******************************************************************************************************************************
2018-03-06 18:55:58,724 p=133302 u=qupeng |  TASK [common_dir : create status directory] ********************************************************************************************************************************
2018-03-06 18:55:58,762 p=133302 u=qupeng |  TASK [common_dir : create deploy binary directory] *************************************************************************************************************************
2018-03-06 18:55:58,798 p=133302 u=qupeng |  TASK [common_dir : create docker image directory] **************************************************************************************************************************
2018-03-06 18:55:58,833 p=133302 u=qupeng |  TASK [grafana : include] ***************************************************************************************************************************************************
2018-03-06 18:55:58,859 p=133302 u=qupeng |  TASK [start grafana by supervise] ******************************************************************************************************************************************
2018-03-06 18:55:59,803 p=133302 u=qupeng |  changed: [172.16.21.1] => (item=grafana)
2018-03-06 18:55:59,811 p=133302 u=qupeng |  TASK [start grafana by systemd] ********************************************************************************************************************************************
2018-03-06 18:55:59,840 p=133302 u=qupeng |  TASK [start grafana by systemd] ********************************************************************************************************************************************
2018-03-06 18:55:59,867 p=133302 u=qupeng |  TASK [wait grafana up] *****************************************************************************************************************************************************
2018-03-06 18:56:01,567 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:56:01,578 p=133302 u=qupeng |  TASK [set_fact] ************************************************************************************************************************************************************
2018-03-06 18:56:01,621 p=133302 u=qupeng |  ok: [172.16.21.1]
2018-03-06 18:56:01,634 p=133302 u=qupeng |  TASK [import grafana data source] ******************************************************************************************************************************************
2018-03-06 18:56:02,496 p=133302 u=qupeng |  changed: [172.16.21.1]
2018-03-06 18:56:02,512 p=133302 u=qupeng |  TASK [import grafana dashboards - prepare config] **************************************************************************************************************************
2018-03-06 18:56:02,995 p=133302 u=qupeng |  ok: [172.16.21.1 -> localhost]
2018-03-06 18:56:03,014 p=133302 u=qupeng |  TASK [import grafana dashboards - run import script] ***********************************************************************************************************************
2018-03-06 18:56:04,098 p=133302 u=qupeng |  changed: [172.16.21.1 -> localhost]
2018-03-06 18:56:04,101 p=133302 u=qupeng |  PLAY RECAP *****************************************************************************************************************************************************************
2018-03-06 18:56:04,101 p=133302 u=qupeng |  172.16.21.1                : ok=19   changed=3    unreachable=0    failed=0   
2018-03-06 18:56:04,102 p=133302 u=qupeng |  localhost                  : ok=1    changed=0    unreachable=0    failed=0   
2018-03-06 18:56:04,102 p=133302 u=qupeng |  monitoring                 : ok=16   changed=1    unreachable=0    failed=0   
2018-03-06 18:56:04,102 p=133302 u=qupeng |  pd                         : ok=19   changed=3    unreachable=0    failed=0   
2018-03-06 18:56:04,102 p=133302 u=qupeng |  tidb                       : ok=15   changed=1    unreachable=0    failed=0   
2018-03-06 18:56:04,102 p=133302 u=qupeng |  tikv1                      : ok=17   changed=2    unreachable=0    failed=0   
2018-03-06 18:56:04,103 p=133302 u=qupeng |  tikv2                      : ok=17   changed=2    unreachable=0    failed=0   
2018-03-06 18:56:04,103 p=133302 u=qupeng |  tikv3                      : ok=17   changed=2    unreachable=0    failed=0   
2018-03-06 18:56:04,103 p=133302 u=qupeng |  tikv4                      : ok=17   changed=2    unreachable=0    failed=0   
2018-03-06 18:56:04,103 p=133302 u=qupeng |  tikv5                      : ok=17   changed=2    unreachable=0    failed=0   
2018-03-06 18:56:04,104 p=133302 u=qupeng |  Congrats! All goes well. :-)
